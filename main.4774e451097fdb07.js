(self.webpackChunkImagenesAlain=self.webpackChunkImagenesAlain||[]).push([[179],{2011:(at,Se,L)=>{"use strict";L.d(Se,{hO:()=>ze,xv:()=>Ee,Dh:()=>ce,GT:()=>ge,cc:()=>Oe,on:()=>$,pX:()=>ie});var _=L(5e3),J=L(127),O=L(2680);at=L.hmd(at);const se=["ngOnDestroy"],ie=(re,he,De,_e={})=>new Proxy(re,{get:($e,Ae)=>De.runOutsideAngular(()=>{var ot;if(re[Ae])return(null===(ot=null==_e?void 0:_e.spy)||void 0===ot?void 0:ot.get)&&_e.spy.get(Ae,re[Ae]),re[Ae];if(se.indexOf(Ae)>-1)return()=>{};const Qe=he.toPromise().then(mt=>{const Q=mt&&mt[Ae];return"function"==typeof Q?Q.bind(mt):Q&&Q.then?Q.then(oe=>De.run(()=>oe)):De.run(()=>Q)});return new Proxy(()=>{},{get:(mt,Q)=>Qe[Q],apply:(mt,Q,oe)=>Qe.then(ye=>{var Ce;const ke=ye&&ye(...oe);return(null===(Ce=null==_e?void 0:_e.spy)||void 0===Ce?void 0:Ce.apply)&&_e.spy.apply(Ae,oe,ke),ke})})})}),ge=(re,he)=>{he.forEach(De=>{Object.getOwnPropertyNames(De.prototype||De).forEach(_e=>{Object.defineProperty(re.prototype,_e,Object.getOwnPropertyDescriptor(De.prototype||De,_e))})})};class ae{constructor(he){return he}}const ce=new _.OlP("angularfire2.app.options"),Ee=new _.OlP("angularfire2.app.name");function $(re,he,De){const $e="object"==typeof De&&De||{};$e.name=$e.name||"string"==typeof De&&De||"[DEFAULT]";const ot=J.Z.apps.filter(Qe=>Qe&&Qe.name===$e.name)[0]||he.runOutsideAngular(()=>J.Z.initializeApp(re,$e));try{JSON.stringify(re)!==JSON.stringify(ot.options)&&G("error",`${ot.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Qe){}return new ae(ot)}const G=(re,...he)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[re](...he)},X={provide:ae,useFactory:$,deps:[ce,_.R0b,[new _.FiY,Ee]]};let ze=(()=>{class re{constructor(De){J.Z.registerVersion("angularfire",O.q4.full,"core"),J.Z.registerVersion("angularfire",O.q4.full,"app-compat"),J.Z.registerVersion("angular",_.q4F.full,De.toString())}static initializeApp(De,_e){return{ngModule:re,providers:[{provide:ce,useValue:De},{provide:Ee,useValue:_e}]}}}return re.\u0275fac=function(De){return new(De||re)(_.LFG(_.Lbi))},re.\u0275mod=_.oAB({type:re}),re.\u0275inj=_.cJS({providers:[X]}),re})();function Oe(re,he,De,_e,$e){const[,Ae,ot]=globalThis.\u0275AngularfireInstanceCache.find(Qe=>Qe[0]===re)||[];if(Ae)return function Le(re,he){try{return re.toString()===he.toString()}catch(De){return re===he}}($e,ot)||(K("error",`${he} was already initialized on the ${De} Firebase App with different settings.${He?" You may need to reload as Firebase is not HMR aware.":""}`),K("warn",{is:$e,was:ot})),Ae;{const Qe=_e();return globalThis.\u0275AngularfireInstanceCache.push([re,Qe,$e]),Qe}}const He=!!at.hot,K=(re,...he)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[re](...he)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2680:(at,Se,L)=>{"use strict";L.d(Se,{q4:()=>Co,iC:()=>Js,HU:()=>ku,vb:()=>Ou,JM:()=>Ja});var _=L(5e3),J=L(5867),O=L(5861),se=L(9681),ie=L(2090),ge=L(4859),ae=L(1877),ce=L(2940);const Ee="@firebase/installations",$="0.5.5",X=`w:${$}`,ze="FIS_v2",he=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function De(D){return D instanceof ie.ZR&&D.code.includes("request-failed")}function _e({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function $e(D){return{token:D.token,requestStatus:2,expiresIn:ye(D.expiresIn),creationTime:Date.now()}}function Ae(D,T){return ot.apply(this,arguments)}function ot(){return(ot=(0,O.Z)(function*(D,T){const V=(yield T.json()).error;return he.create("request-failed",{requestName:D,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function Qe({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function mt(D,{refreshToken:T}){const R=Qe(D);return R.append("Authorization",function Ce(D){return`${ze} ${D}`}(T)),R}function Q(D){return oe.apply(this,arguments)}function oe(){return(oe=(0,O.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function ye(D){return Number(D.replace("s","000"))}function ke(D,T){return le.apply(this,arguments)}function le(){return(le=(0,O.Z)(function*(D,{fid:T}){const R=_e(D),ne={method:"POST",headers:Qe(D),body:JSON.stringify({fid:T,authVersion:ze,appId:D.appId,sdkVersion:X})},Me=yield Q(()=>fetch(R,ne));if(Me.ok){const qe=yield Me.json();return{fid:qe.fid||T,registrationStatus:2,refreshToken:qe.refreshToken,authToken:$e(qe.authToken)}}throw yield Ae("Create Installation",Me)})).apply(this,arguments)}function Tt(D){return new Promise(T=>{setTimeout(T,D)})}const gr=/^[cdef][\w-]{21}$/;function ht(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const R=function Yn(D){return function Ft(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return gr.test(R)?R:""}catch(D){return""}}function Gt(D){return`${D.appName}!${D.appId}`}const ur=new Map;function en(D,T){const R=Gt(D);Dn(R,T),function Ei(D,T){const R=function Bt(){return!Zt&&"BroadcastChannel"in self&&(Zt=new BroadcastChannel("[Firebase] FID Change"),Zt.onmessage=D=>{Dn(D.data.key,D.data.fid)}),Zt}();R&&R.postMessage({key:D,fid:T}),function uo(){0===ur.size&&Zt&&(Zt.close(),Zt=null)}()}(R,T)}function Dn(D,T){const R=ur.get(D);if(R)for(const V of R)V(T)}let Zt=null;const Ne="firebase-installations-store";let lr=null;function it(){return lr||(lr=(0,ce.openDb)("firebase-installations-database",1,D=>{0===D.oldVersion&&D.createObjectStore(Ne)})),lr}function wi(D,T){return kt.apply(this,arguments)}function kt(){return(kt=(0,O.Z)(function*(D,T){const R=Gt(D),z=(yield it()).transaction(Ne,"readwrite"),ne=z.objectStore(Ne),Me=yield ne.get(R);return yield ne.put(T,R),yield z.complete,(!Me||Me.fid!==T.fid)&&en(D,T.fid),T})).apply(this,arguments)}function Bn(D){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,O.Z)(function*(D){const T=Gt(D),V=(yield it()).transaction(Ne,"readwrite");yield V.objectStore(Ne).delete(T),yield V.complete})).apply(this,arguments)}function mr(D,T){return _r.apply(this,arguments)}function _r(){return(_r=(0,O.Z)(function*(D,T){const R=Gt(D),z=(yield it()).transaction(Ne,"readwrite"),ne=z.objectStore(Ne),Me=yield ne.get(R),qe=T(Me);return void 0===qe?yield ne.delete(R):yield ne.put(qe,R),yield z.complete,qe&&(!Me||Me.fid!==qe.fid)&&en(D,qe.fid),qe})).apply(this,arguments)}function fn(D){return ii.apply(this,arguments)}function ii(){return(ii=(0,O.Z)(function*(D){let T;const R=yield mr(D,V=>{const z=Bo(V),ne=Rt(D,z);return T=ne.registrationPromise,ne.installationEntry});return""===R.fid?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}})).apply(this,arguments)}function Bo(D){return rn(D||{fid:ht(),registrationStatus:0})}function Rt(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(he.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},V=function st(D,T){return pt.apply(this,arguments)}(D,R);return{installationEntry:R,registrationPromise:V}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:lo(D)}:{installationEntry:T}}function pt(){return(pt=(0,O.Z)(function*(D,T){try{return wi(D,yield ke(D,T))}catch(R){throw De(R)&&409===R.customData.serverCode?yield Bn(D):yield wi(D,{fid:T.fid,registrationStatus:0}),R}})).apply(this,arguments)}function lo(D){return vs.apply(this,arguments)}function vs(){return(vs=(0,O.Z)(function*(D){let T=yield ut(D);for(;1===T.registrationStatus;)yield Tt(100),T=yield ut(D);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:V}=yield fn(D);return V||R}return T})).apply(this,arguments)}function ut(D){return mr(D,T=>{if(!T)throw he.create("installation-not-found");return rn(T)})}function rn(D){return function cr(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Ii(D,T){return B.apply(this,arguments)}function B(){return(B=(0,O.Z)(function*({appConfig:D,platformLoggerProvider:T},R){const V=H(D,R),z=mt(D,R),ne=T.getImmediate({optional:!0});ne&&z.append("x-firebase-client",ne.getPlatformInfoString());const qe={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:X}})},Ve=yield Q(()=>fetch(V,qe));if(Ve.ok)return $e(yield Ve.json());throw yield Ae("Generate Auth Token",Ve)})).apply(this,arguments)}function H(D,{fid:T}){return`${_e(D)}/${T}/authTokens:generate`}function W(D){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(D,T=!1){let R;const V=yield mr(D.appConfig,ne=>{if(!nt(ne))throw he.create("not-registered");const Me=ne.authToken;if(!T&&It(Me))return ne;if(1===Me.requestStatus)return R=ee(D,T),ne;{if(!navigator.onLine)throw he.create("app-offline");const qe=tn(ne);return R=me(D,qe),qe}});return R?yield R:V.authToken})).apply(this,arguments)}function ee(D,T){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,O.Z)(function*(D,T){let R=yield Ie(D.appConfig);for(;1===R.authToken.requestStatus;)yield Tt(100),R=yield Ie(D.appConfig);const V=R.authToken;return 0===V.requestStatus?W(D,T):V})).apply(this,arguments)}function Ie(D){return mr(D,T=>{if(!nt(T))throw he.create("not-registered");return function Qn(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function me(D,T){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,O.Z)(function*(D,T){try{const R=yield Ii(D,T),V=Object.assign(Object.assign({},T),{authToken:R});return yield wi(D.appConfig,V),R}catch(R){if(!De(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const V=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield wi(D.appConfig,V)}else yield Bn(D.appConfig);throw R}})).apply(this,arguments)}function nt(D){return void 0!==D&&2===D.registrationStatus}function It(D){return 2===D.requestStatus&&!function ct(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+36e5}(D)}function tn(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}function Uo(){return(Uo=(0,O.Z)(function*(D){const T=D,{installationEntry:R,registrationPromise:V}=yield fn(T.appConfig);return V?V.catch(console.error):W(T).catch(console.error),R.fid})).apply(this,arguments)}function co(){return(co=(0,O.Z)(function*(D,T=!1){const R=D;return yield Jn(R.appConfig),(yield W(R,T)).token})).apply(this,arguments)}function Jn(D){return Un.apply(this,arguments)}function Un(){return(Un=(0,O.Z)(function*(D){const{registrationPromise:T}=yield fn(D);T&&(yield T)})).apply(this,arguments)}function Da(D){return he.create("missing-app-config-values",{valueName:D})}const $r="installations",At=D=>{const T=D.getProvider("app").getImmediate(),R=function jn(D){if(!D||!D.options)throw Da("App Configuration");if(!D.name)throw Da("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!D.options[R])throw Da(R);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:R,platformLoggerProvider:(0,se._getProvider)(T,"platform-logger"),_delete:()=>Promise.resolve()}},Ut=D=>{const T=D.getProvider("app").getImmediate(),R=(0,se._getProvider)(T,$r).getImmediate();return{getId:()=>function Tl(D){return Uo.apply(this,arguments)}(R),getToken:z=>function fu(D){return co.apply(this,arguments)}(R,z)}};(function bn(){(0,se._registerComponent)(new ge.wA($r,At,"PUBLIC")),(0,se._registerComponent)(new ge.wA("installations-internal",Ut,"PRIVATE"))})(),(0,se.registerVersion)(Ee,$),(0,se.registerVersion)(Ee,$,"esm2017");const yr="@firebase/remote-config",Tn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class $p{constructor(T,R,V,z){this.client=T,this.storage=R,this.storageCache=V,this.logger=z}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-R,z=V<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${z}.`),z}fetch(T){var R=this;return(0,O.Z)(function*(){const[V,z]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(z&&R.isCachedDataFresh(T.cacheMaxAgeMillis,V))return z;T.eTag=z&&z.eTag;const ne=yield R.client.fetch(T),Me=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&Me.push(R.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(Me),ne})()}}function Th(D=navigator){return D.languages&&D.languages[0]||D.language}class Ai{constructor(T,R,V,z,ne,Me){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=V,this.projectId=z,this.apiKey=ne,this.appId=Me}fetch(T){var R=this;return(0,O.Z)(function*(){const[V,z]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Ve={sdk_version:R.sdkVersion,app_instance_id:V,app_instance_id_token:z,app_id:R.appId,language_code:Th()},gt={method:"POST",headers:qe,body:JSON.stringify(Ve)},Wt=fetch(Me,gt),Pn=new Promise((Rr,ns)=>{T.signal.addEventListener(()=>{const Do=new Error("The operation was aborted.");Do.name="AbortError",ns(Do)})});let Jr;try{yield Promise.race([Wt,Pn]),Jr=yield Wt}catch(Rr){let ns="fetch-client-network";throw"AbortError"===Rr.name&&(ns="fetch-timeout"),Tn.create(ns,{originalErrorMessage:Rr.message})}let En=Jr.status;const sa=Jr.headers.get("ETag")||void 0;let oa,Xs;if(200===Jr.status){let Rr;try{Rr=yield Jr.json()}catch(ns){throw Tn.create("fetch-client-parse",{originalErrorMessage:ns.message})}oa=Rr.entries,Xs=Rr.state}if("INSTANCE_STATE_UNSPECIFIED"===Xs?En=500:"NO_CHANGE"===Xs?En=304:("NO_TEMPLATE"===Xs||"EMPTY_CONFIG"===Xs)&&(oa={}),304!==En&&200!==En)throw Tn.create("fetch-status",{httpStatus:En});return{status:En,eTag:sa,config:oa}})()}}class jc{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,O.Z)(function*(){const V=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,V)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:V}){var z=this;return(0,O.Z)(function*(){yield function Ta(D,T){return new Promise((R,V)=>{const z=Math.max(T-Date.now(),0),ne=setTimeout(R,z);D.addEventListener(()=>{clearTimeout(ne),V(Tn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const ne=yield z.client.fetch(T);return yield z.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function Ah(D){if(!(D instanceof ie.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ne))throw ne;const Me={throttleEndTimeMillis:Date.now()+(0,ie.$s)(V),backoffCount:V+1};return yield z.storage.setThrottleMetadata(Me),z.attemptFetch(T,Me)}})()}}class Wp{constructor(T,R,V,z,ne){this.app=T,this._client=R,this._storageCache=V,this._storage=z,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Aa(D,T){const R=D.target.error||void 0;return Tn.create(T,{originalErrorMessage:R&&R.message})}const $o="app_namespace_store";class qp{constructor(T,R,V,z=function $c(){return new Promise((D,T)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=V=>{T(Aa(V,"storage-open"))},R.onsuccess=V=>{D(V.target.result)},R.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore($o,{keyPath:"compositeKey"})}}catch(R){T(Tn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=T,this.appName=R,this.namespace=V,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,O.Z)(function*(){const V=yield R.openDbPromise;return new Promise((z,ne)=>{const qe=V.transaction([$o],"readonly").objectStore($o),Ve=R.createCompositeKey(T);try{const gt=qe.get(Ve);gt.onerror=Wt=>{ne(Aa(Wt,"storage-get"))},gt.onsuccess=Wt=>{const Pn=Wt.target.result;z(Pn?Pn.value:void 0)}}catch(gt){ne(Tn.create("storage-get",{originalErrorMessage:gt&&gt.message}))}})})()}set(T,R){var V=this;return(0,O.Z)(function*(){const z=yield V.openDbPromise;return new Promise((ne,Me)=>{const Ve=z.transaction([$o],"readwrite").objectStore($o),gt=V.createCompositeKey(T);try{const Wt=Ve.put({compositeKey:gt,value:R});Wt.onerror=Pn=>{Me(Aa(Pn,"storage-set"))},Wt.onsuccess=()=>{ne()}}catch(Wt){Me(Tn.create("storage-set",{originalErrorMessage:Wt&&Wt.message}))}})})()}delete(T){var R=this;return(0,O.Z)(function*(){const V=yield R.openDbPromise;return new Promise((z,ne)=>{const qe=V.transaction([$o],"readwrite").objectStore($o),Ve=R.createCompositeKey(T);try{const gt=qe.delete(Ve);gt.onerror=Wt=>{ne(Aa(Wt,"storage-delete"))},gt.onsuccess=()=>{z()}}catch(gt){ne(Tn.create("storage-delete",{originalErrorMessage:gt&&gt.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Wc{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,O.Z)(function*(){const R=T.storage.getLastFetchStatus(),V=T.storage.getLastSuccessfulFetchTimestampMillis(),z=T.storage.getActiveConfig(),ne=yield R;ne&&(T.lastFetchStatus=ne);const Me=yield V;Me&&(T.lastSuccessfulFetchTimestampMillis=Me);const qe=yield z;qe&&(T.activeConfig=qe)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function qc(){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,O.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(D){return!1}})).apply(this,arguments)}!function zp(){(0,se._registerComponent)(new ge.wA("remote-config",function D(T,{instanceIdentifier:R}){const V=T.getProvider("app").getImmediate(),z=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Tn.create("registration-window");if(!(0,ie.hl)())throw Tn.create("indexed-db-unavailable");const{projectId:ne,apiKey:Me,appId:qe}=V.options;if(!ne)throw Tn.create("registration-project-id");if(!Me)throw Tn.create("registration-api-key");if(!qe)throw Tn.create("registration-app-id");const Ve=new qp(qe,V.name,R=R||"firebase"),gt=new Wc(Ve),Wt=new ae.Yd(yr);Wt.logLevel=ae.in.ERROR;const Pn=new Ai(z,se.SDK_VERSION,R,ne,Me,qe),Jr=new jc(Pn,Ve),En=new $p(Jr,Ve,gt,Wt),sa=new Wp(V,En,gt,Ve,Wt);return function sn(D){const T=(0,ie.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(sa),sa},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(yr,"0.3.4"),(0,se.registerVersion)(yr,"0.3.4","esm2017")}();const zc="/firebase-messaging-sw.js",go="/firebase-cloud-messaging-push-scope",pu="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",mo="google.c.a.c_id",Ma="google.c.a.c_l",js="google.c.a.ts",gu="google.c.a.e";var vr=(()=>{return(D=vr||(vr={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",vr;var D})();function Si(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Nl(D){const R=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(R),z=new Uint8Array(V.length);for(let ne=0;ne<V.length;++ne)z[ne]=V.charCodeAt(ne);return z}const qr="fcm_token_details_db",Zc="fcm_token_object_Store";function mu(D){return Yc.apply(this,arguments)}function Yc(){return Yc=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(qr))return null;let T=null;return(yield(0,ce.openDb)(qr,5,function(){var V=(0,O.Z)(function*(z){var ne;if(z.oldVersion<2||!z.objectStoreNames.contains(Zc))return;const Me=z.transaction.objectStore(Zc),qe=yield Me.index("fcmSenderId").get(D);if(yield Me.clear(),qe)if(2===z.oldVersion){const Ve=qe;if(!Ve.auth||!Ve.p256dh||!Ve.endpoint)return;T={token:Ve.fcmToken,createTime:null!==(ne=Ve.createTime)&&void 0!==ne?ne:Date.now(),subscriptionOptions:{auth:Ve.auth,p256dh:Ve.p256dh,endpoint:Ve.endpoint,swScope:Ve.swScope,vapidKey:"string"==typeof Ve.vapidKey?Ve.vapidKey:Si(Ve.vapidKey)}}}else if(3===z.oldVersion){const Ve=qe;T={token:Ve.fcmToken,createTime:Ve.createTime,subscriptionOptions:{auth:Si(Ve.auth),p256dh:Si(Ve.p256dh),endpoint:Ve.endpoint,swScope:Ve.swScope,vapidKey:Si(Ve.vapidKey)}}}else if(4===z.oldVersion){const Ve=qe;T={token:Ve.fcmToken,createTime:Ve.createTime,subscriptionOptions:{auth:Si(Ve.auth),p256dh:Si(Ve.p256dh),endpoint:Ve.endpoint,swScope:Ve.swScope,vapidKey:Si(Ve.vapidKey)}}}});return function(z){return V.apply(this,arguments)}}())).close(),yield(0,ce.deleteDb)(qr),yield(0,ce.deleteDb)("fcm_vapid_details_db"),yield(0,ce.deleteDb)("undefined"),Qc(T)?T:null}),Yc.apply(this,arguments)}function Qc(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Hs="firebase-messaging-store";let Jc=null;function on(){return Jc||(Jc=(0,ce.openDb)("firebase-messaging-database",1,D=>{0===D.oldVersion&&D.createObjectStore(Hs)})),Jc}function Mh(D){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,O.Z)(function*(D){const T=Yi(D),V=yield(yield on()).transaction(Hs).objectStore(Hs).get(T);if(V)return V;{const z=yield mu(D.appConfig.senderId);if(z)return yield $n(D,z),z}})).apply(this,arguments)}function $n(D,T){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,O.Z)(function*(D,T){const R=Yi(D),z=(yield on()).transaction(Hs,"readwrite");return yield z.objectStore(Hs).put(T,R),yield z.complete,T})).apply(this,arguments)}function ws(D){return qo.apply(this,arguments)}function qo(){return(qo=(0,O.Z)(function*(D){const T=Yi(D),V=(yield on()).transaction(Hs,"readwrite");yield V.objectStore(Hs).delete(T),yield V.complete})).apply(this,arguments)}function Yi({appConfig:D}){return D.appId}const Wn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Qi(D,T){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,O.Z)(function*(D,T){const R=yield Ra(D),V=Ko(T),z={method:"POST",headers:R,body:JSON.stringify(V)};let ne;try{ne=yield(yield fetch(er(D.appConfig),z)).json()}catch(Me){throw Wn.create("token-subscribe-failed",{errorInfo:Me})}if(ne.error)throw Wn.create("token-subscribe-failed",{errorInfo:ne.error.message});if(!ne.token)throw Wn.create("token-subscribe-no-token");return ne.token})).apply(this,arguments)}function xr(D,T){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,O.Z)(function*(D,T){const R=yield Ra(D),V=Ko(T.subscriptionOptions),z={method:"PATCH",headers:R,body:JSON.stringify(V)};let ne;try{ne=yield(yield fetch(`${er(D.appConfig)}/${T.token}`,z)).json()}catch(Me){throw Wn.create("token-update-failed",{errorInfo:Me})}if(ne.error)throw Wn.create("token-update-failed",{errorInfo:ne.error.message});if(!ne.token)throw Wn.create("token-update-no-token");return ne.token})).apply(this,arguments)}function zo(D,T){return ft.apply(this,arguments)}function ft(){return(ft=(0,O.Z)(function*(D,T){const V={method:"DELETE",headers:yield Ra(D)};try{const ne=yield(yield fetch(`${er(D.appConfig)}/${T}`,V)).json();if(ne.error)throw Wn.create("token-unsubscribe-failed",{errorInfo:ne.error.message})}catch(z){throw Wn.create("token-unsubscribe-failed",{errorInfo:z})}})).apply(this,arguments)}function er({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Ra(D){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,O.Z)(function*({appConfig:D,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Ko({p256dh:D,auth:T,endpoint:R,vapidKey:V}){const z={web:{endpoint:R,auth:T,p256dh:D}};return V!==pu&&(z.web.applicationPubKey=V),z}const Zo=6048e5;function Pl(D){return _u.apply(this,arguments)}function _u(){return(_u=(0,O.Z)(function*(D){const T=yield zr(D.swRegistration,D.vapidKey),R={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:Si(T.getKey("auth")),p256dh:Si(T.getKey("p256dh"))},V=yield Mh(D.firebaseDependencies);if(V){if(vu(V.subscriptionOptions,R))return Date.now()>=V.createTime+Zo?yu(D,{token:V.token,createTime:Date.now(),subscriptionOptions:R}):V.token;try{yield zo(D.firebaseDependencies,V.token)}catch(z){console.warn(z)}return _o(D.firebaseDependencies,R)}return _o(D.firebaseDependencies,R)})).apply(this,arguments)}function xe(D){return St.apply(this,arguments)}function St(){return(St=(0,O.Z)(function*(D){const T=yield Mh(D.firebaseDependencies);T&&(yield zo(D.firebaseDependencies,T.token),yield ws(D.firebaseDependencies));const R=yield D.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function yu(D,T){return an.apply(this,arguments)}function an(){return(an=(0,O.Z)(function*(D,T){try{const R=yield xr(D.firebaseDependencies,T),V=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield $n(D.firebaseDependencies,V),R}catch(R){throw yield xe(D),R}})).apply(this,arguments)}function _o(D,T){return $s.apply(this,arguments)}function $s(){return($s=(0,O.Z)(function*(D,T){const V={token:yield Qi(D,T),createTime:Date.now(),subscriptionOptions:T};return yield $n(D,V),V.token})).apply(this,arguments)}function zr(D,T){return Is.apply(this,arguments)}function Is(){return(Is=(0,O.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Nl(T)})})).apply(this,arguments)}function vu(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}function Eu(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function wu(D,T){if(!T.notification)return;D.notification={};const R=T.notification.title;R&&(D.notification.title=R);const V=T.notification.body;V&&(D.notification.body=V);const z=T.notification.image;z&&(D.notification.image=z)}(T,D),function Yo(D,T){!T.data||(D.data=T.data)}(T,D),function Oa(D,T){if(!T.fcmOptions)return;D.fcmOptions={};const R=T.fcmOptions.link;R&&(D.fcmOptions.link=R);const V=T.fcmOptions.analytics_label;V&&(D.fcmOptions.analyticsLabel=V)}(T,D),T}function qn(D){return"object"==typeof D&&!!D&&mo in D}function xi(D,T){const R=[];for(let V=0;V<D.length;V++)R.push(D.charAt(V)),V<T.length&&R.push(T.charAt(V));return R.join("")}function Cs(D){return Wn.create("missing-app-config-values",{valueName:D})}xi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),xi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Mi{constructor(T,R,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function Iu(D){if(!D||!D.options)throw Cs("App Configuration Object");if(!D.name)throw Cs("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=D;for(const V of T)if(!R[V])throw Cs(V);return{appName:D.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:z,installations:R,analyticsProvider:V}}_delete(){return Promise.resolve()}}function Xc(D){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(zc,{scope:go}),D.swRegistration.update().catch(()=>{})}catch(T){throw Wn.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function Cu(D,T){return ka.apply(this,arguments)}function ka(){return(ka=(0,O.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield Xc(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Wn.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function Jo(D,T){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,O.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=pu)})).apply(this,arguments)}function Va(){return(Va=(0,O.Z)(function*(D,T){if(!navigator)throw Wn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Wn.create("permission-blocked");return yield Jo(D,null==T?void 0:T.vapidKey),yield Cu(D,null==T?void 0:T.serviceWorkerRegistration),Pl(D)})).apply(this,arguments)}function Ol(D,T,R){return kl.apply(this,arguments)}function kl(){return(kl=(0,O.Z)(function*(D,T,R){const V=Xo(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:R[mo],message_name:R[Ma],message_time:R[js],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Xo(D){switch(D){case vr.NOTIFICATION_CLICKED:return"notification_open";case vr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ba(){return(Ba=(0,O.Z)(function*(D,T){const R=T.data;if(!R.isFirebaseMessaging)return;D.onMessageHandler&&R.messageType===vr.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Eu(R)):D.onMessageHandler.next(Eu(R)));const V=R.data;qn(V)&&"1"===V[gu]&&(yield Ol(D,R.messageType,V))})).apply(this,arguments)}const Fl="@firebase/messaging",Du=D=>{const T=new Mi(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function ed(D,T){return Ba.apply(this,arguments)}(T,R)),T},td=D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:V=>function La(D,T){return Va.apply(this,arguments)}(T,V)}};function tr(){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,O.Z)(function*(){try{yield(0,ie.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Kp(){(0,se._registerComponent)(new ge.wA("messaging",Du,"PUBLIC")),(0,se._registerComponent)(new ge.wA("messaging-internal",td,"PRIVATE")),(0,se.registerVersion)(Fl,"0.9.9"),(0,se.registerVersion)(Fl,"0.9.9","esm2017")}();const Ws="analytics",bu="firebase_id",rd="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ds="https://www.googletagmanager.com/gtag/js",vn=new ae.Yd("@firebase/analytics");function kh(D){return Promise.all(D.map(T=>T.catch(R=>R)))}function Zp(D,T){const R=document.createElement("script");R.src=`${Ds}?l=${D}&id=${T}`,R.async=!0,document.head.appendChild(R)}function Au(D,T,R,V,z,ne){return id.apply(this,arguments)}function id(){return(id=(0,O.Z)(function*(D,T,R,V,z,ne){const Me=V[z];try{if(Me)yield T[Me];else{const Ve=(yield kh(R)).find(gt=>gt.measurementId===z);Ve&&(yield T[Ve.appId])}}catch(qe){vn.error(qe)}D("config",z,ne)})).apply(this,arguments)}function Ga(D,T,R,V,z){return sd.apply(this,arguments)}function sd(){return(sd=(0,O.Z)(function*(D,T,R,V,z){try{let ne=[];if(z&&z.send_to){let Me=z.send_to;Array.isArray(Me)||(Me=[Me]);const qe=yield kh(R);for(const Ve of Me){const gt=qe.find(Pn=>Pn.measurementId===Ve),Wt=gt&&T[gt.appId];if(!Wt){ne=[];break}ne.push(Wt)}}0===ne.length&&(ne=Object.values(T)),yield Promise.all(ne),D("event",V,z||{})}catch(ne){vn.error(ne)}})).apply(this,arguments)}function dr(){const D=window.document.getElementsByTagName("script");for(const T of Object.values(D))if(T.src&&T.src.includes(Ds))return T;return null}const An=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ul=new class Ni{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function dn(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function jl(D){return yo.apply(this,arguments)}function yo(){return(yo=(0,O.Z)(function*(D){var T;const{appId:R,apiKey:V}=D,z={method:"GET",headers:dn(V)},ne=rd.replace("{app-id}",R),Me=yield fetch(ne,z);if(200!==Me.status&&304!==Me.status){let qe="";try{const Ve=yield Me.json();(null===(T=Ve.error)||void 0===T?void 0:T.message)&&(qe=Ve.error.message)}catch(Ve){}throw An.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:qe})}return Me.json()})).apply(this,arguments)}function Ri(D){return wn.apply(this,arguments)}function wn(){return(wn=(0,O.Z)(function*(D,T=Ul,R){const{appId:V,apiKey:z,measurementId:ne}=D.options;if(!V)throw An.create("no-app-id");if(!z){if(ne)return{measurementId:ne,appId:V};throw An.create("no-api-key")}const Me=T.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new xu;return setTimeout((0,O.Z)(function*(){qe.abort()}),void 0!==R?R:6e4),Kr({appId:V,apiKey:z,measurementId:ne},Me,qe,T)})).apply(this,arguments)}function Kr(D,T,R){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,O.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:R},V,z=Ul){const{appId:ne,measurementId:Me}=D;try{yield Wa(V,T)}catch(qe){if(Me)return vn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${qe.message}]`),{appId:ne,measurementId:Me};throw qe}try{const qe=yield jl(D);return z.deleteThrottleMetadata(ne),qe}catch(qe){if(!vo(qe)){if(z.deleteThrottleMetadata(ne),Me)return vn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${qe.message}]`),{appId:ne,measurementId:Me};throw qe}const Ve=503===Number(qe.customData.httpStatus)?(0,ie.$s)(R,z.intervalMillis,30):(0,ie.$s)(R,z.intervalMillis),gt={throttleEndTimeMillis:Date.now()+Ve,backoffCount:R+1};return z.setThrottleMetadata(ne,gt),vn.debug(`Calling attemptFetch again in ${Ve} millis`),Kr(D,gt,V,z)}})).apply(this,arguments)}function Wa(D,T){return new Promise((R,V)=>{const z=Math.max(T-Date.now(),0),ne=setTimeout(R,z);D.addEventListener(()=>{clearTimeout(ne),V(An.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function vo(D){if(!(D instanceof ie.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}class xu{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function qa(){return qs.apply(this,arguments)}function qs(){return(qs=(0,O.Z)(function*(){if(!(0,ie.hl)())return vn.warn(An.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(D){return vn.warn(An.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function ea(){return(ea=(0,O.Z)(function*(D,T,R,V,z,ne,Me){var qe;const Ve=Ri(D);Ve.then(En=>{R[En.measurementId]=En.appId,D.options.measurementId&&En.measurementId!==D.options.measurementId&&vn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${En.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(En=>vn.error(En)),T.push(Ve);const gt=qa().then(En=>{if(En)return V.getId()}),[Wt,Pn]=yield Promise.all([Ve,gt]);dr()||Zp(ne,Wt.measurementId),z("js",new Date);const Jr=null!==(qe=null==Me?void 0:Me.config)&&void 0!==qe?qe:{};return Jr.origin="firebase",Jr.update=!0,null!=Pn&&(Jr[bu]=Pn),z("config",Wt.measurementId,Jr),Wt.measurementId})).apply(this,arguments)}class un{constructor(T){this.app=T}_delete(){return delete Ts[this.app.options.appId],Promise.resolve()}}let Ts={},Nu=[];const Pi={};let P,ln,de="dataLayer",Ru=!1;function Eo(D,T,R){!function zs(){const D=[];if((0,ie.ru)()&&D.push("This is a browser extension environment."),(0,ie.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map((V,z)=>`(${z+1}) ${V}`).join(" "),R=An.create("invalid-analytics-context",{errorInfo:T});vn.warn(R.message)}}();const V=D.options.appId;if(!V)throw An.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw An.create("no-api-key");vn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ts[V])throw An.create("already-exists",{id:V});if(!Ru){!function Ha(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(de);const{wrappedGtag:ne,gtagCore:Me}=function Bl(D,T,R,V,z){let ne=function(...Me){window[V].push(arguments)};return window[z]&&"function"==typeof window[z]&&(ne=window[z]),window[z]=function Yp(D,T,R,V){function ne(){return(ne=(0,O.Z)(function*(Me,qe,Ve){try{"event"===Me?yield Ga(D,T,R,qe,Ve):"config"===Me?yield Au(D,T,R,V,qe,Ve):D("set",qe)}catch(gt){vn.error(gt)}})).apply(this,arguments)}return function z(Me,qe,Ve){return ne.apply(this,arguments)}}(ne,D,T,R),{gtagCore:ne,wrappedGtag:window[z]}}(Ts,Nu,Pi,de,"gtag");ln=ne,P=Me,Ru=!0}return Ts[V]=function Mu(D,T,R,V,z,ne,Me){return ea.apply(this,arguments)}(D,Nu,Pi,T,P,de,R),new un(D)}function za(){return(za=(0,O.Z)(function*(D,T,R,V,z){if(z&&z.global)D("event",R,V);else{const ne=yield T;D("event",R,Object.assign(Object.assign({},V),{send_to:ne}))}})).apply(this,arguments)}function xn(){return na.apply(this,arguments)}function na(){return(na=(0,O.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(D){return!1}})).apply(this,arguments)}const Io="@firebase/analytics";!function Yt(){(0,se._registerComponent)(new ge.wA(Ws,(T,{options:R})=>Eo(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,se._registerComponent)(new ge.wA("analytics-internal",function D(T){try{const R=T.getProvider(Ws).getImmediate();return{logEvent:(V,z,ne)=>function Ka(D,T,R,V){D=(0,ie.m9)(D),function Sn(D,T,R,V,z){return za.apply(this,arguments)}(ln,Ts[D.app.options.appId],T,R,V).catch(z=>vn.error(z))}(R,V,z,ne)}}catch(R){throw An.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,se.registerVersion)(Io,"0.7.5"),(0,se.registerVersion)(Io,"0.7.5","esm2017")}();var Ks=L(4408),Pu=L(7565);const Yr=new class Wl extends Pu.v{}(class es extends Ks.o{constructor(T,R){super(T,R),this.scheduler=T,this.work=R}schedule(T,R=0){return R>0?super.schedule(T,R):(this.delay=R,this.state=T,this.scheduler.flush(this),this)}execute(T,R){return R>0||this.closed?super.execute(T,R):this._execute(T,R)}requestAsyncId(T,R,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(T,R,V):T.flush(this)}});var ql=L(4986),Za=L(576),ra=L(4482),ud=L(5403),Fh=L(4671),ld=L(9468),zl=L(5363);const Co=new _.GfV("7.2.1"),nr="__angularfire_symbol__analyticsIsSupportedValue",xs="__angularfire_symbol__analyticsIsSupported",Zs="__angularfire_symbol__remoteConfigIsSupportedValue",cd="__angularfire_symbol__remoteConfigIsSupported",Ys="__angularfire_symbol__messagingIsSupportedValue",ia="__angularfire_symbol__messagingIsSupported";function Ja(D,T,R){if(T){if(1===T.length)return T[0];const ne=T.filter(Me=>Me.app===R);if(1===ne.length)return ne[0]}return R.container.getProvider(D).getImmediate({optional:!0})}globalThis[xs]||(globalThis[xs]=xn().then(D=>globalThis[nr]=D).catch(()=>globalThis[nr]=!1)),globalThis[ia]||(globalThis[ia]=tr().then(D=>globalThis[Ys]=D).catch(()=>globalThis[Ys]=!1)),globalThis[cd]||(globalThis[cd]=qc().then(D=>globalThis[Zs]=D).catch(()=>globalThis[Zs]=!1));const Ou=(D,T)=>{const R=T?[T]:(0,J.C6)(),V=[];return R.forEach(z=>{z.container.getProvider(D).instances.forEach(Me=>{V.includes(Me)||V.push(Me)})}),V};function ki(){}class Kl{constructor(T,R=Yr){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,V){const z=this.zone;return this.delegate.schedule(function(Me){z.runGuarded(()=>{T.apply(this,[Me])})},R,V)}}class Qs{constructor(T){this.zone=T,this.task=null}call(T,R){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ki,{},ki,ki)),R.pipe(function Ya(D,T,R){const V=(0,Za.m)(D)||T||R?{next:D,error:T,complete:R}:D;return V?(0,ra.e)((z,ne)=>{var Me;null===(Me=V.subscribe)||void 0===Me||Me.call(V);let qe=!0;z.subscribe(new ud.Q(ne,Ve=>{var gt;null===(gt=V.next)||void 0===gt||gt.call(V,Ve),ne.next(Ve)},()=>{var Ve;qe=!1,null===(Ve=V.complete)||void 0===Ve||Ve.call(V),ne.complete()},Ve=>{var gt;qe=!1,null===(gt=V.error)||void 0===gt||gt.call(V,Ve),ne.error(Ve)},()=>{var Ve,gt;qe&&(null===(Ve=V.unsubscribe)||void 0===Ve||Ve.call(V)),null===(gt=V.finalize)||void 0===gt||gt.call(V)}))}):Fh.y}({next:V,complete:V,error:V})).subscribe(T).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ku=(()=>{class D{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Kl(Zone.current)),this.insideAngular=R.run(()=>new Kl(Zone.current,ql.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(R){return new(R||D)(_.LFG(_.R0b))},D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Nr(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Js(D){return Nr(),function Qr(D){return function(R){return(R=R.lift(new Qs(D.ngZone))).pipe((0,ld.R)(D.outsideAngular),(0,zl.Q)(D.insideAngular))}}(Nr())(D)}},2090:(at,Se,L)=>{"use strict";L.d(Se,{BH:()=>ze,LL:()=>le,ZR:()=>ke,gQ:()=>Ne,zI:()=>oe,hu:()=>J,g5:()=>O,US:()=>ge,tV:()=>Ee,h$:()=>ae,$s:()=>ut,r3:()=>Hr,Sg:()=>Oe,ne:()=>lr,p$:()=>$,vZ:()=>Zt,ZB:()=>G,gK:()=>mr,pd:()=>ys,m9:()=>Ii,z$:()=>Le,GJ:()=>en,jU:()=>re,ru:()=>he,d:()=>_e,xb:()=>Dn,w1:()=>$e,hl:()=>mt,uI:()=>He,UG:()=>K,Yr:()=>ot,b$:()=>De,G6:()=>Qe,Mn:()=>Ae,w9:()=>ur,cI:()=>gr,UI:()=>Ei,xO:()=>uo,zd:()=>Gr,DV:()=>vi,ug:()=>Rt,dS:()=>Bo,Pz:()=>rt,Dv:()=>Bs,Wj:()=>fn,lb:()=>ii,eu:()=>Q});const J=function(B,H){if(!B)throw O(H)},O=function(B){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+B)},se=function(B){const H=[];let W=0;for(let ve=0;ve<B.length;ve++){let ee=B.charCodeAt(ve);ee<128?H[W++]=ee:ee<2048?(H[W++]=ee>>6|192,H[W++]=63&ee|128):55296==(64512&ee)&&ve+1<B.length&&56320==(64512&B.charCodeAt(ve+1))?(ee=65536+((1023&ee)<<10)+(1023&B.charCodeAt(++ve)),H[W++]=ee>>18|240,H[W++]=ee>>12&63|128,H[W++]=ee>>6&63|128,H[W++]=63&ee|128):(H[W++]=ee>>12|224,H[W++]=ee>>6&63|128,H[W++]=63&ee|128)}return H},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,H){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let ee=0;ee<B.length;ee+=3){const Ge=B[ee],Ie=ee+1<B.length,me=Ie?B[ee+1]:0,Ue=ee+2<B.length,nt=Ue?B[ee+2]:0;let tn=(15&me)<<2|nt>>6,Qn=63&nt;Ue||(Qn=64,Ie||(tn=64)),ve.push(W[Ge>>2],W[(3&Ge)<<4|me>>4],W[tn],W[Qn])}return ve.join("")},encodeString(B,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(B):this.encodeByteArray(se(B),H)},decodeString(B,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(B):function(B){const H=[];let W=0,ve=0;for(;W<B.length;){const ee=B[W++];if(ee<128)H[ve++]=String.fromCharCode(ee);else if(ee>191&&ee<224){const Ge=B[W++];H[ve++]=String.fromCharCode((31&ee)<<6|63&Ge)}else if(ee>239&&ee<365){const Ue=((7&ee)<<18|(63&B[W++])<<12|(63&B[W++])<<6|63&B[W++])-65536;H[ve++]=String.fromCharCode(55296+(Ue>>10)),H[ve++]=String.fromCharCode(56320+(1023&Ue))}else{const Ge=B[W++],Ie=B[W++];H[ve++]=String.fromCharCode((15&ee)<<12|(63&Ge)<<6|63&Ie)}}return H.join("")}(this.decodeStringToByteArray(B,H))},decodeStringToByteArray(B,H){this.init_();const W=H?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let ee=0;ee<B.length;){const Ge=W[B.charAt(ee++)],me=ee<B.length?W[B.charAt(ee)]:0;++ee;const nt=ee<B.length?W[B.charAt(ee)]:64;++ee;const ct=ee<B.length?W[B.charAt(ee)]:64;if(++ee,null==Ge||null==me||null==nt||null==ct)throw Error();ve.push(Ge<<2|me>>4),64!==nt&&(ve.push(me<<4&240|nt>>2),64!==ct&&ve.push(nt<<6&192|ct))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},ae=function(B){const H=se(B);return ge.encodeByteArray(H,!0)},ce=function(B){return ae(B).replace(/\./g,"")},Ee=function(B){try{return ge.decodeString(B,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function $(B){return G(void 0,B)}function G(B,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return H}for(const W in H)!H.hasOwnProperty(W)||!X(W)||(B[W]=G(B[W],H[W]));return B}function X(B){return"__proto__"!==B}class ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,W)=>{this.resolve=H,this.reject=W})}wrapCallback(H){return(W,ve)=>{W?this.reject(W):this.resolve(ve),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(W):H(W,ve))}}}function Oe(B,H){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=H||"demo-project",ee=B.iat||0,Ge=B.sub||B.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ie=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:ee,exp:ee+3600,auth_time:ee,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},B);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(Ie)),""].join(".")}function Le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function He(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function K(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(B){return!1}}function re(){return"object"==typeof self&&self.self===self}function he(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){return Le().indexOf("Electron/")>=0}function $e(){const B=Le();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Ae(){return Le().indexOf("MSAppHost/")>=0}function ot(){return!1}function Qe(){return!K()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mt(){return"object"==typeof indexedDB}function Q(){return new Promise((B,H)=>{try{let W=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",ee=self.indexedDB.open(ve);ee.onsuccess=()=>{ee.result.close(),W||self.indexedDB.deleteDatabase(ve),B(!0)},ee.onupgradeneeded=()=>{W=!1},ee.onerror=()=>{var Ge;H((null===(Ge=ee.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(W){H(W)}})}function oe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ke extends Error{constructor(H,W,ve){super(W),this.code=H,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,le.prototype.create)}}class le{constructor(H,W,ve){this.service=H,this.serviceName=W,this.errors=ve}create(H,...W){const ve=W[0]||{},ee=`${this.service}/${H}`,Ge=this.errors[H],Ie=Ge?function Tt(B,H){return B.replace(Ft,(W,ve)=>{const ee=H[ve];return null!=ee?String(ee):`<${ve}?>`})}(Ge,ve):"Error";return new ke(ee,`${this.serviceName}: ${Ie} (${ee}).`,ve)}}const Ft=/\{\$([^}]+)}/g;function gr(B){return JSON.parse(B)}function rt(B){return JSON.stringify(B)}const ht=function(B){let H={},W={},ve={},ee="";try{const Ge=B.split(".");H=gr(Ee(Ge[0])||""),W=gr(Ee(Ge[1])||""),ee=Ge[2],ve=W.d||{},delete W.d}catch(Ge){}return{header:H,claims:W,data:ve,signature:ee}},ur=function(B){const W=ht(B).claims;return!!W&&"object"==typeof W&&W.hasOwnProperty("iat")},en=function(B){const H=ht(B).claims;return"object"==typeof H&&!0===H.admin};function Hr(B,H){return Object.prototype.hasOwnProperty.call(B,H)}function vi(B,H){if(Object.prototype.hasOwnProperty.call(B,H))return B[H]}function Dn(B){for(const H in B)if(Object.prototype.hasOwnProperty.call(B,H))return!1;return!0}function Ei(B,H,W){const ve={};for(const ee in B)Object.prototype.hasOwnProperty.call(B,ee)&&(ve[ee]=H.call(W,B[ee],ee,B));return ve}function Zt(B,H){if(B===H)return!0;const W=Object.keys(B),ve=Object.keys(H);for(const ee of W){if(!ve.includes(ee))return!1;const Ge=B[ee],Ie=H[ee];if(Bt(Ge)&&Bt(Ie)){if(!Zt(Ge,Ie))return!1}else if(Ge!==Ie)return!1}for(const ee of ve)if(!W.includes(ee))return!1;return!0}function Bt(B){return null!==B&&"object"==typeof B}function uo(B){const H=[];for(const[W,ve]of Object.entries(B))Array.isArray(ve)?ve.forEach(ee=>{H.push(encodeURIComponent(W)+"="+encodeURIComponent(ee))}):H.push(encodeURIComponent(W)+"="+encodeURIComponent(ve));return H.length?"&"+H.join("&"):""}function Gr(B){const H={};return B.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[ee,Ge]=ve.split("=");H[decodeURIComponent(ee)]=decodeURIComponent(Ge)}}),H}function ys(B){const H=B.indexOf("?");if(!H)return"";const W=B.indexOf("#",H);return B.substring(H,W>0?W:void 0)}class Ne{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,W){W||(W=0);const ve=this.W_;if("string"==typeof H)for(let ct=0;ct<16;ct++)ve[ct]=H.charCodeAt(W)<<24|H.charCodeAt(W+1)<<16|H.charCodeAt(W+2)<<8|H.charCodeAt(W+3),W+=4;else for(let ct=0;ct<16;ct++)ve[ct]=H[W]<<24|H[W+1]<<16|H[W+2]<<8|H[W+3],W+=4;for(let ct=16;ct<80;ct++){const tn=ve[ct-3]^ve[ct-8]^ve[ct-14]^ve[ct-16];ve[ct]=4294967295&(tn<<1|tn>>>31)}let nt,It,ee=this.chain_[0],Ge=this.chain_[1],Ie=this.chain_[2],me=this.chain_[3],Ue=this.chain_[4];for(let ct=0;ct<80;ct++){ct<40?ct<20?(nt=me^Ge&(Ie^me),It=1518500249):(nt=Ge^Ie^me,It=1859775393):ct<60?(nt=Ge&Ie|me&(Ge|Ie),It=2400959708):(nt=Ge^Ie^me,It=3395469782);const tn=(ee<<5|ee>>>27)+nt+Ue+It+ve[ct]&4294967295;Ue=me,me=Ie,Ie=4294967295&(Ge<<30|Ge>>>2),Ge=ee,ee=tn}this.chain_[0]=this.chain_[0]+ee&4294967295,this.chain_[1]=this.chain_[1]+Ge&4294967295,this.chain_[2]=this.chain_[2]+Ie&4294967295,this.chain_[3]=this.chain_[3]+me&4294967295,this.chain_[4]=this.chain_[4]+Ue&4294967295}update(H,W){if(null==H)return;void 0===W&&(W=H.length);const ve=W-this.blockSize;let ee=0;const Ge=this.buf_;let Ie=this.inbuf_;for(;ee<W;){if(0===Ie)for(;ee<=ve;)this.compress_(H,ee),ee+=this.blockSize;if("string"==typeof H){for(;ee<W;)if(Ge[Ie]=H.charCodeAt(ee),++Ie,++ee,Ie===this.blockSize){this.compress_(Ge),Ie=0;break}}else for(;ee<W;)if(Ge[Ie]=H[ee],++Ie,++ee,Ie===this.blockSize){this.compress_(Ge),Ie=0;break}}this.inbuf_=Ie,this.total_+=W}digest(){const H=[];let W=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ee=this.blockSize-1;ee>=56;ee--)this.buf_[ee]=255&W,W/=256;this.compress_(this.buf_);let ve=0;for(let ee=0;ee<5;ee++)for(let Ge=24;Ge>=0;Ge-=8)H[ve]=this.chain_[ee]>>Ge&255,++ve;return H}}function lr(B,H){const W=new it(B,H);return W.subscribe.bind(W)}class it{constructor(H,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{H(this)}).catch(ve=>{this.error(ve)})}next(H){this.forEachObserver(W=>{W.next(H)})}error(H){this.forEachObserver(W=>{W.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,W,ve){let ee;if(void 0===H&&void 0===W&&void 0===ve)throw new Error("Missing Observer.");ee=function kt(B,H){if("object"!=typeof B||null===B)return!1;for(const W of H)if(W in B&&"function"==typeof B[W])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:W,complete:ve},void 0===ee.next&&(ee.next=Bn),void 0===ee.error&&(ee.error=Bn),void 0===ee.complete&&(ee.complete=Bn);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ee.error(this.finalError):ee.complete()}catch(Ie){}}),this.observers.push(ee),Ge}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,H)}sendOne(H,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{W(this.observers[H])}catch(ve){"undefined"!=typeof console&&console.error&&console.error(ve)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bn(){}const Bs=function(B,H,W,ve){let ee;if(ve<H?ee="at least "+H:ve>W&&(ee=0===W?"none":"no more than "+W),ee)throw new Error(B+" failed: Was called with "+ve+(1===ve?" argument.":" arguments.")+" Expects "+ee+".")};function mr(B,H){return`${B} failed: ${H} argument `}function fn(B,H,W,ve){if((!ve||W)&&"function"!=typeof W)throw new Error(mr(B,H)+"must be a valid function.")}function ii(B,H,W,ve){if((!ve||W)&&("object"!=typeof W||null===W))throw new Error(mr(B,H)+"must be a valid context object.")}const Bo=function(B){const H=[];let W=0;for(let ve=0;ve<B.length;ve++){let ee=B.charCodeAt(ve);if(ee>=55296&&ee<=56319){const Ge=ee-55296;ve++,J(ve<B.length,"Surrogate pair missing trail surrogate."),ee=65536+(Ge<<10)+(B.charCodeAt(ve)-56320)}ee<128?H[W++]=ee:ee<2048?(H[W++]=ee>>6|192,H[W++]=63&ee|128):ee<65536?(H[W++]=ee>>12|224,H[W++]=ee>>6&63|128,H[W++]=63&ee|128):(H[W++]=ee>>18|240,H[W++]=ee>>12&63|128,H[W++]=ee>>6&63|128,H[W++]=63&ee|128)}return H},Rt=function(B){let H=0;for(let W=0;W<B.length;W++){const ve=B.charCodeAt(W);ve<128?H++:ve<2048?H+=2:ve>=55296&&ve<=56319?(H+=4,W++):H+=3}return H};function ut(B,H=1e3,W=2){const ve=H*Math.pow(W,B),ee=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+ee)}function Ii(B){return B&&B._delegate?B._delegate:B}},5057:(at,Se,L)=>{"use strict";var _=L(5e3);let J=null;function O(){return J}const ae=new _.OlP("DocumentToken");var oe=(()=>((oe=oe||{})[oe.Zero=0]="Zero",oe[oe.One=1]="One",oe[oe.Two=2]="Two",oe[oe.Few=3]="Few",oe[oe.Many=4]="Many",oe[oe.Other=5]="Other",oe))();const ys=_.kL8;class Lt{}let Tn=(()=>{class n extends Lt{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(ys(r||this.locale)(t)){case oe.Zero:return"zero";case oe.One:return"one";case oe.Two:return"two";case oe.Few:return"few";case oe.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(_.soG))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class zi{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,c)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new zi(o.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,c),Ho(g,o)}});for(let o=0,u=r.length;o<u;o++){const g=r.get(o).context;g.index=o,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Ho(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))},n.\u0275dir=_.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Ho(n,e){n.context.$implicit=e.item}let gu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[{provide:Lt,useClass:Tn}]}),n})();function Na(n){return"server"===n}class Wo extends class Mh extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ie(n){J||(J=n)}(new Wo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Nn(){return $n=$n||document.querySelector("base"),$n?$n.getAttribute("href"):null}();return null==t?null:function qo(n){ws=ws||document.createElement("a"),ws.setAttribute("href",n);const e=ws.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){$n=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function jo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let ws,$n=null;const Yi=new _.OlP("TRANSITION_ID"),Wn=[{provide:_.ip1,useFactory:function Sr(n,e,t){return()=>{t.get(_.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Yi,ae,_.zs3],multi:!0}];class Qi{static init(){(0,_.VLi)(new Qi)}addToWindow(e){_.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},_.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(r=>{const o=_.dqk.getAllAngularTestabilities();let u=o.length,c=!1;const g=function(E){c=c||E,u--,0==u&&r(c)};o.forEach(function(E){E.whenStable(g)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Rl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const xr=new _.OlP("EventManagerPlugins");let Gs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const c=o[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(xr),_.LFG(_.R0b))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class zo{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let ft=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),er=(()=>{class n extends ft{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,o.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ra),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ra))}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ae))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function Ra(n){O().remove(n)}const Pa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ko=/%COMP%/g;function an(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?an(n,o,t):(o=o.replace(Ko,n),t.push(o))}return t}function _o(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let zr=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Is(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case _.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new wu(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case _.ifc.ShadowDom:return new Yo(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=an(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Gs),_.LFG(er),_.LFG(_.AFp))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class Is{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Pa[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Pa[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Pa[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(_.JOm.DashCase|_.JOm.Important)?e.style.setProperty(t,r,o&_.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,_o(r)):this.eventManager.addEventListener(e,t,_o(r))}}class wu extends Is{constructor(e,t,r,o){super(e),this.component=r;const u=an(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function St(n){return"_ngcontent-%COMP%".replace(Ko,n)}(o+"-"+r.id),this.hostAttr=function yu(n){return"_nghost-%COMP%".replace(Ko,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Yo extends Is{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=an(o.id,o.styles,[]);for(let c=0;c<u.length;c++){const g=document.createElement("style");g.textContent=u[c],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Oa=(()=>{class n extends zo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ae))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const qn=["alt","control","meta","shift"],Iu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Cs={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Mi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Xc=(()=>{class n extends zo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let c="";if(qn.forEach(E=>{const I=r.indexOf(E);I>-1&&(r.splice(I,1),c+=E+".")}),c+=u,0!=r.length||0===u.length)return null;const g={};return g.domEventName=o,g.fullKey=c,g}static getEventFullKey(t){let r="",o=function Qo(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Cs.hasOwnProperty(e)&&(e=Cs[e]))}return Iu[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),qn.forEach(u=>{u!=o&&Mi[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ae))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const La=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:"browser"},{provide:_.g9A,useValue:function Cu(){Wo.makeCurrent(),Qi.init()},multi:!0},{provide:ae,useFactory:function Jo(){return(0,_.RDi)(document),document},deps:[]}]),Va=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function ka(){return new _.qLn},deps:[]},{provide:xr,useClass:Oa,multi:!0,deps:[ae,_.R0b,_.Lbi]},{provide:xr,useClass:Xc,multi:!0,deps:[ae]},{provide:zr,useClass:zr,deps:[Gs,er,_.AFp]},{provide:_.FYo,useExisting:zr},{provide:ft,useExisting:er},{provide:er,useClass:er,deps:[ae]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b]},{provide:Gs,useClass:Gs,deps:[xr,_.R0b]},{provide:class on{},useClass:Rl,deps:[]}];let Ol=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:_.AFp,useValue:t.appId},{provide:Yi,useExisting:_.AFp},Wn]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(n,12))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:Va,imports:[gu,_.hGG]}),n})();"undefined"!=typeof window&&window;var dr=L(2011),Su=L(4986),An=L(8306),$a=L(7669),bs=L(8996);function Ni(...n){const e=(0,$a.yG)(n);return(0,bs.D)(n,e)}var Ul=L(6451),dn=L(4004),jl=L(3099),yo=L(8421),Ri=L(4482),wn=L(5403);function Kr(n,e){return(0,Ri.e)((t,r)=>{let o=null,u=0,c=!1;const g=()=>c&&!o&&r.complete();t.subscribe(new wn.Q(r,E=>{null==o||o.unsubscribe();let I=0;const S=u++;(0,yo.Xf)(n(E,S)).subscribe(o=new wn.Q(r,M=>r.next(e?e(E,M,S,I++):M),()=>{o=null,g()}))},()=>{c=!0,g()}))})}function Hl(n,e,t,r,o){return(u,c)=>{let g=t,E=e,I=0;u.subscribe(new wn.Q(c,S=>{const M=I++;E=g?n(E,S,M):(g=!0,S),r&&c.next(E)},o&&(()=>{g&&c.next(E),c.complete()})))}}function Wa(n,e){return(0,Ri.e)(Hl(n,e,arguments.length>=2,!0))}var vo=L(4671);function xu(n,e=vo.y){return n=null!=n?n:qa,(0,Ri.e)((t,r)=>{let o,u=!0;t.subscribe(new wn.Q(r,c=>{const g=e(c);(u||!n(o,g))&&(u=!1,o=g,r.next(c))}))})}function qa(n,e){return n===e}var qs=L(5032),un=L(2680),Nu=(L(2438),L(3942)),Pi=L(4859),de=L(5861),Er=L(9681),P=L(2090),ln=L(1877);const Ru="@firebase/database";let zs="";function Eo(n){zs=n}class Sn{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class za{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const ta=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Sn(e)}}catch(e){}return new za},Mr=ta("localStorage"),Ji=ta("sessionStorage"),Zr=new ln.Yd("@firebase/database"),Gl=function(){let n=1;return function(){return n++}}(),wo=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},Xi=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Xi.apply(null,r):e+="object"==typeof r?(0,P.Pz)(r):r,e+=" "}return e};let Oi=null,ad=!0;const nn=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Zr.logLevel=ln.in.VERBOSE,Oi=Zr.log.bind(Zr),e&&Ji.set("logging_enabled",!0)):"function"==typeof n?Oi=n:(Oi=null,Ji.remove("logging_enabled"))},xn=function(...n){if(!0===ad&&(ad=!1,null===Oi&&!0===Ji.get("logging_enabled")&&nn(!0)),Oi){const e=Xi.apply(null,n);Oi(e)}},na=function(n){return function(...e){xn(n,...e)}},$l=function(...n){const e="FIREBASE INTERNAL ERROR: "+Xi(...n);Zr.error(e)},As=function(...n){const e=`FIREBASE FATAL ERROR: ${Xi(...n)}`;throw Zr.error(e),new Error(e)},wr=function(...n){const e="FIREBASE WARNING: "+Xi(...n);Zr.warn(e)},Ka=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ss="[MIN_NAME]",Yt="[MAX_NAME]",Ks=function(n,e){if(n===e)return 0;if(n===Ss||e===Yt)return-1;if(e===Ss||n===Yt)return 1;{const t=zl(n),r=zl(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},es=function(n,e){return n===e?0:n<e?-1:1},Pu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Pz)(e))},Wl=function(n){if("object"!=typeof n||null===n)return(0,P.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Pz)(e[r]),t+=":",t+=Wl(n[e[r]]);return t+="}",t},Yr=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let o=0;o<t;o+=e)r.push(n.substring(o,o+e>t?t:o+e));return r};function Qt(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const ql=function(n){(0,P.hu)(!Ka(n),"Invalid JSON number");const r=1023;let o,u,c,g,E;0===n?(u=0,c=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(g=Math.min(Math.floor(Math.log(n)/Math.LN2),r),u=g+r,c=Math.round(n*Math.pow(2,52-g)-Math.pow(2,52))):(u=0,c=Math.round(n/Math.pow(2,-1074))));const I=[];for(E=52;E;E-=1)I.push(c%2?1:0),c=Math.floor(c/2);for(E=11;E;E-=1)I.push(u%2?1:0),u=Math.floor(u/2);I.push(o?1:0),I.reverse();const S=I.join("");let M="";for(E=0;E<64;E+=8){let F=parseInt(S.substr(E,8),2).toString(16);1===F.length&&(F="0"+F),M+=F}return M.toLowerCase()},Fh=new RegExp("^-?(0*)\\d{1,10}$"),Ya=-2147483648,ld=2147483647,zl=function(n){if(Fh.test(n)){const e=Number(n);if(e>=Ya&&e<=ld)return e}return null},Co=function(n){try{n()}catch(e){setTimeout(()=>{throw wr("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},xs=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class Zs{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){wr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class cd{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(xn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',wr(e)}}let Ys=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Ja=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Qs="websocket",ku="long_polling";class Nr{constructor(e,t,r,o,u=!1,c="",g=!1){this.secure=t,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=u,this.persistenceKey=c,this.includeNamespaceInQueryParams=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mr.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Mr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ts(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===Qs)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==ku)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Fu(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const o=[];return Qt(t,(u,c)=>{o.push(u+"="+c)}),r+o.join("&")}class Qp{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const Xa={},Js={};function Qr(n){const e=n.toString();return Xa[e]||(Xa[e]=new Qp),Xa[e]}class Jp{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&Co(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Rr{constructor(e,t,r,o,u,c,g){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.transportSessionId=c,this.lastSessionId=g,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=na(e),this.stats_=Qr(t),this.urlFn=E=>(this.appCheckToken&&(E.ac=this.appCheckToken),ts(t,ku,E))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Jp(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ns((...u)=>{const[c,g,E,I,S]=u;if(this.incrementIncomingBytes_(u),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=g,this.password=E;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);g?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(g,()=>{this.onClosed_()})):this.onClosed_()}},(...u)=>{const[c,g]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(c,g)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Ja.test(location.hostname)&&(r.r="f");const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Rr.forceAllow_=!0}static forceDisallow(){Rr.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!Rr.forceAllow_&&(Rr.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),o=Yr(r,1840);for(let u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ns{constructor(e,t,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Gl(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ns.createIFrame_();let u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(u='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(g){xn("frame writing exception"),g.stack&&xn(g.stack),xn(g)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||xn("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+o+"="+c.seg+"&ts"+o+"="+c.ts+"&d"+o+"="+c.d,o++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(o),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||"loaded"===o||"complete"===o)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{xn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Bu=null;"undefined"!=typeof MozWebSocket?Bu=MozWebSocket:"undefined"!=typeof WebSocket&&(Bu=WebSocket);let dd=(()=>{class n{constructor(t,r,o,u,c,g,E){this.connId=t,this.applicationId=o,this.appCheckToken=u,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=na(this.connId),this.stats_=Qr(r),this.connURL=n.connectionURL_(r,g,E,u),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,u){const c={v:"5"};return!(0,P.Yr)()&&"undefined"!=typeof location&&location.hostname&&Ja.test(location.hostname)&&(c.r="f"),r&&(c.s=r),o&&(c.ls=o),u&&(c.ac=u),ts(t,Qs,c)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mr.set("previous_websocket_failure",!0);try{if((0,P.Yr)()){const u={headers:{"User-Agent":`Firebase/5/${zs}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(u.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(u.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,g=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;g&&(u.proxy={origin:g}),this.mySock=new Bu(this.connURL,[],u)}else this.mySock=new Bu(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(o){this.log_("Error instantiating WebSocket.");const u=o.message||o.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const u=o.message||o.data;u&&this.log_(u),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&null!==Bu&&!n.forceDisallow_}static previouslyFailed(){return Mr.isInMemoryStorage||!0===Mr.get("previous_websocket_failure")}markConnectionHealthy(){Mr.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=(0,P.cI)(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);null!==o&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=(0,P.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=Yr(r,16384);o.length>1&&this.sendString_(String(o.length));for(let u=0;u<o.length;u++)this.sendString_(o[u])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class hd{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Rr,dd]}initTransports_(e){const t=dd&&dd.isAvailable();let r=t&&!dd.previouslyFailed();if(e.webSocketOnly&&(t||wr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[dd];else{const o=this.transports_=[];for(const u of hd.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class fd{constructor(e,t,r,o,u,c,g,E,I,S){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=u,this.onMessage_=c,this.onReady_=g,this.onDisconnect_=E,this.onKill_=I,this.lastSessionId=S,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=na("c:"+this.id+":"),this.transportManager_=new hd(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=xs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Pu("t",e),r=Pu("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Pu("t",e),r=Pu("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Pu("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?$l("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$l("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&wr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),xs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class pd{put(e,t,r,o){}merge(e,t,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class gd{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const o=this.getInitialEvent(e);o&&t.apply(r,o)}off(e,t,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let u=0;u<o.length;u++)if(o[u].callback===t&&(!r||r===o[u].context))return void o.splice(u,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class md extends gd{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new md}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Jt{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function jt(){return new Jt("")}function vt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function si(n){return n.pieces_.length-n.pieceNum_}function hn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Jt(n.pieces_,e)}function eg(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function yd(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function vd(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Jt(e,0)}function In(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Jt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&t.push(r[o])}return new Jt(t,0)}function xt(n){return n.pieceNum_>=n.pieces_.length}function Xr(n,e){const t=vt(n),r=vt(e);if(null===t)return e;if(t===r)return Xr(hn(n),hn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function W_(n,e){const t=yd(n,0),r=yd(e,0);for(let o=0;o<t.length&&o<r.length;o++){const u=Ks(t[o],r[o]);if(0!==u)return u}return t.length===r.length?0:t.length<r.length?-1:1}function qh(n,e){if(si(n)!==si(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function rs(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(si(n)>si(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class JE{constructor(e,t){this.errorPrefix_=t,this.parts_=yd(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);zh(this)}}function zh(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Pr(n))}function Pr(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class tu extends gd{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new tu}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Gu=1e3;let Wu,bo=(()=>{class n extends pd{constructor(t,r,o,u,c,g,E,I){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=u,this.onServerInfoUpdate_=c,this.authTokenProvider_=g,this.appCheckTokenProvider_=E,this.authOverride_=I,this.id=n.nextPersistentConnectionId_++,this.log_=na("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Gu,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,I&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");tu.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&md.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const u=++this.requestNumber_,c={r:u,a:t,b:r};this.log_((0,P.Pz)(c)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),o&&(this.requestCBHash_[u]=o)}get(t){this.initConnection_();const r=new P.BH,o={p:t._path.toString(),q:t._queryObject},u={action:"g",request:o,onComplete:g=>{const E=g.d;"ok"===g.s?(this.onDataUpdate_(o.p,E,!1,null),r.resolve(E)):r.reject(E)}};this.outstandingGets_.push(u),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const g=this.outstandingGets_[c];void 0===g||u!==g||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,o,u){this.initConnection_();const c=t._queryIdentifier,g=t._path.toString();this.log_("Listen called for "+g+" "+c),this.listens.has(g)||this.listens.set(g,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(g).has(c),"listen() called twice for same path/queryId.");const E={onComplete:u,hashFn:r,query:t,tag:o};this.listens.get(g).set(c,E),this.connected_&&this.sendListen_(E)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),u=r._queryIdentifier;this.log_("Listen on "+o+" for "+u);const c={p:o};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,E=>{const I=E.d,S=E.s;n.warnOnListenWarnings_(I,r),(this.listens.get(o)&&this.listens.get(o).get(u))===t&&(this.log_("listen response",E),"ok"!==S&&this.removeListen_(o,u),t.onComplete&&t.onComplete(S,I))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const o=(0,P.DV)(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const u='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();wr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${u} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",o={cred:t};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(r,o,u=>{const c=u.s,g=u.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,g))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),u=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+u),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,u)&&this.connected_&&this.sendUnlisten_(o,u,t._queryObject,r)}sendUnlisten_(t,r,o,u){this.log_("Unlisten on "+t+" for "+r);const c={p:t};u&&(c.q=o,c.t=u),this.sendRequest("n",c)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,u){const c={p:r,d:o};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,g=>{u&&setTimeout(()=>{u(g.s,g.d)},Math.floor(0))})}put(t,r,o,u){this.putInternal("p",t,r,o,u)}merge(t,r,o,u){this.putInternal("m",t,r,o,u)}putInternal(t,r,o,u,c){this.initConnection_();const g={p:r,d:o};void 0!==c&&(g.h=c),this.outstandingPuts_.push({action:t,request:g,onComplete:u}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,u=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),u&&u(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Pz)(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):$l("Unrecognized action received from server: "+(0,P.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Gu,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Gu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Gu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,de.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),o=t.onReady_.bind(t),u=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,g=t.lastSessionId;let E=!1,I=null;const S=function(){I?I.close():(E=!0,u())};t.realtime_={close:S,sendRequest:function(q){(0,P.hu)(I,"sendRequest call when we're not connected not allowed."),I.sendRequest(q)}};const F=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[q,Y]=yield Promise.all([t.authTokenProvider_.getToken(F),t.appCheckTokenProvider_.getToken(F)]);E?xn("getToken() completed but was canceled"):(xn("getToken() completed. Creating connection."),t.authToken_=q&&q.accessToken,t.appCheckToken_=Y&&Y.token,I=new fd(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,o,u,Re=>{wr(Re+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},g))}catch(q){t.log_("Failed to get token: "+q),E||(t.repoInfo_.nodeAdmin&&wr(q),S())}}})()}interrupt(t){xn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){xn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Gu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;o=r?r.map(c=>Wl(c)).join("$"):"default";const u=this.removeListen_(t,o);u&&u.onComplete&&u.onComplete("permission_denied")}removeListen_(t,r){const o=new Jt(t).toString();let u;if(this.listens.has(o)){const c=this.listens.get(o);u=c.get(r),c.delete(r),0===c.size&&this.listens.delete(o)}else u=void 0;return u}onAuthRevoked_(t,r){xn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){xn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+zs.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=md.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Mt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Mt(e,t)}}class Yh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Mt(Ss,e),o=new Mt(Ss,t);return 0!==this.compare(r,o)}minPost(){return Mt.MIN}}class ng extends Yh{static get __EMPTY_NODE(){return Wu}static set __EMPTY_NODE(e){Wu=e}compare(e,t){return Ks(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Mt.MIN}maxPost(){return new Mt(Yt,Wu)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Mt(e,Wu)}toString(){return".key"}}const is=new ng;class Ed{constructor(e,t,r,o,u=null){this.isReverse_=o,this.resultGenerator_=u,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,o&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let rg,ss=(()=>{class n{constructor(t,r,o,u,c){this.key=t,this.value=r,this.color=null!=o?o:n.RED,this.left=null!=u?u:Ir.EMPTY_NODE,this.right=null!=c?c:Ir.EMPTY_NODE}copy(t,r,o,u,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let u=this;const c=o(t,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(t,r,o),null):0===c?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,o)),u.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ir.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,u;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===r(t,o.key)){if(o.right.isEmpty())return Ir.EMPTY_NODE;u=o.right.min_(),o=o.copy(u.key,u.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ir{constructor(e,t=Ir.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ir(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ss.BLACK,null,null))}remove(e){return new Ir(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ss.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,o=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ed(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Ed(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Ed(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Ed(this.root_,null,this.comparator_,!0,e)}}function K_(n,e){return Ks(n.name,e.name)}function Jl(n,e){return Ks(n,e)}Ir.EMPTY_NODE=new class Qh{copy(e,t,r,o,u){return this}insert(e,t,r){return new ss(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const ig=function(n){return"number"==typeof n?"number:"+ql(n):"string:"+n},sg=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===rg||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===rg||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let qu,wd,og,nu=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),sg(this.priorityNode_)}static set __childrenNodeConstructor(t){qu=t}static get __childrenNodeConstructor(){return qu}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return xt(t)?this:".priority"===vt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=vt(t);return null===o?r:r.isEmpty()&&".priority"!==o?this:((0,P.hu)(".priority"!==o||1===si(t),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(hn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+ig(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?ql(this.value_):this.value_,this.lazyHash_=wo(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(o);return(0,P.hu)(u>=0,"Unknown leaf type: "+r),(0,P.hu)(c>=0,"Unknown leaf type: "+o),u===c?"object"===o?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-u}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const _n=new class Y_ extends Yh{compare(e,t){const r=e.node.getPriority(),o=t.node.getPriority(),u=r.compareTo(o);return 0===u?Ks(e.name,t.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Mt.MIN}maxPost(){return new Mt(Yt,new nu("[PRIORITY-POST]",og))}makePost(e,t){const r=wd(e);return new Mt(t,new nu("[PRIORITY-POST]",r))}toString(){return".priority"}},ag=Math.log(2);class Xl{constructor(e){this.count=parseInt(Math.log(e+1)/ag,10),this.current_=this.count-1;const o=(u=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const hr=function(n,e,t,r){n.sort(e);const o=function(E,I){const S=I-E;let M,F;if(0===S)return null;if(1===S)return M=n[E],F=t?t(M):M,new ss(F,M.node,ss.BLACK,null,null);{const q=parseInt(S/2,10)+E,Y=o(E,q),Re=o(q+1,I);return M=n[q],F=t?t(M):M,new ss(F,M.node,ss.BLACK,Y,Re)}},g=function(E){let I=null,S=null,M=n.length;const F=function(Y,Re){const Ze=M-Y,Ot=M;M-=Y;const Vt=o(Ze+1,Ot),or=n[Ze],Kt=t?t(or):or;q(new ss(Kt,or.node,Re,null,Vt))},q=function(Y){I?(I.left=Y,I=Y):(S=Y,I=Y)};for(let Y=0;Y<E.count;++Y){const Re=E.nextBitIsOne(),Ze=Math.pow(2,E.count-(Y+1));Re?F(Ze,ss.BLACK):(F(Ze,ss.BLACK),F(Ze,ss.RED))}return S}(new Xl(n.length));return new Ir(r||e,g)};let ec;const ru={};class eo{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(ru&&_n,"ChildrenNode.ts has not been loaded"),ec=ec||new eo({".priority":ru},{".priority":_n}),ec}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ir?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==is,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const u=t.getIterator(Mt.Wrap);let g,c=u.getNext();for(;c;)o=o||e.isDefinedOn(c.node),r.push(c),c=u.getNext();g=o?hr(r,e.getCompare()):ru;const E=e.toString(),I=Object.assign({},this.indexSet_);I[E]=e;const S=Object.assign({},this.indexes_);return S[E]=g,new eo(S,I)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(o,u)=>{const c=(0,P.DV)(this.indexSet_,u);if((0,P.hu)(c,"Missing index implementation for "+u),o===ru){if(c.isDefinedOn(e.node)){const g=[],E=t.getIterator(Mt.Wrap);let I=E.getNext();for(;I;)I.name!==e.name&&g.push(I),I=E.getNext();return g.push(e),hr(g,c.getCompare())}return ru}{const g=t.get(e.name);let E=o;return g&&(E=E.remove(new Mt(e.name,g))),E.insert(e,e.node)}});return new eo(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,o=>{if(o===ru)return o;{const u=t.get(e.name);return u?o.remove(new Mt(e.name,u)):o}});return new eo(r,this.indexSet_)}}let On,yt=(()=>{class n{constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&sg(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return On||(On=new n(new Ir(Jl),null,eo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||On}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?On:r}}getChild(t){const r=vt(t);return null===r?this:this.getImmediateChild(r).getChild(hn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const o=new Mt(t,r);let u,c;r.isEmpty()?(u=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(o,this.children_)):(u=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(o,this.children_));const g=u.isEmpty()?On:this.priorityNode_;return new n(u,g,c)}}updateChild(t,r){const o=vt(t);if(null===o)return r;{(0,P.hu)(".priority"!==vt(t)||1===si(t),".priority must be the last token in a path");const u=this.getImmediateChild(o).updateChild(hn(t),r);return this.updateImmediateChild(o,u)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,u=0,c=!0;if(this.forEachChild(_n,(g,E)=>{r[g]=E.val(t),o++,c&&n.INTEGER_REGEXP_.test(g)?u=Math.max(u,Number(g)):c=!1}),!t&&c&&u<2*o){const g=[];for(const E in r)g[E]=r[E];return g}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+ig(this.getPriority().val())+":"),this.forEachChild(_n,(r,o)=>{const u=o.hash();""!==u&&(t+=":"+r+":"+u)}),this.lazyHash_=""===t?"":wo(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const u=this.resolveIndex_(o);if(u){const c=u.getPredecessorKey(new Mt(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Mt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Mt(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(u=>r(u.name,u.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,u=>u);{const u=this.children_.getIteratorFrom(t.name,Mt.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)<0;)u.getNext(),c=u.peek();return u}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,u=>u);{const u=this.children_.getReverseIteratorFrom(t.name,Mt.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)>0;)u.getNext(),c=u.peek();return u}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===tc?-1:0}withIndex(t){if(t===is||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===is||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const o=this.getIterator(_n),u=r.getIterator(_n);let c=o.getNext(),g=u.getNext();for(;c&&g;){if(c.name!==g.name||!c.node.equals(g.node))return!1;c=o.getNext(),g=u.getNext()}return null===c&&null===g}return!1}return!1}}resolveIndex_(t){return t===is?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const tc=new class Xh extends yt{constructor(){super(new Ir(Jl),yt.EMPTY_NODE,eo.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return yt.EMPTY_NODE}isEmpty(){return!1}};function gn(n,e=null){if(null===n)return yt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new nu(n,gn(e));if(n instanceof Array){let t=yt.EMPTY_NODE;return Qt(n,(r,o)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const u=gn(o);(u.isLeafNode()||!u.isEmpty())&&(t=t.updateImmediateChild(r,u))}}),t.updatePriority(gn(e))}{const t=[];let r=!1;if(Qt(n,(c,g)=>{if("."!==c.substring(0,1)){const E=gn(g);E.isEmpty()||(r=r||!E.getPriority().isEmpty(),t.push(new Mt(c,E)))}}),0===t.length)return yt.EMPTY_NODE;const u=hr(t,K_,c=>c.name,Jl);if(r){const c=hr(t,_n.getCompare());return new yt(u,gn(e),new eo({".priority":c},{".priority":_n}))}return new yt(u,gn(e),eo.Default)}}Object.defineProperties(Mt,{MIN:{value:new Mt(Ss,yt.EMPTY_NODE)},MAX:{value:new Mt(Yt,tc)}}),ng.__EMPTY_NODE=yt.EMPTY_NODE,nu.__childrenNodeConstructor=yt,function pn(n){rg=n}(tc),function Jh(n){og=n}(tc),function Z_(n){wd=n}(gn);class tf extends Yh{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!xt(e)&&".priority"!==vt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),o=this.extractChild(t.node),u=r.compareTo(o);return 0===u?Ks(e.name,t.name):u}makePost(e,t){const r=gn(e),o=yt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Mt(t,o)}maxPost(){const e=yt.EMPTY_NODE.updateChild(this.indexPath_,tc);return new Mt(Yt,e)}toString(){return yd(this.indexPath_,0).join("/")}}const zu=new class ug extends Yh{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Ks(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Mt.MIN}maxPost(){return Mt.MAX}makePost(e,t){const r=gn(e);return new Mt(t,r)}toString(){return".value"}},iu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Q_=function(){let n=0;const e=[];return function(t){const r=t===n;let o;n=t;const u=new Array(8);for(o=7;o>=0;o--)u[o]=iu.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let c=u.join("");if(r){for(o=11;o>=0&&63===e[o];o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)c+=iu.charAt(e[o]);return(0,P.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),cg=function(n){if(n===""+ld)return"-";const e=zl(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Yt;const u=iu.charAt(iu.indexOf(t[r])+1);return t[r]=u,t.slice(0,r+1).join("")},Id=function(n){if(n===""+Ya)return Ss;const e=zl(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+ld:(delete t[t.length-1],t.join("")):(t[t.length-1]=iu.charAt(iu.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function dg(n){return{type:"value",snapshotNode:n}}function To(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Ao(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ku(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class rf{constructor(e){this.index_=e}updateChild(e,t,r,o,u,c){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const g=e.getImmediateChild(t);return g.getChild(o).equals(r.getChild(o))&&g.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(Ao(t,g)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):g.isEmpty()?c.trackChildChange(To(t,r)):c.trackChildChange(Ku(t,r,g))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(_n,(o,u)=>{t.hasChild(o)||r.trackChildChange(Ao(o,u))}),t.isLeafNode()||t.forEachChild(_n,(o,u)=>{if(e.hasChild(o)){const c=e.getImmediateChild(o);c.equals(u)||r.trackChildChange(Ku(o,u,c))}else r.trackChildChange(To(o,u))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?yt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class rc{constructor(e){this.indexedFilter_=new rf(e.getIndex()),this.index_=e.getIndex(),this.startPost_=rc.getStartPost_(e),this.endPost_=rc.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,o,u,c){return this.matches(new Mt(t,r))||(r=yt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,o,u,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=yt.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(yt.EMPTY_NODE);const u=this;return t.forEachChild(_n,(c,g)=>{u.matches(new Mt(c,g))||(o=o.updateImmediateChild(c,yt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class X_{constructor(e){this.rangedFilter_=new rc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,o,u,c){return this.rangedFilter_.matches(new Mt(t,r))||(r=yt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,o,u,c):this.fullLimitUpdateChild_(e,t,r,u,c)}updateFullNode(e,t,r){let o;if(t.isLeafNode()||t.isEmpty())o=yt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let u;o=yt.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;u.hasNext()&&c<this.limit_;){const g=u.getNext();let E;if(E=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),g)<=0:this.index_.compare(g,this.rangedFilter_.getEndPost())<=0,!E)break;o=o.updateImmediateChild(g.name,g.node),c++}}else{let u,c,g,E;if(o=t.withIndex(this.index_),o=o.updatePriority(yt.EMPTY_NODE),this.reverse_){E=o.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const M=this.index_.getCompare();g=(F,q)=>M(q,F)}else E=o.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),g=this.index_.getCompare();let I=0,S=!1;for(;E.hasNext();){const M=E.getNext();!S&&g(u,M)<=0&&(S=!0),S&&I<this.limit_&&g(M,c)<=0?I++:o=o.updateImmediateChild(M.name,yt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,o,u){let c;if(this.reverse_){const M=this.index_.getCompare();c=(F,q)=>M(q,F)}else c=this.index_.getCompare();const g=e;(0,P.hu)(g.numChildren()===this.limit_,"");const E=new Mt(t,r),I=this.reverse_?g.getFirstChild(this.index_):g.getLastChild(this.index_),S=this.rangedFilter_.matches(E);if(g.hasChild(t)){const M=g.getImmediateChild(t);let F=o.getChildAfterChild(this.index_,I,this.reverse_);for(;null!=F&&(F.name===t||g.hasChild(F.name));)F=o.getChildAfterChild(this.index_,F,this.reverse_);const q=null==F?1:c(F,E);if(S&&!r.isEmpty()&&q>=0)return null!=u&&u.trackChildChange(Ku(t,r,M)),g.updateImmediateChild(t,r);{null!=u&&u.trackChildChange(Ao(t,M));const Re=g.updateImmediateChild(t,yt.EMPTY_NODE);return null!=F&&this.rangedFilter_.matches(F)?(null!=u&&u.trackChildChange(To(F.name,F.node)),Re.updateImmediateChild(F.name,F.node)):Re}}return r.isEmpty()?e:S&&c(I,E)>=0?(null!=u&&(u.trackChildChange(Ao(I.name,I.node)),u.trackChildChange(To(t,r))),g.updateImmediateChild(t,r).updateImmediateChild(I.name,yt.EMPTY_NODE)):e}}class Zu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_n}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ss}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Yt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===_n}copy(){const e=new Zu;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function af(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function uf(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function aa(n,e){const t=n.copy();return t.index_=e,t}function ua(n){const e={};if(n.isDefault())return e;let t;return n.index_===_n?t="$priority":n.index_===zu?t="$value":n.index_===is?t="$key":((0,P.hu)(n.index_ instanceof tf,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Pz)(t),n.startSet_&&(e.startAt=(0,P.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,P.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,P.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,P.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Ms(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==_n&&(e.i=n.index_.toString()),e}class ic extends pd{constructor(e,t,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=na("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,o){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const c=ic.getListenId_(e,r),g={};this.listens_[c]=g;const E=ua(e._queryParams);this.restRequest_(u+".json",E,(I,S)=>{let M=S;if(404===I&&(M=null,I=null),null===I&&this.onDataUpdate_(u,M,!1,r),(0,P.DV)(this.listens_,c)===g){let F;F=I?401===I?"permission_denied":"rest_error:"+I:"ok",o(F,null)}})}unlisten(e,t){const r=ic.getListenId_(e,t);delete this.listens_[r]}get(e){const t=ua(e._queryParams),r=e._path.toString(),o=new P.BH;return this.restRequest_(r+".json",t,(u,c)=>{let g=c;404===u&&(g=null,u=null),null===u?(this.onDataUpdate_(r,g,!1,null),o.resolve(g)):o.reject(new Error(g))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,u])=>{o&&o.accessToken&&(t.auth=o.accessToken),u&&u.token&&(t.ac=u.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+c);const g=new XMLHttpRequest;g.onreadystatechange=()=>{if(r&&4===g.readyState){this.log_("REST Response for "+c+" received. status:",g.status,"response:",g.responseText);let E=null;if(g.status>=200&&g.status<300){try{E=(0,P.cI)(g.responseText)}catch(I){wr("Failed to parse JSON response for "+c+": "+g.responseText)}r(null,E)}else 401!==g.status&&404!==g.status&&wr("Got unsuccessful REST response for "+c+" Status: "+g.status),r(g.status);r=null}},g.open("GET",c,!0),g.send()})}}class fg{constructor(){this.rootNode_=yt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function sc(){return{value:null,children:new Map}}function Yu(n,e,t){if(xt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=vt(e);n.children.has(r)||n.children.set(r,sc()),Yu(n.children.get(r),e=hn(e),t)}}function os(n,e){if(xt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(_n,(r,o)=>{Yu(n,new Jt(r),o)}),os(n,e)}}if(n.children.size>0){const t=vt(e);return e=hn(e),n.children.has(t)&&os(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function as(n,e,t){null!==n.value?t(e,n.value):function Dd(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,o)=>{as(o,new Jt(e.toString()+"/"+r),t)})}class ey{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Qt(this.last_,(r,o)=>{t[r]=t[r]-o}),this.last_=e,t}}class ei{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new ey(e);const r=1e4+2e4*Math.random();xs(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Qt(e,(o,u)=>{u>0&&(0,P.r3)(this.statsToReport_,o)&&(t[o]=u,r=!0)}),r&&this.server_.reportStats(t),xs(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Or=(()=>{return(n=Or||(Or={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Or;var n})();function to(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Li{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Or.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(xt(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Jt(e));return new Li(jt(),t,this.revert)}}return(0,P.hu)(vt(this.path)===e,"operationForChild called for unrelated child."),new Li(hn(this.path),this.affectedTree,this.revert)}}class la{constructor(e,t){this.source=e,this.path=t,this.type=Or.LISTEN_COMPLETE}operationForChild(e){return xt(this.path)?new la(this.source,jt()):new la(this.source,hn(this.path))}}class So{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Or.OVERWRITE}operationForChild(e){return xt(this.path)?new So(this.source,jt(),this.snap.getImmediateChild(e)):new So(this.source,hn(this.path),this.snap)}}class Qu{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Or.MERGE}operationForChild(e){if(xt(this.path)){const t=this.children.subtree(new Jt(e));return t.isEmpty()?null:t.value?new So(this.source,jt(),t.value):new Qu(this.source,jt(),t)}return(0,P.hu)(vt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Qu(this.source,hn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class us{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(xt(e))return this.isFullyInitialized()&&!this.filtered_;const t=vt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class ty{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ac(n,e,t,r,o,u){const c=r.filter(g=>g.type===t);c.sort((g,E)=>function m(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new Mt(e.childName,e.snapshotNode),o=new Mt(t.childName,t.snapshotNode);return n.index_.compare(r,o)}(n,g,E)),c.forEach(g=>{const E=function ry(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,g,u);o.forEach(I=>{I.respondsTo(g.type)&&e.push(I.createEvent(E,n.query_))})})}function h(n,e){return{eventCache:n,serverCache:e}}function f(n,e,t,r){return h(new us(e,t,r),n.serverCache)}function v(n,e,t,r){return h(n.eventCache,new us(e,t,r))}function b(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function x(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let j;class we{constructor(e,t=(()=>(j||(j=new Ir(es)),j))()){this.value=e,this.children=t}static fromObject(e){let t=new we(null);return Qt(e,(r,o)=>{t=t.set(new Jt(r),o)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:jt(),value:this.value};if(xt(e))return null;{const r=vt(e),o=this.children.get(r);if(null!==o){const u=o.findRootMostMatchingPathAndValue(hn(e),t);return null!=u?{path:In(new Jt(r),u.path),value:u.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(xt(e))return this;{const t=vt(e),r=this.children.get(t);return null!==r?r.subtree(hn(e)):new we(null)}}set(e,t){if(xt(e))return new we(t,this.children);{const r=vt(e),u=(this.children.get(r)||new we(null)).set(hn(e),t),c=this.children.insert(r,u);return new we(this.value,c)}}remove(e){if(xt(e))return this.children.isEmpty()?new we(null):new we(null,this.children);{const t=vt(e),r=this.children.get(t);if(r){const o=r.remove(hn(e));let u;return u=o.isEmpty()?this.children.remove(t):this.children.insert(t,o),null===this.value&&u.isEmpty()?new we(null):new we(this.value,u)}return this}}get(e){if(xt(e))return this.value;{const t=vt(e),r=this.children.get(t);return r?r.get(hn(e)):null}}setTree(e,t){if(xt(e))return t;{const r=vt(e),u=(this.children.get(r)||new we(null)).setTree(hn(e),t);let c;return c=u.isEmpty()?this.children.remove(r):this.children.insert(r,u),new we(this.value,c)}}fold(e){return this.fold_(jt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((o,u)=>{r[o]=u.fold_(In(e,o),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,jt(),t)}findOnPath_(e,t,r){const o=!!this.value&&r(t,this.value);if(o)return o;if(xt(e))return null;{const u=vt(e),c=this.children.get(u);return c?c.findOnPath_(hn(e),In(t,u),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,jt(),t)}foreachOnPath_(e,t,r){if(xt(e))return this;{this.value&&r(t,this.value);const o=vt(e),u=this.children.get(o);return u?u.foreachOnPath_(hn(e),In(t,o),r):new we(null)}}foreach(e){this.foreach_(jt(),e)}foreach_(e,t){this.children.inorderTraversal((r,o)=>{o.foreach_(In(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Te{constructor(e){this.writeTree_=e}static empty(){return new Te(new we(null))}}function Ye(n,e,t){if(xt(e))return new Te(new we(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const o=r.path;let u=r.value;const c=Xr(o,e);return u=u.updateChild(c,t),new Te(n.writeTree_.set(o,u))}{const o=new we(t),u=n.writeTree_.setTree(e,o);return new Te(u)}}}function Xe(n,e,t){let r=n;return Qt(t,(o,u)=>{r=Ye(r,In(e,o),u)}),r}function Nt(n,e){if(xt(e))return Te.empty();{const t=n.writeTree_.setTree(e,new we(null));return new Te(t)}}function zn(n,e){return null!=Cr(n,e)}function Cr(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Xr(t.path,e)):null}function uc(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(_n,(r,o)=>{e.push(new Mt(r,o))}):n.writeTree_.children.inorderTraversal((r,o)=>{null!=o.value&&e.push(new Mt(r,o.value))}),e}function Ns(n,e){if(xt(e))return n;{const t=Cr(n,e);return new Te(null!=t?new we(t):n.writeTree_.subtree(e))}}function lc(n){return n.writeTree_.isEmpty()}function ca(n,e){return Ju(jt(),n.writeTree_,e)}function Ju(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((o,u)=>{".priority"===o?((0,P.hu)(null!==u.value,"Priority writes must always be leaf nodes"),r=u.value):t=Ju(In(n,o),u,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(In(n,".priority"),r)),t}}function Xu(n,e){return uy(e,n)}function Td(n,e){if(n.snap)return rs(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&rs(In(n.path,t),e))return!0;return!1}function pf(n){return n.visible}function t0(n,e,t){let r=Te.empty();for(let o=0;o<n.length;++o){const u=n[o];if(e(u)){const c=u.path;let g;if(u.snap)rs(t,c)?(g=Xr(t,c),r=Ye(r,g,u.snap)):rs(c,t)&&(g=Xr(c,t),r=Ye(r,jt(),u.snap.getChild(g)));else{if(!u.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(rs(t,c))g=Xr(t,c),r=Xe(r,g,u.children);else if(rs(c,t))if(g=Xr(c,t),xt(g))r=Xe(r,jt(),u.children);else{const E=(0,P.DV)(u.children,vt(g));if(E){const I=E.getChild(hn(g));r=Ye(r,jt(),I)}}}}}return r}function iy(n,e,t,r,o){if(r||o){const u=Ns(n.visibleWrites,e);return!o&&lc(u)?t:o||null!=t||zn(u,jt())?ca(t0(n.allWrites,function(I){return(I.visible||o)&&(!r||!~r.indexOf(I.writeId))&&(rs(I.path,e)||rs(e,I.path))},e),t||yt.EMPTY_NODE):null}{const u=Cr(n.visibleWrites,e);if(null!=u)return u;{const c=Ns(n.visibleWrites,e);return lc(c)?t:null!=t||zn(c,jt())?ca(c,t||yt.EMPTY_NODE):null}}}function gf(n,e,t,r){return iy(n.writeTree,n.treePath,e,t,r)}function oy(n,e){return function AD(n,e,t){let r=yt.EMPTY_NODE;const o=Cr(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(_n,(u,c)=>{r=r.updateImmediateChild(u,c)}),r;if(t){const u=Ns(n.visibleWrites,e);return t.forEachChild(_n,(c,g)=>{const E=ca(Ns(u,new Jt(c)),g);r=r.updateImmediateChild(c,E)}),uc(u).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return uc(Ns(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function ay(n,e,t,r){return function SD(n,e,t,r,o){(0,P.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");const u=In(e,t);if(zn(n.visibleWrites,u))return null;{const c=Ns(n.visibleWrites,u);return lc(c)?o.getChild(t):ca(c,o.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function pg(n,e){return function sy(n,e){return Cr(n.visibleWrites,e)}(n.writeTree,In(n.treePath,e))}function Rs(n,e,t){return function n0(n,e,t,r){const o=In(e,t),u=Cr(n.visibleWrites,o);return null!=u?u:r.isCompleteForChild(t)?ca(Ns(n.visibleWrites,o),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function s0(n,e){return uy(In(n.treePath,e),n.writeTree)}function uy(n,e){return{treePath:n,writeTree:e}}class MD{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const u=o.type;if("child_added"===t&&"child_removed"===u)this.changeMap.set(r,Ku(r,e.snapshotNode,o.snapshotNode));else if("child_removed"===t&&"child_added"===u)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===u)this.changeMap.set(r,Ao(r,o.oldSnap));else if("child_changed"===t&&"child_added"===u)this.changeMap.set(r,To(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==u)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(r,Ku(r,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const o0=new class ND{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class ly{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new us(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Rs(this.writes_,e,r)}}getChildAfterChild(e,t,r){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:x(this.viewCache_),u=function xD(n,e,t,r,o,u){return function r0(n,e,t,r,o,u,c){let g;const E=Ns(n.visibleWrites,e),I=Cr(E,jt());if(null!=I)g=I;else{if(null==t)return[];g=ca(E,t)}if(g=g.withIndex(c),g.isEmpty()||g.isLeafNode())return[];{const S=[],M=c.getCompare(),F=u?g.getReverseIteratorFrom(r,c):g.getIteratorFrom(r,c);let q=F.getNext();for(;q&&S.length<o;)0!==M(q,r)&&S.push(q),q=F.getNext();return S}}(n.writeTree,n.treePath,e,t,r,o,u)}(this.writes_,o,t,1,r,e);return 0===u.length?null:u[0]}}function Dt(n,e,t,r,o,u){const c=e.eventCache;if(null!=pg(r,t))return e;{let g,E;if(xt(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const I=x(e),M=oy(r,I instanceof yt?I:yt.EMPTY_NODE);g=n.filter.updateFullNode(e.eventCache.getNode(),M,u)}else{const I=gf(r,x(e));g=n.filter.updateFullNode(e.eventCache.getNode(),I,u)}else{const I=vt(t);if(".priority"===I){(0,P.hu)(1===si(t),"Can't have a priority with additional path components");const S=c.getNode();E=e.serverCache.getNode();const M=ay(r,t,S,E);g=null!=M?n.filter.updatePriority(S,M):c.getNode()}else{const S=hn(t);let M;if(c.isCompleteForChild(I)){E=e.serverCache.getNode();const F=ay(r,t,c.getNode(),E);M=null!=F?c.getNode().getImmediateChild(I).updateChild(S,F):c.getNode().getImmediateChild(I)}else M=Rs(r,I,e.serverCache);g=null!=M?n.filter.updateChild(c.getNode(),I,M,S,o,u):c.getNode()}}return f(e,g,c.isFullyInitialized()||xt(t),n.filter.filtersNodes())}}function mf(n,e,t,r,o,u,c,g){const E=e.serverCache;let I;const S=c?n.filter:n.filter.getIndexedFilter();if(xt(t))I=S.updateFullNode(E.getNode(),r,null);else if(S.filtersNodes()&&!E.isFiltered()){const q=E.getNode().updateChild(t,r);I=S.updateFullNode(E.getNode(),q,null)}else{const q=vt(t);if(!E.isCompleteForPath(t)&&si(t)>1)return e;const Y=hn(t),Ze=E.getNode().getImmediateChild(q).updateChild(Y,r);I=".priority"===q?S.updatePriority(E.getNode(),Ze):S.updateChild(E.getNode(),q,Ze,Y,o0,null)}const M=v(e,I,E.isFullyInitialized()||xt(t),S.filtersNodes());return Dt(n,M,t,o,new ly(o,M,u),g)}function gg(n,e,t,r,o,u,c){const g=e.eventCache;let E,I;const S=new ly(o,e,u);if(xt(t))I=n.filter.updateFullNode(e.eventCache.getNode(),r,c),E=f(e,I,!0,n.filter.filtersNodes());else{const M=vt(t);if(".priority"===M)I=n.filter.updatePriority(e.eventCache.getNode(),r),E=f(e,I,g.isFullyInitialized(),g.isFiltered());else{const F=hn(t),q=g.getNode().getImmediateChild(M);let Y;if(xt(F))Y=r;else{const Re=S.getCompleteChild(M);Y=null!=Re?".priority"===eg(F)&&Re.getChild(vd(F)).isEmpty()?Re:Re.updateChild(F,r):yt.EMPTY_NODE}E=q.equals(Y)?e:f(e,n.filter.updateChild(g.getNode(),M,Y,F,S,c),g.isFullyInitialized(),n.filter.filtersNodes())}}return E}function cy(n,e){return n.eventCache.isCompleteForChild(e)}function no(n,e,t){return t.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function _g(n,e,t,r,o,u,c,g){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let I,E=e;I=xt(t)?r:new we(null).setTree(t,r);const S=e.serverCache.getNode();return I.children.inorderTraversal((M,F)=>{if(S.hasChild(M)){const Y=no(0,e.serverCache.getNode().getImmediateChild(M),F);E=mf(n,E,new Jt(M),Y,o,u,c,g)}}),I.children.inorderTraversal((M,F)=>{const q=!e.serverCache.isCompleteForChild(M)&&void 0===F.value;if(!S.hasChild(M)&&!q){const Re=no(0,e.serverCache.getNode().getImmediateChild(M),F);E=mf(n,E,new Jt(M),Re,o,u,c,g)}}),E}class hy{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new rf(r.getIndex()),u=function sf(n){return n.loadsAllData()?new rf(n.getIndex()):n.hasLimit()?new X_(n):new rc(n)}(r);this.processor_=function a0(n){return{filter:n}}(u);const c=t.serverCache,g=t.eventCache,E=o.updateFullNode(yt.EMPTY_NODE,c.getNode(),null),I=u.updateFullNode(yt.EMPTY_NODE,g.getNode(),null),S=new us(E,c.isFullyInitialized(),o.filtersNodes()),M=new us(I,g.isFullyInitialized(),u.filtersNodes());this.viewCache_=h(M,S),this.eventGenerator_=new ty(this.query_)}get query(){return this.query_}}function qx(n,e){const t=x(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!xt(e)&&!t.getImmediateChild(vt(e)).isEmpty())?t.getChild(e):null}function py(n){return 0===n.eventRegistrations_.length}function _f(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(u=>{const c=u.createCancelEvent(t,o);c&&r.push(c)})}if(e){let o=[];for(let u=0;u<n.eventRegistrations_.length;++u){const c=n.eventRegistrations_[u];if(c.matches(e)){if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(u+1));break}}else o.push(c)}n.eventRegistrations_=o}else n.eventRegistrations_=[];return r}function yf(n,e,t,r){e.type===Or.MERGE&&null!==e.source.queryId&&((0,P.hu)(x(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(b(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,u=function PD(n,e,t,r,o){const u=new MD;let c,g;if(t.type===Or.OVERWRITE){const I=t;I.source.fromUser?c=gg(n,e,I.path,I.snap,r,o,u):((0,P.hu)(I.source.fromServer,"Unknown source."),g=I.source.tagged||e.serverCache.isFiltered()&&!xt(I.path),c=mf(n,e,I.path,I.snap,r,o,g,u))}else if(t.type===Or.MERGE){const I=t;I.source.fromUser?c=function mg(n,e,t,r,o,u,c){let g=e;return r.foreach((E,I)=>{const S=In(t,E);cy(e,vt(S))&&(g=gg(n,g,S,I,o,u,c))}),r.foreach((E,I)=>{const S=In(t,E);cy(e,vt(S))||(g=gg(n,g,S,I,o,u,c))}),g}(n,e,I.path,I.children,r,o,u):((0,P.hu)(I.source.fromServer,"Unknown source."),g=I.source.tagged||e.serverCache.isFiltered(),c=_g(n,e,I.path,I.children,r,o,g,u))}else if(t.type===Or.ACK_USER_WRITE){const I=t;c=I.revert?function ou(n,e,t,r,o,u){let c;if(null!=pg(r,t))return e;{const g=new ly(r,e,o),E=e.eventCache.getNode();let I;if(xt(t)||".priority"===vt(t)){let S;if(e.serverCache.isFullyInitialized())S=gf(r,x(e));else{const M=e.serverCache.getNode();(0,P.hu)(M instanceof yt,"serverChildren would be complete if leaf node"),S=oy(r,M)}S=S,I=n.filter.updateFullNode(E,S,u)}else{const S=vt(t);let M=Rs(r,S,e.serverCache);null==M&&e.serverCache.isCompleteForChild(S)&&(M=E.getImmediateChild(S)),I=null!=M?n.filter.updateChild(E,S,M,hn(t),g,u):e.eventCache.getNode().hasChild(S)?n.filter.updateChild(E,S,yt.EMPTY_NODE,hn(t),g,u):E,I.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=gf(r,x(e)),c.isLeafNode()&&(I=n.filter.updateFullNode(I,c,u)))}return c=e.serverCache.isFullyInitialized()||null!=pg(r,jt()),f(e,I,c,n.filter.filtersNodes())}}(n,e,I.path,r,o,u):function kD(n,e,t,r,o,u,c){if(null!=pg(o,t))return e;const g=e.serverCache.isFiltered(),E=e.serverCache;if(null!=r.value){if(xt(t)&&E.isFullyInitialized()||E.isCompleteForPath(t))return mf(n,e,t,E.getNode().getChild(t),o,u,g,c);if(xt(t)){let I=new we(null);return E.getNode().forEachChild(is,(S,M)=>{I=I.set(new Jt(S),M)}),_g(n,e,t,I,o,u,g,c)}return e}{let I=new we(null);return r.foreach((S,M)=>{const F=In(t,S);E.isCompleteForPath(F)&&(I=I.set(S,E.getNode().getChild(F)))}),_g(n,e,t,I,o,u,g,c)}}(n,e,I.path,I.affectedTree,r,o,u)}else{if(t.type!==Or.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);c=function dy(n,e,t,r,o){const u=e.serverCache;return Dt(n,v(e,u.getNode(),u.isFullyInitialized()||xt(t),u.isFiltered()),t,r,o0,o)}(n,e,t.path,r,u)}const E=u.getChanges();return function OD(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=b(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&t.push(dg(b(e)))}}(e,c,E),{viewCache:c,changes:E}}(n.processor_,o,e,t,r);return function RD(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,u.viewCache),(0,P.hu)(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=u.viewCache,yg(n,u.changes,u.viewCache.eventCache.getNode(),null)}function yg(n,e,t,r){return function ny(n,e,t,r){const o=[],u=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&u.push(function J_(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),ac(n,o,"child_removed",e,r,t),ac(n,o,"child_added",e,r,t),ac(n,o,"child_moved",u,r,t),ac(n,o,"child_changed",e,r,t),ac(n,o,"value",e,r,t),o}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Ad,Ey;class FD{constructor(){this.views=new Map}}function my(n,e,t,r){const o=e.source.queryId;if(null!==o){const u=n.views.get(o);return(0,P.hu)(null!=u,"SyncTree gave us an op for an invalid query."),yf(u,e,t,r)}{let u=[];for(const c of n.views.values())u=u.concat(yf(c,e,t,r));return u}}function _y(n,e,t,r,o){const c=n.views.get(e._queryIdentifier);if(!c){let g=gf(t,o?r:null),E=!1;g?E=!0:r instanceof yt?(g=oy(t,r),E=!1):(g=yt.EMPTY_NODE,E=!1);const I=h(new us(g,E,!1),new us(r,o,!1));return new hy(e,I)}return c}function jD(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function au(n,e){let t=null;for(const r of n.views.values())t=t||qx(r,e);return t}function yy(n,e){return e._queryParams.loadsAllData()?vy(n):n.views.get(e._queryIdentifier)}function l0(n,e){return null!=yy(n,e)}function da(n){return null!=vy(n)}function vy(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Qx=1;class HD{constructor(e){this.listenProvider_=e,this.syncPointTree_=new we(null),this.pendingWriteTree_=function Wx(){return{visibleWrites:Te.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function c0(n,e,t,r,o){return function cc(n,e,t,r,o){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:o}),o&&(n.visibleWrites=Ye(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,o),o?hc(n,new So({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function dc(n,e,t=!1){const r=function df(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function hf(n,e){const t=n.allWrites.findIndex(g=>g.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let o=r.visible,u=!1,c=n.allWrites.length-1;for(;o&&c>=0;){const g=n.allWrites[c];g.visible&&(c>=t&&Td(g,r.path)?o=!1:rs(r.path,g.path)&&(u=!0)),c--}return!!o&&(u?(function ff(n){n.visibleWrites=t0(n.allWrites,pf,jt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Nt(n.visibleWrites,r.path):Qt(r.children,E=>{n.visibleWrites=Nt(n.visibleWrites,In(r.path,E))}),!0))}(n.pendingWriteTree_,e)){let u=new we(null);return null!=r.snap?u=u.set(jt(),!0):Qt(r.children,c=>{u=u.set(new Jt(c),!0)}),hc(n,new Li(r.path,u,t))}return[]}function vg(n,e,t){return hc(n,new So({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Eg(n,e,t,r){const o=e._path,u=n.syncPointTree_.get(o);let c=[];if(u&&("default"===e._queryIdentifier||l0(u,e))){const g=function UD(n,e,t,r){const o=e._queryIdentifier,u=[];let c=[];const g=da(n);if("default"===o)for(const[E,I]of n.views.entries())c=c.concat(_f(I,t,r)),py(I)&&(n.views.delete(E),I.query._queryParams.loadsAllData()||u.push(I.query));else{const E=n.views.get(o);E&&(c=c.concat(_f(E,t,r)),py(E)&&(n.views.delete(o),E.query._queryParams.loadsAllData()||u.push(E.query)))}return g&&!da(n)&&u.push(new(function VD(){return(0,P.hu)(Ad,"Reference.ts has not been loaded"),Ad}())(e._repo,e._path)),{removed:u,events:c}}(u,e,t,r);(function BD(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const E=g.removed;c=g.events;const I=-1!==E.findIndex(M=>M._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(o,(M,F)=>da(F));if(I&&!S){const M=n.syncPointTree_.subtree(o);if(!M.isEmpty()){const F=function Dy(n){return n.fold((e,t,r)=>{if(t&&da(t))return[vy(t)];{let o=[];return t&&(o=jD(t)),Qt(r,(u,c)=>{o=o.concat(c)}),o}})}(M);for(let q=0;q<F.length;++q){const Y=F[q],Re=Y.query,Ze=f0(n,Y);n.listenProvider_.startListening(ha(Re),vf(n,Re),Ze.hashFn,Ze.onComplete)}}}if(!S&&E.length>0&&!r)if(I){const M=null;n.listenProvider_.stopListening(ha(e),M)}else E.forEach(M=>{const F=n.queryToTagMap.get(Dg(M));n.listenProvider_.stopListening(ha(M),F)});!function Ef(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const o=Dg(r),u=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(u)}}}(n,E)}return c}function wg(n,e,t){const r=e._path;let o=null,u=!1;n.syncPointTree_.foreachOnPath(r,(M,F)=>{const q=Xr(M,r);o=o||au(F,q),u=u||da(F)});let g,c=n.syncPointTree_.get(r);c?(u=u||da(c),o=o||au(c,jt())):(c=new FD,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=o?g=!0:(g=!1,o=yt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((F,q)=>{const Y=au(q,jt());Y&&(o=o.updateImmediateChild(F,Y))}));const E=l0(c,e);if(!E&&!e._queryParams.loadsAllData()){const M=Dg(e);(0,P.hu)(!n.queryToTagMap.has(M),"View does not exist, but we have a tag");const F=function Sd(){return Qx++}();n.queryToTagMap.set(M,F),n.tagToQueryMap.set(F,M)}let S=function Kx(n,e,t,r,o,u){const c=_y(n,e,r,o,u);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function zx(n,e){n.eventRegistrations_.push(e)}(c,t),function gy(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(_n,(u,c)=>{r.push(To(u,c))}),t.isFullyInitialized()&&r.push(dg(t.getNode())),yg(n,r,t.getNode(),e)}(c,t)}(c,e,t,Xu(n.pendingWriteTree_,r),o,g);if(!E&&!u){const M=yy(c,e);S=S.concat(function $D(n,e,t){const r=e._path,o=vf(n,e),u=f0(n,t),c=n.listenProvider_.startListening(ha(e),o,u.hashFn,u.onComplete),g=n.syncPointTree_.subtree(r);if(o)(0,P.hu)(!da(g.value),"If we're adding a query, it shouldn't be shadowed");else{const E=g.fold((I,S,M)=>{if(!xt(I)&&S&&da(S))return[vy(S).query];{let F=[];return S&&(F=F.concat(jD(S).map(q=>q.query))),Qt(M,(q,Y)=>{F=F.concat(Y)}),F}});for(let I=0;I<E.length;++I){const S=E[I];n.listenProvider_.stopListening(ha(S),vf(n,S))}}return c}(n,e,M))}return S}function Ig(n,e,t){const o=n.pendingWriteTree_,u=n.syncPointTree_.findOnPath(e,(c,g)=>{const I=au(g,Xr(c,e));if(I)return I});return iy(o,e,u,t,!0)}function hc(n,e){return h0(e,n.syncPointTree_,null,Xu(n.pendingWriteTree_,jt()))}function h0(n,e,t,r){if(xt(n.path))return Cg(n,e,t,r);{const o=e.get(jt());null==t&&null!=o&&(t=au(o,jt()));let u=[];const c=vt(n.path),g=n.operationForChild(c),E=e.children.get(c);if(E&&g){const I=t?t.getImmediateChild(c):null,S=s0(r,c);u=u.concat(h0(g,E,I,S))}return o&&(u=u.concat(my(o,n,r,t))),u}}function Cg(n,e,t,r){const o=e.get(jt());null==t&&null!=o&&(t=au(o,jt()));let u=[];return e.children.inorderTraversal((c,g)=>{const E=t?t.getImmediateChild(c):null,I=s0(r,c),S=n.operationForChild(c);S&&(u=u.concat(Cg(S,g,E,I)))}),o&&(u=u.concat(my(o,n,r,t))),u}function f0(n,e){const t=e.query,r=vf(n,t);return{hashFn:()=>(function u0(n){return n.viewCache_.serverCache.getNode()}(e)||yt.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return r?function GD(n,e,t){const r=Cy(n,t);if(r){const o=fc(r),u=o.path,c=o.queryId,g=Xr(u,e);return rl(n,u,new la(to(c),g))}return[]}(n,t._path,r):function wy(n,e){return hc(n,new la({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const u=function ud(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(o,t);return Eg(n,t,null,u)}}}}function vf(n,e){const t=Dg(e);return n.queryToTagMap.get(t)}function Dg(n){return n._path.toString()+"$"+n._queryIdentifier}function Cy(n,e){return n.tagToQueryMap.get(e)}function fc(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Jt(n.substr(0,e))}}function rl(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),my(r,t,Xu(n.pendingWriteTree_,e),null)}function ha(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Yx(){return(0,P.hu)(Ey,"Reference.ts has not been loaded"),Ey}())(n._repo,n._path):n}class bg{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new bg(t)}node(){return this.node_}}class Tg{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=In(this.path_,e);return new Tg(this.syncTree_,t)}node(){return Ig(this.syncTree_,this.path_)}}const Ag=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?p0(n[".sv"],e,t):"object"==typeof n[".sv"]?Sg(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},p0=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},Sg=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const o=e.node();if((0,P.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const c=o.getValue();return"number"!=typeof c?r:c+r},g0=function(n,e,t,r){return m0(e,new Tg(t,n),r)},xg=function(n,e,t){return m0(n,new bg(e),t)};function m0(n,e,t){const r=n.getPriority().val(),o=Ag(r,e.getImmediateChild(".priority"),t);let u;if(n.isLeafNode()){const c=n,g=Ag(c.getValue(),e,t);return g!==c.getValue()||o!==c.getPriority().val()?new nu(g,gn(o)):n}{const c=n;return u=c,o!==c.getPriority().val()&&(u=u.updatePriority(new nu(o))),c.forEachChild(_n,(g,E)=>{const I=m0(E,e.getImmediateChild(g),t);I!==E&&(u=u.updateImmediateChild(g,I))}),u}}class Mg{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function wf(n,e){let t=e instanceof Jt?e:new Jt(e),r=n,o=vt(t);for(;null!==o;){const u=(0,P.DV)(r.node.children,o)||{children:{},childCount:0};r=new Mg(o,r,u),t=hn(t),o=vt(t)}return r}function pc(n){return n.node.value}function Ng(n,e){n.node.value=e,v0(n)}function _0(n){return n.node.childCount>0}function oi(n,e){Qt(n.node.children,(t,r)=>{e(new Mg(t,n,r))})}function y0(n,e,t,r){t&&!r&&e(n),oi(n,o=>{y0(o,e,!0,r)}),t&&r&&e(n)}function Rg(n){return new Jt(null===n.parent?n.name:Rg(n.parent)+"/"+n.name)}function v0(n){null!==n.parent&&function E0(n,e,t){const r=function WD(n){return void 0===pc(n)&&!_0(n)}(t),o=(0,P.r3)(n.node.children,e);r&&o?(delete n.node.children[e],n.node.childCount--,v0(n)):!r&&!o&&(n.node.children[e]=t.node,n.node.childCount++,v0(n))}(n.parent,n.name,n)}const Xx=/[\[\].#$\/\u0000-\u001F\u007F]/,zD=/[\[\].#$\u0000-\u001F\u007F]/,If=10485760,Cf=function(n){return"string"==typeof n&&0!==n.length&&!Xx.test(n)},w0=function(n){return"string"==typeof n&&0!==n.length&&!zD.test(n)},Df=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Ka(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},xo=function(n,e,t,r){r&&void 0===e||bf((0,P.gK)(n,"value"),e,t)},bf=function(n,e,t){const r=t instanceof Jt?new JE(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Pr(r));if("function"==typeof e)throw new Error(n+"contains a function "+Pr(r)+" with contents = "+e.toString());if(Ka(e))throw new Error(n+"contains "+e.toString()+" "+Pr(r));if("string"==typeof e&&e.length>If/3&&(0,P.ug)(e)>If)throw new Error(n+"contains a string greater than "+If+" utf8 bytes "+Pr(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let o=!1,u=!1;if(Qt(e,(c,g)=>{if(".value"===c)o=!0;else if(".priority"!==c&&".sv"!==c&&(u=!0,!Cf(c)))throw new Error(n+" contains an invalid key ("+c+") "+Pr(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function q_(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),zh(n)})(r,c),bf(n,g,r),function Hu(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),o&&u)throw new Error(n+' contains ".value" child '+Pr(r)+" in addition to actual children.")}},C0=function(n,e,t,r){if(r&&void 0===e)return;const o=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const u=[];Qt(e,(c,g)=>{const E=new Jt(c);if(bf(o,g,In(t,E)),".priority"===eg(E)&&!Df(g))throw new Error(o+"contains an invalid value for '"+E.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(E)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const u=yd(r);for(let c=0;c<u.length;c++)if((".priority"!==u[c]||c!==u.length-1)&&!Cf(u[c]))throw new Error(n+"contains an invalid key ("+u[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(W_);let o=null;for(t=0;t<e.length;t++){if(r=e[t],null!==o&&rs(o,r))throw new Error(n+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(o,u)},Ty=function(n,e,t){if(!t||void 0!==e){if(Ka(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Df(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},xd=function(n,e,t,r){if(!(r&&void 0===t||Cf(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Md=function(n,e,t,r){if(!(r&&void 0===t||w0(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},rr=function(n,e){if(".info"===vt(e))throw new Error(n+" failed = Can't modify data under /.info/")},Pg=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Cf(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),w0(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class YD{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Og(n,e){let t=null;for(let r=0;r<e.length;r++){const o=e[r],u=o.getPath();null!==t&&!qh(u,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:u}),t.events.push(o)}t&&n.eventLists_.push(t)}function D0(n,e,t){Og(n,t),b0(n,r=>qh(r,e))}function Ps(n,e,t){Og(n,t),b0(n,r=>rs(r,e)||rs(e,r))}function b0(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const o=n.eventLists_[r];o&&(e(o.path)?(QD(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function QD(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Oi&&xn("event: "+t.toString()),Co(r)}}}const T0="repo_interrupt";class JD{constructor(e,t,r,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new YD,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sc(),this.transactionQueueTree_=new Mg,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Tf(n){const t=n.infoData_.getNode(new Jt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function gc(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Tf(n)})}function A0(n,e,t,r,o){n.dataUpdateCount++;const u=new Jt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(o)if(r){const E=(0,P.UI)(t,I=>gn(I));c=function d0(n,e,t,r){const o=Cy(n,r);if(o){const u=fc(o),c=u.path,g=u.queryId,E=Xr(c,e),I=we.fromObject(t);return rl(n,c,new Qu(to(g),E,I))}return[]}(n.serverSyncTree_,u,E,o)}else{const E=gn(t);c=function Iy(n,e,t,r){const o=Cy(n,r);if(null!=o){const u=fc(o),c=u.path,g=u.queryId,E=Xr(c,e);return rl(n,c,new So(to(g),E,t))}return[]}(n.serverSyncTree_,u,E,o)}else if(r){const E=(0,P.UI)(t,I=>gn(I));c=function tl(n,e,t){const r=we.fromObject(t);return hc(n,new Qu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,u,E)}else{const E=gn(t);c=vg(n.serverSyncTree_,u,E)}let g=u;c.length>0&&(g=Pd(n,u)),Ps(n.eventQueue_,g,c)}function kg(n,e){Fg(n,"connected",e),!1===e&&function tb(n){Nd(n,"onDisconnectEvents");const e=gc(n),t=sc();as(n.onDisconnect_,jt(),(o,u)=>{const c=g0(o,u,n.serverSyncTree_,e);Yu(t,o,c)});let r=[];as(t,jt(),(o,u)=>{r=r.concat(vg(n.serverSyncTree_,o,u));const c=Mf(n,o);Pd(n,c)}),n.onDisconnect_=sc(),Ps(n.eventQueue_,jt(),r)}(n)}function Fg(n,e,t){const r=new Jt("/.info/"+e),o=gn(t);n.infoData_.updateSnapshot(r,o);const u=vg(n.infoSyncTree_,r,o);Ps(n.eventQueue_,r,u)}function Lg(n){return n.nextWriteId_++}function Af(n,e,t,r,o){Nd(n,"set",{path:e.toString(),value:t,priority:r});const u=gc(n),c=gn(t,r),g=Ig(n.serverSyncTree_,e),E=xg(c,g,u),I=Lg(n),S=c0(n.serverSyncTree_,e,E,I,!0);Og(n.eventQueue_,S),n.server_.put(e.toString(),c.val(!0),(F,q)=>{const Y="ok"===F;Y||wr("set at "+e+" failed: "+F);const Re=dc(n.serverSyncTree_,I,!Y);Ps(n.eventQueue_,e,Re),mc(0,o,F,q)});const M=Mf(n,e);Pd(n,M),Ps(n.eventQueue_,M,[])}function S0(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,o)=>{"ok"===r&&os(n.onDisconnect_,e),mc(0,t,r,o)})}function xy(n,e,t,r){const o=gn(t);n.server_.onDisconnectPut(e.toString(),o.val(!0),(u,c)=>{"ok"===u&&Yu(n.onDisconnect_,e,o),mc(0,r,u,c)})}function Mo(n,e,t){let r;r=".info"===vt(e._path)?Eg(n.infoSyncTree_,e,t):Eg(n.serverSyncTree_,e,t),D0(n.eventQueue_,e._path,r)}function Sf(n){n.persistentConnection_&&n.persistentConnection_.interrupt(T0)}function Nd(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),xn(t,...e)}function mc(n,e,t,r){e&&Co(()=>{if("ok"===t)e(null);else{const o=(t||"error").toUpperCase();let u=o;r&&(u+=": "+r);const c=new Error(u);c.code=o,e(c)}})}function Vg(n,e,t){return Ig(n.serverSyncTree_,e,t)||yt.EMPTY_NODE}function Rd(n,e=n.transactionQueueTree_){if(e||Bg(n,e),pc(e)){const t=Py(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(o=>0===o.status)&&function xf(n,e,t){const r=t.map(I=>I.currentWriteId),o=Vg(n,e,r);let u=o;const c=o.hash();for(let I=0;I<t.length;I++){const S=t[I];(0,P.hu)(0===S.status,"tryToSendTransactionQueue_: items in queue should all be run."),S.status=1,S.retryCount++;const M=Xr(e,S.path);u=u.updateChild(M,S.currentOutputSnapshotRaw)}const g=u.val(!0),E=e;n.server_.put(E.toString(),g,I=>{Nd(n,"transaction put response",{path:E.toString(),status:I});let S=[];if("ok"===I){const M=[];for(let F=0;F<t.length;F++)t[F].status=2,S=S.concat(dc(n.serverSyncTree_,t[F].currentWriteId)),t[F].onComplete&&M.push(()=>t[F].onComplete(null,!0,t[F].currentOutputSnapshotResolved)),t[F].unwatcher();Bg(n,wf(n.transactionQueueTree_,e)),Rd(n,n.transactionQueueTree_),Ps(n.eventQueue_,e,S);for(let F=0;F<M.length;F++)Co(M[F])}else{if("datastale"===I)for(let M=0;M<t.length;M++)t[M].status=3===t[M].status?4:0;else{wr("transaction at "+E.toString()+" failed: "+I);for(let M=0;M<t.length;M++)t[M].status=4,t[M].abortReason=I}Pd(n,e)}},c)}(n,Rg(e),t)}else _0(e)&&oi(e,t=>{Rd(n,t)})}function Pd(n,e){const t=Ry(n,e),r=Rg(t);return function Ny(n,e,t){if(0===e.length)return;const r=[];let o=[];const c=e.filter(g=>0===g.status).map(g=>g.currentWriteId);for(let g=0;g<e.length;g++){const E=e[g],I=Xr(t,E.path);let M,S=!1;if((0,P.hu)(null!==I,"rerunTransactionsUnderNode_: relativePath should not be null."),4===E.status)S=!0,M=E.abortReason,o=o.concat(dc(n.serverSyncTree_,E.currentWriteId,!0));else if(0===E.status)if(E.retryCount>=25)S=!0,M="maxretry",o=o.concat(dc(n.serverSyncTree_,E.currentWriteId,!0));else{const F=Vg(n,E.path,c);E.currentInputSnapshot=F;const q=e[g].update(F.val());if(void 0!==q){bf("transaction failed: Data returned ",q,E.path);let Y=gn(q);"object"==typeof q&&null!=q&&(0,P.r3)(q,".priority")||(Y=Y.updatePriority(F.getPriority()));const Ze=E.currentWriteId,Ot=gc(n),Vt=xg(Y,F,Ot);E.currentOutputSnapshotRaw=Y,E.currentOutputSnapshotResolved=Vt,E.currentWriteId=Lg(n),c.splice(c.indexOf(Ze),1),o=o.concat(c0(n.serverSyncTree_,E.path,Vt,E.currentWriteId,E.applyLocally)),o=o.concat(dc(n.serverSyncTree_,Ze,!0))}else S=!0,M="nodata",o=o.concat(dc(n.serverSyncTree_,E.currentWriteId,!0))}Ps(n.eventQueue_,t,o),o=[],S&&(e[g].status=2,setTimeout(e[g].unwatcher,Math.floor(0)),e[g].onComplete&&r.push("nodata"===M?()=>e[g].onComplete(null,!1,e[g].currentInputSnapshot):()=>e[g].onComplete(new Error(M),!1,null)))}Bg(n,n.transactionQueueTree_);for(let g=0;g<r.length;g++)Co(r[g]);Rd(n,n.transactionQueueTree_)}(n,Py(n,t),r),r}function Ry(n,e){let t,r=n.transactionQueueTree_;for(t=vt(e);null!==t&&void 0===pc(r);)r=wf(r,t),t=vt(e=hn(e));return r}function Py(n,e){const t=[];return Oy(n,e,t),t.sort((r,o)=>r.order-o.order),t}function Oy(n,e,t){const r=pc(e);if(r)for(let o=0;o<r.length;o++)t.push(r[o]);oi(e,o=>{Oy(n,o,t)})}function Bg(n,e){const t=pc(e);if(t){let r=0;for(let o=0;o<t.length;o++)2!==t[o].status&&(t[r]=t[o],r++);t.length=r,Ng(e,t.length>0?t:void 0)}oi(e,r=>{Bg(n,r)})}function Mf(n,e){const t=Rg(Ry(n,e)),r=wf(n.transactionQueueTree_,e);return function qD(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,o=>{ky(n,o)}),ky(n,r),y0(r,o=>{ky(n,o)}),t}function ky(n,e){const t=pc(e);if(t){const r=[];let o=[],u=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,P.hu)(u===c-1,"All SENT items should be at beginning of queue."),u=c,t[c].status=3,t[c].abortReason="set"):((0,P.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),o=o.concat(dc(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===u?Ng(e,void 0):t.length=u+1,Ps(n.eventQueue_,Rg(e),o);for(let c=0;c<r.length;c++)Co(r[c])}}const il=function(n,e){const t=P0(n),r=t.namespace;return"firebase.com"===t.domain&&As(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&As("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&wr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Nr(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new Jt(t.pathString)}},P0=function(n){let e="",t="",r="",o="",u="",c=!0,g="https",E=443;if("string"==typeof n){let I=n.indexOf("//");I>=0&&(g=n.substring(0,I-1),n=n.substring(I+2));let S=n.indexOf("/");-1===S&&(S=n.length);let M=n.indexOf("?");-1===M&&(M=n.length),e=n.substring(0,Math.min(S,M)),S<M&&(o=function rb(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let o=t[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(u){}e+="/"+o}return e}(n.substring(S,M)));const F=function R0(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):wr(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,M)));I=e.indexOf(":"),I>=0?(c="https"===g||"wss"===g,E=parseInt(e.substring(I+1),10)):I=e.length;const q=e.slice(0,I);if("localhost"===q.toLowerCase())t="localhost";else if(q.split(".").length<=2)t=q;else{const Y=e.indexOf(".");r=e.substring(0,Y).toLowerCase(),t=e.substring(Y+1),u=r}"ns"in F&&(u=F.ns)}return{host:e,port:E,domain:t,subdomain:r,secure:c,scheme:g,pathString:o,namespace:u}};class O0{constructor(e,t,r,o){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Pz)(this.snapshot.exportVal())}}class k0{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class _c{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class F0{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return S0(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){rr("OnDisconnect.remove",this._path);const e=new P.BH;return xy(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){rr("OnDisconnect.set",this._path),xo("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return xy(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){rr("OnDisconnect.setWithPriority",this._path),xo("OnDisconnect.setWithPriority",e,this._path,!1),Ty("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function x0(n,e,t,r,o){const u=gn(t,r);n.server_.onDisconnectPut(e.toString(),u.val(!0),(c,g)=>{"ok"===c&&Yu(n.onDisconnect_,e,u),mc(0,o,c,g)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){rr("OnDisconnect.update",this._path),C0("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function M0(n,e,t,r){if((0,P.xb)(t))return xn("onDisconnect().update() called with empty data.  Don't do anything."),void mc(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(o,u)=>{"ok"===o&&Qt(t,(c,g)=>{const E=gn(g);Yu(n.onDisconnect_,In(e,c),E)}),mc(0,r,o,u)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class ls{constructor(e,t,r,o){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=o}get key(){return xt(this._path)?null:eg(this._path)}get ref(){return new cs(this._repo,this._path)}get _queryIdentifier(){const e=Ms(this._queryParams),t=Wl(e);return"{}"===t?"default":t}get _queryObject(){return Ms(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof ls))return!1;const t=this._repo===e._repo,r=qh(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function $_(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Ug(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function sl(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===is){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Ss)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(n.hasEnd()){if(n.getIndexEndName()!==Yt)throw new Error(r);if("string"!=typeof t)throw new Error(o)}}else if(n.getIndex()===_n){if(null!=e&&!Df(e)||null!=t&&!Df(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof tf||n.getIndex()===zu,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Vi(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class cs extends ls{constructor(e,t){super(e,t,new Zu,!1)}get parent(){const e=vd(this._path);return null===e?null:new cs(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ol{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Jt(e),r=al(this.ref,e);return new ol(this._node.getChild(t),r,_n)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,o)=>e(new ol(o,al(this.ref,r),_n)))}hasChild(e){const t=new Jt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Fy(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?al(n._root,e):n._root}function Ly(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=il(e,n._repo.repoInfo_.nodeAdmin);Pg("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&As("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Fy(n,t.path.toString())}function al(n,e){return null===vt((n=(0,P.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Md("child","path",t,!1)):Md("child","path",e,!1),new cs(n._repo,In(n._path,e));var t}function Vy(n,e){n=(0,P.m9)(n),rr("set",n._path),xo("set",e,n._path,!1);const t=new P.BH;return Af(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function V0(n,e){C0("update",e,n._path,!1);const t=new P.BH;return function eM(n,e,t,r){Nd(n,"update",{path:e.toString(),value:t});let o=!0;const u=gc(n),c={};if(Qt(t,(g,E)=>{o=!1,c[g]=g0(In(e,g),gn(E),n.serverSyncTree_,u)}),o)xn("update() called with empty data.  Don't do anything."),mc(0,r,"ok",void 0);else{const g=Lg(n),E=function Jx(n,e,t,r){!function el(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Xe(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const o=we.fromObject(t);return hc(n,new Qu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(n.serverSyncTree_,e,c,g);Og(n.eventQueue_,E),n.server_.merge(e.toString(),t,(I,S)=>{const M="ok"===I;M||wr("update at "+e+" failed: "+I);const F=dc(n.serverSyncTree_,g,!M),q=F.length>0?Pd(n,e):e;Ps(n.eventQueue_,q,F),mc(0,r,I,S)}),Qt(t,I=>{const S=Mf(n,In(e,I));Pd(n,S)}),Ps(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function ob(n){return function eb(n,e){const t=function nl(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(I,S)=>{const M=Xr(I,t);r=r||au(S,M)});let o=n.syncPointTree_.get(t);o?r=r||au(o,jt()):(o=new FD,n.syncPointTree_=n.syncPointTree_.set(t,o));const u=null!=r,c=u?new us(r,!0,!1):null;return function fy(n){return b(n.viewCache_)}(_y(o,e,Xu(n.pendingWriteTree_,e._path),u?c.getNode():yt.EMPTY_NODE,u))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const o=gn(r).withIndex(e._queryParams.getIndex()),u=vg(n.serverSyncTree_,e._path,o);return D0(n.eventQueue_,e._path,u),Promise.resolve(o)},r=>(Nd(n,"get for query "+(0,P.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,P.m9)(n))._repo,n).then(e=>new ol(e,new cs(n._repo,n._path),n._queryParams.getIndex()))}class jg{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new O0("value",this,new ol(e.snapshotNode,new cs(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new k0(this,e,t):null}matches(e){return e instanceof jg&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class By{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new k0(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=al(new cs(t._repo,t._path),e.childName),o=t._queryParams.getIndex();return new O0(e.type,this,new ol(e.snapshotNode,r,o),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof By&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Hg(n,e,t,r,o){let u;if("object"==typeof r&&(u=void 0,o=r),"function"==typeof r&&(u=r),o&&o.onlyOnce){const E=t,I=(S,M)=>{Mo(n._repo,n,g),E(S,M)};I.userCallback=t.userCallback,I.context=t.context,t=I}const c=new _c(t,u||void 0),g="value"===e?new jg(c):new By(e,c);return function N0(n,e,t){let r;r=".info"===vt(e._path)?wg(n.infoSyncTree_,e,t):wg(n.serverSyncTree_,e,t),D0(n.eventQueue_,e._path,r)}(n._repo,n,g),()=>Mo(n._repo,n,g)}function Nf(n,e,t,r){return Hg(n,"value",e,t,r)}function B0(n,e,t,r){return Hg(n,"child_added",e,t,r)}function Uy(n,e,t,r){return Hg(n,"child_changed",e,t,r)}function jy(n,e,t,r){return Hg(n,"child_moved",e,t,r)}function ab(n,e,t,r){return Hg(n,"child_removed",e,t,r)}function ro(n,e,t){let r=null;const o=t?new _c(t):null;"value"===e?r=new jg(o):e&&(r=new By(e,o)),Mo(n._repo,n,r)}class fa{}class ub extends fa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){xo("endAt",this._value,e._path,!0);const t=uf(e._queryParams,this._value,this._key);if(Vi(t),sl(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ls(e._repo,e._path,t,e._orderByCalled)}}class j0 extends fa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){xo("endBefore",this._value,e._path,!1);const t=function Fi(n,e,t){let r,o;return n.index_===is?("string"==typeof e&&(e=Id(e)),o=uf(n,e,t)):(r=null==t?Ss:Id(t),o=uf(n,e,r)),o.endBeforeSet_=!0,o}(e._queryParams,this._value,this._key);if(Vi(t),sl(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ls(e._repo,e._path,t,e._orderByCalled)}}class G0 extends fa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){xo("startAt",this._value,e._path,!0);const t=af(e._queryParams,this._value,this._key);if(Vi(t),sl(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ls(e._repo,e._path,t,e._orderByCalled)}}class $0 extends fa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){xo("startAfter",this._value,e._path,!1);const t=function Cd(n,e,t){let r;if(n.index_===is)"string"==typeof e&&(e=cg(e)),r=af(n,e,t);else{let o;o=null==t?Yt:cg(t),r=af(n,e,o)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Vi(t),sl(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ls(e._repo,e._path,t,e._orderByCalled)}}class lb extends fa{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ls(e._repo,e._path,function of(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class cb extends fa{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ls(e._repo,e._path,function hg(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class hb extends fa{constructor(e){super(),this._path=e}_apply(e){Ug(e,"orderByChild");const t=new Jt(this._path);if(xt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new tf(t),o=aa(e._queryParams,r);return sl(o),new ls(e._repo,e._path,o,!0)}}class pb extends fa{_apply(e){Ug(e,"orderByKey");const t=aa(e._queryParams,is);return sl(t),new ls(e._repo,e._path,t,!0)}}class Gg extends fa{_apply(e){Ug(e,"orderByPriority");const t=aa(e._queryParams,_n);return sl(t),new ls(e._repo,e._path,t,!0)}}class mb extends fa{_apply(e){Ug(e,"orderByValue");const t=aa(e._queryParams,zu);return sl(t),new ls(e._repo,e._path,t,!0)}}class _b extends fa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(xo("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ub(this._value,this._key)._apply(new G0(this._value,this._key)._apply(e))}}function Os(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function LD(n){(0,P.hu)(!Ad,"__referenceConstructor has already been defined"),Ad=n})(cs),function Zx(n){(0,P.hu)(!Ey,"__referenceConstructor has already been defined"),Ey=n}(cs);const yc={};function Pf(n,e,t,r,o){let u=r||n.options.databaseURL;void 0===u&&(n.options.projectId||As("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xn("Using default host for project ",n.options.projectId),u=`${n.options.projectId}-default-rtdb.firebaseio.com`);let E,I,c=il(u,o),g=c.repoInfo;"undefined"!=typeof process&&(I=process.env.FIREBASE_DATABASE_EMULATOR_HOST),I?(E=!0,u=`http://${I}?ns=${g.namespace}`,c=il(u,o),g=c.repoInfo):E=!c.repoInfo.secure;const S=o&&E?new Ys(Ys.OWNER):new cd(n.name,n.options,e);Pg("Invalid Firebase Database URL",c),xt(c.path)||As("Database URL must point to the root of a Firebase Database (not including a child path).");const M=function $y(n,e,t,r){let o=yc[e.name];o||(o={},yc[e.name]=o);let u=o[n.toURLString()];return u&&As("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new JD(n,false,t,r),o[n.toURLString()]=u,u}(g,n,S,new Zs(n.name,t));return new Fd(M,n)}class Fd{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function XD(n,e,t){if(n.stats_=Qr(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new ic(n.repoInfo_,(r,o,u,c)=>{A0(n,r,o,u,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>kg(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new bo(n.repoInfo_,e,(r,o,u,c)=>{A0(n,r,o,u,c)},r=>{kg(n,r)},r=>{!function Sy(n,e){Qt(e,(t,r)=>{Fg(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Lu(n,e){const t=n.toString();return Js[t]||(Js[t]=e()),Js[t]}(n.repoInfo_,()=>new ei(n.stats_,n.server_)),n.infoData_=new fg,n.infoSyncTree_=new HD({startListening:(r,o,u,c)=>{let g=[];const E=n.infoData_.getNode(r._path);return E.isEmpty()||(g=vg(n.infoSyncTree_,r._path,E),setTimeout(()=>{c("ok")},0)),g},stopListening:()=>{}}),Fg(n,"connected",!1),n.serverSyncTree_=new HD({startListening:(r,o,u,c)=>(n.server_.listen(r,u,o,(g,E)=>{const I=c(g,E);Ps(n.eventQueue_,r._path,I)}),[]),stopListening:(r,o)=>{n.server_.unlisten(r,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new cs(this._repo,jt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function io(n,e){const t=yc[e];(!t||t[n.key]!==n)&&As(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Sf(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&As("Cannot call "+e+" on a deleted database.")}}function Ud(n,e){nn(n,e)}const Hd={".sv":"timestamp"};class z0{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}bo.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},bo.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function jd(n){Eo(Er.SDK_VERSION),(0,Er._registerComponent)(new Pi.wA("database",(e,{instanceIdentifier:t})=>Pf(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Er.registerVersion)(Ru,"0.12.5",n),(0,Er.registerVersion)(Ru,"0.12.5","esm2017")}();const Q0=new ln.Yd("@firebase/database-compat"),J0=function(n){Q0.warn("FIREBASE WARNING: "+n)};class Ib{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const o=this._delegate.setWithPriority(e,t);return r&&o.then(()=>r(null),u=>r(u)),o}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let u=0;u<e.length;++u)o[""+u]=e[u];e=o,J0("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),o=>t(o)),r}}class ew{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ul{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Md("DataSnapshot.child","path",e,!1),new ul(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Md("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new ul(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new ds(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ni{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,o){var u;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const c=ni.getCancelAndContextArgs_("Query.on",r,o),g=(I,S)=>{t.call(c.context,new ul(this.database,I),S)};g.userCallback=t,g.context=c.context;const E=null===(u=c.cancel)||void 0===u?void 0:u.bind(c.context);switch(e){case"value":return Nf(this._delegate,g,E),t;case"child_added":return B0(this._delegate,g,E),t;case"child_removed":return ab(this._delegate,g,E),t;case"child_changed":return Uy(this._delegate,g,E),t;case"child_moved":return jy(this._delegate,g,E),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const o=()=>{};o.userCallback=t,o.context=r,ro(this._delegate,e,o)}else ro(this._delegate,e)}get(){return ob(this._delegate).then(e=>new ul(this.database,e))}once(e,t,r,o){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const u=ni.getCancelAndContextArgs_("Query.once",r,o),c=new P.BH,g=(I,S)=>{const M=new ul(this.database,I);t&&t.call(u.context,M,S),c.resolve(M)};g.userCallback=t,g.context=u.context;const E=I=>{u.cancel&&u.cancel.call(u.context,I),c.reject(I)};switch(e){case"value":Nf(this._delegate,g,E,{onlyOnce:!0});break;case"child_added":B0(this._delegate,g,E,{onlyOnce:!0});break;case"child_removed":ab(this._delegate,g,E,{onlyOnce:!0});break;case"child_changed":Uy(this._delegate,g,E,{onlyOnce:!0});break;case"child_moved":jy(this._delegate,g,E,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new ni(this.database,Os(this._delegate,function Gy(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new lb(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new ni(this.database,Os(this._delegate,function db(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new cb(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new ni(this.database,Os(this._delegate,function fb(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Md("orderByChild","path",n,!1),new hb(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new ni(this.database,Os(this._delegate,function gb(){return new pb}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new ni(this.database,Os(this._delegate,function Od(){return new Gg}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new ni(this.database,Os(this._delegate,function Rf(){return new mb}()))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new ni(this.database,Os(this._delegate,function rM(n=null,e){return xd("startAt","key",e,!0),new G0(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new ni(this.database,Os(this._delegate,function Hy(n,e){return xd("startAfter","key",e,!0),new $0(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new ni(this.database,Os(this._delegate,function U0(n,e){return xd("endAt","key",e,!0),new ub(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new ni(this.database,Os(this._delegate,function H0(n,e){return xd("endBefore","key",e,!0),new j0(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new ni(this.database,Os(this._delegate,function yb(n,e){return xd("equalTo","key",e,!0),new _b(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ni))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const o={cancel:void 0,context:void 0};if(t&&r)o.cancel=t,(0,P.Wj)(e,"cancel",o.cancel,!0),o.context=r,(0,P.lb)(e,"context",o.context,!0);else if(t)if("object"==typeof t&&null!==t)o.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=t}return o}get ref(){return new ds(this.database,new cs(this._delegate._repo,this._delegate._path))}}class ds extends ni{constructor(e,t){super(e,new ls(t._repo,t._path,new Zu,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ds(this.database,al(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ds(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new ds(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=Vy(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let u=0;u<e.length;++u)o[""+u]=e[u];e=o,J0("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}rr("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=V0(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const o=function nM(n,e,t){if(rr("setWithPriority",n._path),xo("setWithPriority",e,n._path,!1),Ty("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return Af(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&o.then(()=>r(null),u=>r(u)),o}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function sb(n){return rr("remove",n._path),Vy(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const o=function K0(n,e,t){var r;if(n=(0,P.m9)(n),rr("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const o=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,u=new P.BH,g=Nf(n,()=>{});return function My(n,e,t,r,o,u){Nd(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:Gl(),applyLocally:u,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},g=Vg(n,e,void 0);c.currentInputSnapshot=g;const E=c.update(g.val());if(void 0===E)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{bf("transaction failed: Data returned ",E,c.path),c.status=0;const I=wf(n.transactionQueueTree_,e),S=pc(I)||[];let M;S.push(c),Ng(I,S),"object"==typeof E&&null!==E&&(0,P.r3)(E,".priority")?(M=(0,P.DV)(E,".priority"),(0,P.hu)(Df(M),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):M=(Ig(n.serverSyncTree_,e)||yt.EMPTY_NODE).getPriority().val();const F=gc(n),q=gn(E,M),Y=xg(q,g,F);c.currentOutputSnapshotRaw=q,c.currentOutputSnapshotResolved=Y,c.currentWriteId=Lg(n);const Re=c0(n.serverSyncTree_,e,Y,c.currentWriteId,c.applyLocally);Ps(n.eventQueue_,e,Re),Rd(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(E,I,S)=>{let M=null;E?u.reject(E):(M=new ol(S,new cs(n._repo,n._path),_n),u.resolve(new z0(I,M)))},g,o),u.promise}(this._delegate,e,{applyLocally:r}).then(u=>new ew(u.committed,new ul(this.database,u.snapshot)));return t&&o.then(u=>t(null,u.committed,u.snapshot),u=>t(u,!1,null)),o}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function L0(n,e){n=(0,P.m9)(n),rr("setPriority",n._path),Ty("setPriority",e,!1);const t=new P.BH;return Af(n._repo,In(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function ib(n,e){n=(0,P.m9)(n),rr("push",n._path),xo("push",e,n._path,!0);const t=Tf(n._repo),r=Q_(t),o=al(n,r),u=al(n,r);let c;return c=null!=e?Vy(u,e).then(()=>u):Promise.resolve(u),o.then=c.then.bind(c),o.catch=c.then.bind(c,void 0),o}(this._delegate,e),o=r.then(c=>new ds(this.database,c));t&&o.then(()=>t(null),c=>t(c));const u=new ds(this.database,r);return u.then=o.then.bind(o),u.catch=o.catch.bind(o,void 0),u}onDisconnect(){return rr("Reference.onDisconnect",this._delegate._path),new Ib(new F0(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class kf{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function Ld(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&As("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let u;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&As('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Ys(Ys.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);u=new Ys(c)}!function vc(n,e,t,r){n.repoInfo_=new Nr(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(o,e,t,u)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof ds){const t=Ly(this._delegate,e.toString());return new ds(this,t)}{const t=Fy(this._delegate,e);return new ds(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=Ly(this._delegate,e);return new ds(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function Vd(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),Sf(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function Bd(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function nb(n){n.persistentConnection_&&n.persistentConnection_.resume(T0)}(n._repo)}(this._delegate)}}kf.ServerValue={TIMESTAMP:function W0(){return Hd}(),increment:n=>function q0(n){return{".sv":{increment:n}}}(n)};var Cb=Object.freeze({__proto__:null,initStandalone:function tw({app:n,url:e,version:t,customAuthImpl:r,namespace:o,nodeAdmin:u=!1}){Eo(t);const c=new Pi.zt("auth-internal",new Pi.H0("database-standalone"));return c.setComponent(new Pi.wA("auth-internal",()=>r,"PRIVATE")),{instance:new kf(Pf(n,c,void 0,e,u),n),namespace:o}}});const Db=kf.ServerValue;!function iM(n){n.INTERNAL.registerComponent(new Pi.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("database").getImmediate({identifier:t});return new kf(o,r)},"PUBLIC").setServiceProps({Reference:ds,Query:ni,Database:kf,DataSnapshot:ul,enableLogging:Ud,INTERNAL:Cb,ServerValue:Db}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.5")}(Nu.Z);var nw=L(7579),Gd=L(5363),Wy=L(6063);class bb extends nw.x{constructor(e=1/0,t=1/0,r=Wy.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!o&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const c=t.now();let g=0;for(let E=1;E<r.length&&r[E]<=c;E+=2)g=E;g&&r.splice(0,g+1)}}}function Tb(n,e,t){var r,o;let u,c=!1;return n&&"object"==typeof n?(u=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(o=n.windowTime)&&void 0!==o?o:1/0,c=!!n.refCount,t=n.scheduler):u=null!=n?n:1/0,(0,jl.B)({connector:()=>new bb(u,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}const Ab=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function $g(n,e){return(0,Ri.e)((t,r)=>{let o=0;t.subscribe(new wn.Q(r,u=>n.call(e,u,o++)&&r.next(u)))})}var rw=L(5698);function oM(n){return(0,Ri.e)((e,t)=>{let r=!1;e.subscribe(new wn.Q(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Sb(n=$d){return(0,Ri.e)((e,t)=>{let r=!1;e.subscribe(new wn.Q(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function $d(){return new Ab}var iw=L(576);function sw(n,e){return(0,iw.m)(e)?Kr(()=>n,e):Kr(()=>n)}var Wg=L(9468);L(5867);const cw=new Map,zy={activated:!1,tokenObservers:[]},Ky={initialized:!1,enabled:!1};function kr(n){return cw.get(n)||zy}function ks(n,e){cw.set(n,e)}function Wd(){return Ky}class hw{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,de.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function Yy(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ai=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Qy(n){if(!kr(n).activated)throw ai.create("use-before-activation",{appName:n.name})}function Vf(n,e){return Yg.apply(this,arguments)}function Yg(){return(Yg=(0,de.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});o&&(r["X-Firebase-Client"]=o.getPlatformInfoString());const u={method:"POST",body:JSON.stringify(e),headers:r};let c,g;try{c=yield fetch(n,u)}catch(M){throw ai.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==c.status)throw ai.create("fetch-status-error",{httpStatus:c.status});try{g=yield c.json()}catch(M){throw ai.create("fetch-parse-error",{originalErrorMessage:M.message})}const E=g.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw ai.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const I=1e3*Number(E[1]),S=Date.now();return{token:g.attestationToken,expireTimeMillis:S+I,issuedAtTimeMillis:S}})).apply(this,arguments)}function Bb(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const zd="firebase-app-check-store";let Bf=null;function ev(){return Bf||(Bf=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ai.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(zd,{keyPath:"compositeKey"})}}catch(t){e(ai.create("storage-open",{originalErrorMessage:t.message}))}}),Bf)}function tv(){return(tv=(0,de.Z)(function*(n,e){const r=(yield ev()).transaction(zd,"readwrite"),u=r.objectStore(zd).put({compositeKey:n,value:e});return new Promise((c,g)=>{u.onsuccess=E=>{c()},r.onerror=E=>{var I;g(ai.create("storage-set",{originalErrorMessage:null===(I=E.target.error)||void 0===I?void 0:I.message}))}})})).apply(this,arguments)}const kn=new ln.Yd("@firebase/app-check");function Iw(n,e){return(0,P.hl)()?function mw(n,e){return function Ub(n,e){return tv.apply(this,arguments)}(function Ew(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{kn.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function iv(){return Wd().enabled}function sv(){return ll.apply(this,arguments)}function ll(){return(ll=(0,de.Z)(function*(){const n=Wd();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Hb={error:"UNKNOWN_ERROR"};function Dw(n){return P.US.encodeString(JSON.stringify(n),!1)}function Jg(n){return Xg.apply(this,arguments)}function Xg(){return(Xg=(0,de.Z)(function*(n,e=!1){const t=n.app;Qy(t);const r=kr(t);let u,o=r.token;if(!o){const E=yield r.cachedTokenPromise;E&&nm(E)&&(o=E)}if(!e&&o&&nm(o))return{token:o.token};let g,c=!1;if(iv()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Vf(Bb(t,yield sv()),n.platformLoggerProvider).then(I=>(r.exchangeTokenPromise=void 0,I)),c=!0);const E=yield r.exchangeTokenPromise;return yield Iw(t,E),ks(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(E=>(r.exchangeTokenPromise=void 0,E)),c=!0),o=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?kn.warn(E.message):kn.error(E),u=E}return o?(g={token:o.token},ks(t,Object.assign(Object.assign({},r),{token:o})),yield Iw(t,o)):g=ma(u),c&&Tw(t,g),g})).apply(this,arguments)}function em(n,e){const t=kr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ks(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function tm(n){const{app:e}=n,t=kr(e);let r=t.tokenRefresher;r||(r=function ga(n){const{app:e}=n;return new hw((0,de.Z)(function*(){let r;if(r=kr(e).token?yield Jg(n,!0):yield Jg(n),r.error)throw r.error}),()=>!0,()=>{const t=kr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ks(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Tw(n,e){const t=kr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function nm(n){return n.expireTimeMillis-Date.now()>0}function ma(n){return{token:Dw(Hb),error:n}}class No{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=kr(this.app);for(const t of e)em(this.app,t.next);return Promise.resolve()}}const hv="app-check-internal";!function Qb(){(0,Er._registerComponent)(new Pi.wA("app-check",n=>function Ro(n,e){return new No(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(hv).initialize()})),(0,Er._registerComponent)(new Pi.wA(hv,n=>function Aw(n){return{getToken:e=>Jg(n,e),addTokenListener:e=>function bw(n,e,t,r){const{app:o}=n,u=kr(o),c={next:t,error:r,type:e};if(ks(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&nm(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),tm(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>tm(n))}(n,"INTERNAL",e),removeTokenListener:e=>em(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Er.registerVersion)("@firebase/app-check","0.5.3")}();class sm{constructor(){return(0,un.vb)("app-check")}}"undefined"!=typeof window&&window;var Fw=L(127);const om=new _.OlP("angularfire2.auth.use-emulator"),am=new _.OlP("angularfire2.auth.settings"),um=new _.OlP("angularfire2.auth.tenant-id"),lm=new _.OlP("angularfire2.auth.langugage-code"),cm=new _.OlP("angularfire2.auth.use-device-language"),dm=new _.OlP("angularfire.auth.persistence"),hm=(n,e,t,r,o,u,c,g)=>(0,dr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,u&&E.useDeviceLanguage(),c)for(const[I,S]of Object.entries(c))E.settings[I]=S;return g&&E.setPersistence(g),E},[t,r,o,u,c,g]);let fm=(()=>{class n{constructor(t,r,o,u,c,g,E,I,S,M,F,q){const Y=new nw.x,Re=Ni(void 0).pipe((0,Gd.Q)(c.outsideAngular),Kr(()=>u.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,2438)))),(0,dn.U)(()=>(0,dr.on)(t,u,r)),(0,dn.U)(Ze=>hm(Ze,u,g,I,S,M,E,F)),Tb({bufferSize:1,refCount:!1}));if(Na(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ni(null);else{Re.pipe(function xb(n,e){const t=arguments.length>=2;return r=>r.pipe(n?$g((o,u)=>n(o,u,r)):vo.y,(0,rw.q)(1),t?oM(e):Sb(()=>new Ab))}()).subscribe();const Ot=Re.pipe(Kr(Kt=>Kt.getRedirectResult().then(ar=>ar,()=>null)),un.iC,Tb({bufferSize:1,refCount:!1})),Vt=Re.pipe(Kr(Kt=>new An.y(ar=>({unsubscribe:u.runOutsideAngular(()=>Kt.onAuthStateChanged(hu=>ar.next(hu),hu=>ar.error(hu),()=>ar.complete()))})))),or=Re.pipe(Kr(Kt=>new An.y(ar=>({unsubscribe:u.runOutsideAngular(()=>Kt.onIdTokenChanged(hu=>ar.next(hu),hu=>ar.error(hu),()=>ar.complete()))}))));this.authState=Ot.pipe(sw(Vt),(0,Wg.R)(c.outsideAngular),(0,Gd.Q)(c.insideAngular)),this.user=Ot.pipe(sw(or),(0,Wg.R)(c.outsideAngular),(0,Gd.Q)(c.insideAngular)),this.idToken=this.user.pipe(Kr(Kt=>Kt?(0,bs.D)(Kt.getIdToken()):Ni(null))),this.idTokenResult=this.user.pipe(Kr(Kt=>Kt?(0,bs.D)(Kt.getIdTokenResult()):Ni(null))),this.credential=(0,Ul.T)(Ot,Y,this.authState.pipe($g(Kt=>!Kt))).pipe((0,dn.U)(Kt=>(null==Kt?void 0:Kt.user)?Kt:null),(0,Wg.R)(c.outsideAngular),(0,Gd.Q)(c.insideAngular))}return(0,dr.pX)(this,Re,u,{spy:{apply:(Ze,Ot,Vt)=>{(Ze.startsWith("signIn")||Ze.startsWith("createUser"))&&Vt.then(or=>Y.next(or))}}})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(dr.Dh),_.LFG(dr.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(un.HU),_.LFG(om,8),_.LFG(am,8),_.LFG(um,8),_.LFG(lm,8),_.LFG(cm,8),_.LFG(dm,8),_.LFG(sm,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Ec(n){return null==n}function sT(n){return"function"==typeof n.set}function pm(n,e){return sT(e)?e:n.ref(e)}function oT(n,e){if(function rT(n){return"string"==typeof n}(n))return e.stringCase();if(sT(n))return e.firebaseCase();if(function iT(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Zd(n,e,t="on",r=Su.z){return new An.y(o=>{let u=null;return u=n[t](e,(c,g)=>{r.schedule(()=>{o.next({snapshot:c,prevKey:g})}),"once"===t&&r.schedule(()=>o.complete())},c=>{r.schedule(()=>o.error(c))}),"on"===t?{unsubscribe(){null!=u&&n.off(e,u)}}:{unsubscribe(){}}}).pipe((0,dn.U)(o=>{const{snapshot:u,prevKey:c}=o;let g=null;return u.exists()&&(g=u.key),{type:e,payload:u,prevKey:c,key:g}}),(0,jl.B)())}function aT(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function uT(n,e){const{payload:t,prevKey:r,key:o}=e,u=aT(n,o),c=function _t(n,e){if(Ec(e))return 0;{const t=aT(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let g=null;e.payload.forEach(E=>{const I={payload:E,type:"value",prevKey:g,key:E.key};return g=E.key,n=[...n,I],!1})}return n;case"child_added":if(u>-1){const g=n[u-1];(g&&g.key||null)!==r&&(n=n.filter(E=>E.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(g=>g.payload.key!==t.key);case"child_changed":return n.map(g=>g.payload.key===o?e:g);case"child_moved":if(u>-1){const g=n.splice(u,1)[0];return(n=n.slice()).splice(c,0,g),n}return n;default:return n}}function Bw(n){return(Ec(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Uw(n,e,t){return function Vw(n,e,t){return Zd(n,"value","once",t).pipe(Kr(r=>{const o=[Ni(r)];return e.forEach(u=>o.push(Zd(n,u,"on",t))),(0,Ul.T)(...o).pipe(Wa(uT,[]))}),xu())}(n,e=Bw(e),t)}function jf(n,e,t){const r=(e=Bw(e)).map(o=>Zd(n,o,"on",t));return(0,Ul.T)(...r)}function Fn(n,e){return function(r,o){return oT(r,{stringCase:()=>n.child(r)[e](o),firebaseCase:()=>r[e](o),snapshotCase:()=>r.ref[e](o)})}}function wM(n){return function(t){return t?oT(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Hw(n,e){return function(){return Zd(n,"value","on",e)}}const Gw=new _.OlP("angularfire2.realtimeDatabaseURL"),$w=new _.OlP("angularfire2.database.use-emulator");let Ww=(()=>{class n{constructor(t,r,o,u,c,g,E,I,S,M,F,q,Y,Re,Ze){this.schedulers=g;const Ot=E,Vt=(0,dr.on)(t,c,r);I&&hm(Vt,c,S,F,q,Y,M,Re),this.database=(0,dr.cc)(`${Vt.name}.database.${o}`,"AngularFireDatabase",Vt.name,()=>{const or=c.runOutsideAngular(()=>Vt.database(o||void 0));return Ot&&or.useEmulator(...Ot),or},[Ot])}list(t,r){const o=this.schedulers.ngZone.runOutsideAngular(()=>pm(this.database,t));let u=o;return r&&(u=r(o)),function jw(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Fn(r,"update"),set:Fn(r,"set"),push:o=>r.push(o),remove:wM(r),snapshotChanges:o=>Uw(n,o,t).pipe(un.iC),stateChanges:o=>jf(n,o,t).pipe(un.iC),auditTrail:o=>function lT(n,e,t){return function mm(n,e,t){return function gm(n,e){return Zd(n,"value","on",e).pipe((0,dn.U)(t=>{let r;return t.payload.forEach(o=>(r=o.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function Mu(...n){const e=(0,$a.jO)(n);return(0,Ri.e)((t,r)=>{const o=n.length,u=new Array(o);let c=n.map(()=>!1),g=!1;for(let E=0;E<o;E++)(0,yo.Xf)(n[E]).subscribe(new wn.Q(r,I=>{u[E]=I,!g&&!c[E]&&(c[E]=!0,(g=c.every(vo.y))&&(c=null))},qs.Z));t.subscribe(new wn.Q(r,E=>{if(g){const I=[E,...u];r.next(e?e(...I):I)}}))})}(e),(0,dn.U)(([o,u])=>{const c=o.lastKeyToLoad,g=u.map(E=>E.key);return{actions:u,lastKeyToLoad:c,loadedKeys:g}}),function ea(n){return(0,Ri.e)((e,t)=>{let r=!1,o=0;e.subscribe(new wn.Q(t,u=>(r||(r=!n(u,o++)))&&t.next(u)))})}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,dn.U)(o=>o.actions))}(n,jf(n,e).pipe(Wa((o,u)=>[...o,u],[])),t)}(n,o,t).pipe(un.iC),valueChanges:(o,u)=>Uw(n,o,t).pipe((0,dn.U)(g=>g.map(E=>u&&u.idField?Object.assign(Object.assign({},E.payload.val()),{[u.idField]:E.key}):E.payload.val())),un.iC)}}(u,this)}object(t){return function cT(n,e){return{query:n,snapshotChanges:()=>Hw(n,e.schedulers.outsideAngular)().pipe(un.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Hw(n,e.schedulers.outsideAngular)().pipe(un.iC,(0,dn.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>pm(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(dr.Dh),_.LFG(dr.xv,8),_.LFG(Gw,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(un.HU),_.LFG($w,8),_.LFG(fm,8),_.LFG(om,8),_.LFG(am,8),_.LFG(um,8),_.LFG(lm,8),_.LFG(cm,8),_.LFG(dm,8),_.LFG(sm,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),qw=(()=>{class n{constructor(){Fw.Z.registerVersion("angularfire",un.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[Ww]}),n})();const{isArray:dT}=Array,{getPrototypeOf:hT,prototype:fT,keys:Hf}=Object;const{isArray:mT}=Array;function Kw(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let Yw=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_.Qsj),_.Y36(_.SBq))},n.\u0275dir=_.lG2({type:n}),n})(),Po=(()=>{class n extends Yw{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=_.n5z(n)))(r||n)}}(),n.\u0275dir=_.lG2({type:n,features:[_.qOj]}),n})();const hs=new _.OlP("NgValueAccessor"),yT={provide:hs,useExisting:(0,_.Gpc)(()=>Gf),multi:!0},Xw=new _.OlP("CompositionEventMode");let Gf=(()=>{class n extends Yw{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Jw(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(Xw,8))},n.\u0275dir=_.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&_.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[_._Bn([yT]),_.qOj]}),n})();function dl(n){return null==n||0===n.length}function gv(n){return null!=n&&"number"==typeof n.length}const ui=new _.OlP("NgValidators"),hl=new _.OlP("NgAsyncValidators"),IM=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class vT{static min(e){return function ET(n){return e=>{if(dl(e.value)||dl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function wT(n){return e=>{if(dl(e.value)||dl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function mv(n){return dl(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function $f(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function eI(n){return dl(n.value)||IM.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function tI(n){return e=>dl(e.value)||!gv(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function _v(n){return e=>gv(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Yd(n){if(!n)return Wf;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(dl(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return uI(e)}static composeAsync(e){return lI(e)}}function Wf(n){return null}function nI(n){return null!=n}function rI(n){const e=(0,_.QGY)(n)?(0,bs.D)(n):n;return(0,_.CqO)(e),e}function iI(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function sI(n,e){return e.map(t=>t(n))}function aI(n){return n.map(e=>function oI(n){return!n.validate}(e)?e:t=>e.validate(t))}function uI(n){if(!n)return null;const e=n.filter(nI);return 0==e.length?null:function(t){return iI(sI(t,e))}}function fl(n){return null!=n?uI(aI(n)):null}function lI(n){if(!n)return null;const e=n.filter(nI);return 0==e.length?null:function(t){return function Zw(...n){const e=(0,$a.jO)(n),{args:t,keys:r}=function pT(n){if(1===n.length){const e=n[0];if(dT(e))return{args:e,keys:null};if(function gT(n){return n&&"object"==typeof n&&hT(n)===fT}(e)){const t=Hf(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n),o=new An.y(u=>{const{length:c}=t;if(!c)return void u.complete();const g=new Array(c);let E=c,I=c;for(let S=0;S<c;S++){let M=!1;(0,yo.Xf)(t[S]).subscribe(new wn.Q(u,F=>{M||(M=!0,I--),g[S]=F},()=>E--,void 0,()=>{(!E||!M)&&(I||u.next(r?Kw(r,g):g),u.complete())}))}});return e?o.pipe(function zw(n){return(0,dn.U)(e=>function _m(n,e){return mT(e)?n(...e):n(e)}(n,e))}(e)):o}(sI(t,e).map(rI)).pipe((0,dn.U)(iI))}}function ym(n){return null!=n?lI(aI(n)):null}function cI(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yv(n){return n._rawValidators}function dI(n){return n._rawAsyncValidators}function vm(n){return n?Array.isArray(n)?n:[n]:[]}function Em(n,e){return Array.isArray(n)?n.includes(e):n===e}function wm(n,e){const t=vm(e);return vm(n).forEach(o=>{Em(t,o)||t.push(o)}),t}function hI(n,e){return vm(e).filter(t=>!Em(n,t))}class vv{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=fl(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ym(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class uu extends vv{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Bi extends vv{get formDirective(){return null}get path(){return null}}class fI{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let gI=(()=>{class n extends fI{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(uu,2))},n.\u0275dir=_.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&_.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[_.qOj]}),n})(),Ev=(()=>{class n extends fI{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(Bi,10))},n.\u0275dir=_.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&_.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[_.qOj]}),n})();function wc(n,e){Dv(n,e),e.valueAccessor.writeValue(n.value),function NT(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&_I(n,e)})}(n,e),function yI(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function mI(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&_I(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function MT(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function qf(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Xd(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Jd(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Dv(n,e){const t=yv(n);null!==e.validator?n.setValidators(cI(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=dI(n);null!==e.asyncValidator?n.setAsyncValidators(cI(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Jd(e._rawValidators,o),Jd(e._rawAsyncValidators,o)}function Xd(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=yv(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(c=>c!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=dI(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(c=>c!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Jd(e._rawValidators,r),Jd(e._rawAsyncValidators,r),t}function _I(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Cm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const zf="VALID",bm="INVALID",eh="PENDING",Kf="DISABLED";function Tm(n){return(bv(n)?n.validators:n)||null}function Am(n){return Array.isArray(n)?fl(n):n||null}function th(n,e){return(bv(e)?e.asyncValidators:n)||null}function nh(n){return Array.isArray(n)?ym(n):n||null}function bv(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Tv=n=>n instanceof Mm,Sm=n=>n instanceof Nm;function II(n){return Tv(n)?n.value:n.getRawValue()}function CI(n,e){const t=Sm(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new _.vHH(1e3,"");if(!r[e])throw new _.vHH(1001,"")}function xm(n,e){Sm(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new _.vHH(1002,"")})}class Av{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Am(this._rawValidators),this._composedAsyncValidatorFn=nh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===zf}get invalid(){return this.status===bm}get pending(){return this.status==eh}get disabled(){return this.status===Kf}get enabled(){return this.status!==Kf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Am(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=nh(e)}addValidators(e){this.setValidators(wm(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wm(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(hI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(hI(e,this._rawAsyncValidators))}hasValidator(e){return Em(this._rawValidators,e)}hasAsyncValidator(e){return Em(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=eh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Kf,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=zf,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zf||this.status===eh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Kf:zf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=eh,this._hasOwnPendingAsyncValidator=!0;const t=rI(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function wI(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=Sm(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof kT)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new _.vpe,this.statusChanges=new _.vpe}_calculateStatus(){return this._allControlsDisabled()?Kf:this.errors?bm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(eh)?eh:this._anyControlsHaveStatus(bm)?bm:zf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){bv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Mm extends Av{constructor(e=null,t,r){super(Tm(t),th(r,t)),this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Cm(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Cm(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Nm extends Av{constructor(e,t,r){super(Tm(t),th(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){xm(this,e),Object.keys(e).forEach(r=>{CI(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=II(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class kT extends Av{constructor(e,t,r){super(Tm(t),th(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){xm(this,e),e.forEach((r,o)=>{CI(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>II(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let TI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=_.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),SI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})();const Rm=new _.OlP("NgModelWithFormControlWarning"),NI={provide:Bi,useExisting:(0,_.Gpc)(()=>Pm)};let Pm=(()=>{class n extends Bi{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Xd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return wc(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){qf(t.control||null,t,!1),Cm(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Cc(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(qf(r||null,t),Tv(o)&&(wc(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function vI(n,e){Dv(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function EI(n,e){return Xd(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Dv(this.form,this),this._oldForm&&Xd(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(ui,10),_.Y36(hl,10))},n.\u0275dir=_.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&_.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([NI]),_.qOj,_.TTD]}),n})();const $T={provide:uu,useExisting:(0,_.Gpc)(()=>bc)};let bc=(()=>{class n extends uu{constructor(t,r,o,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new _.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Dc(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Gf?t=u:function PT(n){return Object.getPrototypeOf(n.constructor)===Po}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Ic(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Qd(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(_.Y36(Bi,13),_.Y36(ui,10),_.Y36(hl,10),_.Y36(hs,10),_.Y36(Rm,8))},n.\u0275dir=_.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[_._Bn([$T]),_.qOj,_.TTD]}),n})(),GI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[[SI]]}),n})(),YT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[GI]}),n})(),QT=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Rm,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[GI]}),n})();var $I=L(6131);function li(...n){return function eA(){return(0,$I.J)(1)}()((0,bs.D)(n,(0,$a.yG)(n)))}function gl(...n){const e=(0,$a.yG)(n);return(0,Ri.e)((t,r)=>{(e?li(n,t,e):li(n,t)).subscribe(r)})}function Vv(){return(0,Ri.e)((n,e)=>{let t,r=!1;n.subscribe(new wn.Q(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}var Je,tA="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ml={},Bv=Bv||{},Et=tA||self;function Bm(){}function Um(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Xf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ep="closure_uid_"+(1e9*Math.random()>>>0),WI=0;function qI(n,e,t){return n.call.apply(n.bind,arguments)}function jm(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Dr(n,e,t){return(Dr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qI:jm).apply(null,arguments)}function Uv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Fr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var c=Array(arguments.length-2),g=2;g<arguments.length;g++)c[g-2]=arguments[g];return e.prototype[o].apply(r,c)}}function _l(){this.s=this.s,this.o=this.o}var Hm={};_l.prototype.s=!1,_l.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function nA(n){return Object.prototype.hasOwnProperty.call(n,ep)&&n[ep]||(n[ep]=++WI)}(this);delete Hm[n]}},_l.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const jv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},KI=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function Gm(n){return Array.prototype.concat.apply([],arguments)}function ZI(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function $m(n){return/^[\s\xa0]*$/.test(n)}var Ui,YI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ci(n,e){return-1!=n.indexOf(e)}function Wm(n,e){return n<e?-1:n>e?1:0}e:{var Gv=Et.navigator;if(Gv){var $v=Gv.userAgent;if($v){Ui=$v;break e}}Ui=""}function Wv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function QI(n){const e={};for(const t in n)e[t]=n[t];return e}var qv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function JI(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<qv.length;u++)t=qv[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function qm(n){return qm[" "](n),n}qm[" "]=Bm;var Kv,n,eC=ci(Ui,"Opera"),Tc=ci(Ui,"Trident")||ci(Ui,"MSIE"),tC=ci(Ui,"Edge"),zv=tC||Tc,rA=ci(Ui,"Gecko")&&!(ci(Ui.toLowerCase(),"webkit")&&!ci(Ui,"Edge"))&&!(ci(Ui,"Trident")||ci(Ui,"MSIE"))&&!ci(Ui,"Edge"),nC=ci(Ui.toLowerCase(),"webkit")&&!ci(Ui,"Edge");function iA(){var n=Et.document;return n?n.documentMode:void 0}e:{var rC="",iC=(n=Ui,rA?/rv:([^\);]+)(\)|;)/.exec(n):tC?/Edge\/([\d\.]+)/.exec(n):Tc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):nC?/WebKit\/(\S+)/.exec(n):eC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(iC&&(rC=iC?iC[1]:""),Tc){var sC=iA();if(null!=sC&&sC>parseFloat(rC)){Kv=String(sC);break e}}Kv=rC}var FM={};var VM=Et.document&&Tc&&(iA()||parseInt(Kv,10))||void 0,Zv=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Et.addEventListener("test",Bm,e),Et.removeEventListener("test",Bm,e)}catch(t){}return n}();function ir(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function oh(n,e){if(ir.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(rA){e:{try{qm(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:sA[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&oh.Z.h.call(this)}}ir.prototype.h=function(){this.defaultPrevented=!0},Fr(oh,ir);var sA={2:"touch",3:"pen",4:"mouse"};oh.prototype.h=function(){oh.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var np="closure_listenable_"+(1e6*Math.random()|0),Yv=0;function aC(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++Yv,this.ca=this.fa=!1}function rp(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function zm(n){this.src=n,this.g={},this.h=0}function uC(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=jv(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(rp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Qv(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}zm.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=Qv(n,e,r,o);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new aC(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var ah="closure_lm_"+(1e6*Math.random()|0),Km={};function oA(n,e,t,r,o){if(r&&r.once)return lC(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)oA(n,e[u],t,r,o);return null}return t=ji(t),n&&n[np]?n.N(e,t,Xf(r)?!!r.capture:!!r,o):aA(n,e,t,!1,r,o)}function aA(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var c=Xf(o)?!!o.capture:!!o,g=ip(n);if(g||(n[ah]=g=new zm(n)),(t=g.add(e,t,r,c,u)).proxy)return t;if(r=function BM(){var e=lA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Zv||(o=c),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(uA(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function lC(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)lC(n,e[u],t,r,o);return null}return t=ji(t),n&&n[np]?n.O(e,t,Xf(r)?!!r.capture:!!r,o):aA(n,e,t,!0,r,o)}function Jv(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Jv(n,e[u],t,r,o);else r=Xf(r)?!!r.capture:!!r,t=ji(t),n&&n[np]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Qv(u=n.g[e],t,r,o))&&(rp(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=ip(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Qv(e,t,r,o)),(t=-1<n?e[n]:null)&&Xv(t))}function Xv(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[np])uC(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(uA(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ip(e))?(uC(t,n),0==t.h&&(t.src=null,e[ah]=null)):rp(n)}}}function uA(n){return n in Km?Km[n]:Km[n]="on"+n}function lA(n,e){if(n.ca)n=!0;else{e=new oh(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Xv(n),n=t.call(r,e)}return n}function ip(n){return(n=n[ah])instanceof zm?n:null}var eE="__closure_events_fn_"+(1e9*Math.random()>>>0);function ji(n){return"function"==typeof n?n:(n[eE]||(n[eE]=function(e){return n.handleEvent(e)}),n[eE])}function Lr(){_l.call(this),this.i=new zm(this),this.P=this,this.I=null}function br(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ir(e,n);else if(e instanceof ir)e.target=e.target||n;else{var o=e;JI(e=new ir(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];o=Zm(c,r,!0,e)&&o}if(o=Zm(c=e.g=n,r,!0,e)&&o,o=Zm(c,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Zm(c=e.g=t[u],r,!1,e)&&o}function Zm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var g=c.listener,E=c.ia||c.src;c.fa&&uC(n.i,c),o=!1!==g.call(E,r)&&o}}return o&&!r.defaultPrevented}Fr(Lr,_l),Lr.prototype[np]=!0,Lr.prototype.removeEventListener=function(n,e,t,r){Jv(this,n,e,t,r)},Lr.prototype.M=function(){if(Lr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)rp(t[r]);delete n.g[e],n.h--}}this.I=null},Lr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Lr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var tE=Et.JSON.stringify;function nE(){var n=so;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var iE,rE=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new cA,n=>n.reset());class cA{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function dC(n){Et.setTimeout(()=>{throw n},0)}function Ym(n,e){iE||function dA(){var n=Et.Promise.resolve(void 0);iE=function(){n.then(hA)}}(),sp||(iE(),sp=!0),so.add(n,e)}var sp=!1,so=new class cC{constructor(){this.h=this.g=null}add(e,t){const r=rE.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function hA(){for(var n;n=nE();){try{n.h.call(n.g)}catch(t){dC(t)}var e=rE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}sp=!1}function sE(n,e){Lr.call(this),this.h=n||1,this.g=e||Et,this.j=Dr(this.kb,this),this.l=Date.now()}function oE(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Qm(n,e,t){if("function"==typeof n)t&&(n=Dr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Dr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Et.setTimeout(n,e||0)}function fA(n){n.g=Qm(()=>{n.g=null,n.i&&(n.i=!1,fA(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Fr(sE,Lr),(Je=sE.prototype).da=!1,Je.S=null,Je.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),br(this,"tick"),this.da&&(oE(this),this.start()))}},Je.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Je.M=function(){sE.Z.M.call(this),oE(this),delete this.g};class pA extends _l{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:fA(this)}M(){super.M(),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function uh(n){_l.call(this),this.h=n,this.g={}}Fr(uh,_l);var hC=[];function gA(n,e,t,r){Array.isArray(t)||(t&&(hC[0]=t.toString()),t=hC);for(var o=0;o<t.length;o++){var u=oA(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function aE(n){Wv(n.g,function(e,t){this.g.hasOwnProperty(t)&&Xv(e)},n),n.g={}}function op(){this.g=!0}function Ac(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function uE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<o.length;c++)o[c]=""}}}return tE(t)}catch(g){return e}}(n,t)+(r?" "+r:"")})}uh.prototype.M=function(){uh.Z.M.call(this),aE(this)},uh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},op.prototype.Aa=function(){this.g=!1},op.prototype.info=function(){};var yl={},fC=null;function ap(){return fC=fC||new Lr}function lE(n){ir.call(this,yl.Ma,n)}function up(n){const e=ap();br(e,new lE(e,n))}function pC(n,e){ir.call(this,yl.STAT_EVENT,n),this.stat=e}function fs(n){const e=ap();br(e,new pC(e,n))}function yA(n,e){ir.call(this,yl.Na,n),this.size=e}function lh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Et.setTimeout(function(){n()},e)}yl.Ma="serverreachability",Fr(lE,ir),yl.STAT_EVENT="statevent",Fr(pC,ir),yl.Na="timingevent",Fr(yA,ir);var Xm={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},gC={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function cE(){}function EA(){}cE.prototype.h=null;var dE,e_={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function mC(){ir.call(this,"d")}function _C(){ir.call(this,"c")}function Sc(){}function lp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new uh(this),this.P=vC,this.W=new sE(n=zv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new yC}function yC(){this.i=null,this.g="",this.h=!1}Fr(mC,ir),Fr(_C,ir),Fr(Sc,cE),Sc.prototype.g=function(){return new XMLHttpRequest},Sc.prototype.i=function(){return{}},dE=new Sc;var vC=45e3,lu={},cp={};function dp(n,e,t){n.K=1,n.v=Nc(ya(e)),n.s=t,n.U=!0,t_(n,null)}function t_(n,e){n.F=Date.now(),ch(n),n.A=ya(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),xC(t.h,"t",r),n.C=0,t=n.l.H,n.h=new yC,n.g=eN(n.l,t?e:null,!n.s),0<n.O&&(n.L=new pA(Dr(n.Ia,n,n.g),n.O)),gA(n.V,n.g,"readystatechange",n.gb),e=n.H?QI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),up(1),function mA(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var c="",g=u.split("&"),E=0;E<g.length;E++){var I=g[E].split("=");if(1<I.length){var S=I[0];I=I[1];var M=S.split("_");c=2<=M.length&&"type"==M[1]?c+(S+"=")+I+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function EC(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function n_(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=hE(n,t),o==cp){4==e&&(n.o=4,fs(14),r=!1),Ac(n.j,n.m,null,"[Incomplete Response]");break}if(o==lu){n.o=4,fs(15),Ac(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ac(n.j,n.m,o,null),wC(n,o)}EC(n)&&o!=cp&&o!=lu&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,fs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),NA(e),e.L=!0,fs(11))):(Ac(n.j,n.m,t,"[Invalid Chunked Response]"),dh(n),r_(n))}function hE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?cp:(t=Number(e.substring(t,r)),isNaN(t)?lu:(r+=1)+t>e.length?cp:(e=e.substr(r,t),n.C=r+t,e))}function ch(n){n.Y=Date.now()+n.P,fE(n,n.P)}function fE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=lh(Dr(n.eb,n),e)}function pE(n){n.B&&(Et.clearTimeout(n.B),n.B=null)}function r_(n){0==n.l.G||n.I||YM(n.l,n)}function dh(n){pE(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,oE(n.W),aE(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function wC(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||NC(t.i,n)))if(t.I=n.N,!n.J&&NC(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(I){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=lh(Dr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;OC(t),fh(t)}MA(t),fs(18)}if(1>=MC(t.i)&&t.ka){try{t.ka()}catch(I){}t.ka=void 0}}else Ep(t,11)}else if((n.J||t.g==n)&&OC(t),!$m(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let I=o[e];if(t.U=I[0],I=I[1],2==t.G)if("c"==I[0]){t.J=I[1],t.la=I[2];const S=I[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const M=I[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const F=I[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const q=n.g;if(q){const Y=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var u=r.i;!u.g&&(ci(Y,"spdy")||ci(Y,"quic")||ci(Y,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(RC(u,u.h),u.h=null))}if(r.D){const Re=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;Re&&(r.sa=Re,Cn(r.F,r.D,Re))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=XM(r,r.H?r.la:null,r.W),c.J){SA(r.i,c);var g=c,E=r.K;E&&g.setTimeout(E),g.B&&(pE(g),ch(g)),r.g=c}else KM(r);0<t.l.length&&PC(t)}else"stop"!=I[0]&&"close"!=I[0]||Ep(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?Ep(t,7):yp(t):"noop"!=I[0]&&t.j&&t.j.wa(I),t.A=0)}up(4)}catch(I){}}function IC(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Um(n)||"string"==typeof n)KI(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Um(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function UM(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Um(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function hp(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof hp)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function i_(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];xc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)xc(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function xc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Je=lp.prototype).setTimeout=function(n){this.P=n},Je.gb=function(n){n=n.target;const e=this.L;e&&3==Hi(n)?e.l():this.Ia(n)},Je.Ia=function(n){try{if(n==this.g)e:{const S=Hi(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>S)&&(3!=S||zv||this.g&&(this.h.h||this.g.ga()||o_(this.g)))){this.I||4!=S||7==e||up(8==e||0>=M?3:2),pE(this);var t=this.g.ba();this.N=t;t:if(EC(this)){var r=o_(this.g);n="";var o=r.length,u=4==Hi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){dh(this),r_(this);var c="";break t}this.h.i=new Et.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function _A(n,e,t,r,o,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,E=this.g;if((g=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$m(g)){var I=g;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,fs(12),dh(this),r_(this);break e}Ac(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,wC(this,t)}this.U?(n_(this,S,c),zv&&this.i&&3==S&&(gA(this.V,this.W,"tick",this.fb),this.W.start())):(Ac(this.j,this.m,c,null),wC(this,c)),4==S&&dh(this),this.i&&!this.I&&(4==S?YM(this.l,this):(this.i=!1,ch(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,fs(12)):(this.o=0,fs(13)),dh(this),r_(this)}}}catch(S){}},Je.fb=function(){if(this.g){var n=Hi(this.g),e=this.g.ga();this.C<e.length&&(pE(this),n_(this,n,e),this.i&&4!=n&&ch(this))}},Je.cancel=function(){this.I=!0,dh(this)},Je.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Jm(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(up(3),fs(17)),dh(this),this.o=2,r_(this)):fE(this,this.Y-n)},(Je=hp.prototype).R=function(){i_(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Je.T=function(){return i_(this),this.g.concat()},Je.get=function(n,e){return xc(this.h,n)?this.h[n]:e},Je.set=function(n,e){xc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Je.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var CC=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Mc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Mc){this.g=void 0!==e?e:n.g,fp(this,n.j),this.s=n.s,pp(this,n.i),s_(this,n.m),this.l=n.l,e=n.h;var t=new mp;t.i=e.i,e.g&&(t.g=new hp(e.g),t.h=e.h),DC(this,t),this.o=n.o}else n&&(t=String(n).match(CC))?(this.g=!!e,fp(this,t[1]||"",!0),this.s=vl(t[2]||""),pp(this,t[3]||"",!0),s_(this,t[4]),this.l=vl(t[5]||"",!0),DC(this,t[6]||"",!0),this.o=vl(t[7]||"")):(this.g=!!e,this.h=new mp(null,this.g))}function ya(n){return new Mc(n)}function fp(n,e,t){n.j=t?vl(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function pp(n,e,t){n.i=t?vl(e,!0):e}function s_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function DC(n,e,t){e instanceof mp?(n.h=e,function GM(n,e){e&&!n.j&&(El(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(AC(this,r),xC(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=gp(e,DA)),n.h=new mp(e,n.g))}function Cn(n,e,t){n.h.set(e,t)}function Nc(n){return Cn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function vl(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function gp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,IA),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function IA(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Mc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(gp(e,TC,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(gp(e,TC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(gp(t,"/"==t.charAt(0)?HM:CA,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",gp(t,bA)),n.join("")};var TC=/[#\/\?@]/g,CA=/[#\?:]/g,HM=/[#\?]/g,DA=/[#\?@]/g,bA=/#/g;function mp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function El(n){n.g||(n.g=new hp,n.h=0,n.i&&function wA(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function AC(n,e){El(n),e=hh(n,e),xc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,xc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&i_(n)))}function SC(n,e){return El(n),e=hh(n,e),xc(n.g.h,e)}function xC(n,e,t){AC(n,e),0<t.length&&(n.i=null,n.g.set(hh(n,e),ZI(t)),n.h+=t.length)}function hh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function TA(n){this.l=n||WM,n=Et.PerformanceNavigationTiming?0<(n=Et.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Et.g&&Et.g.Ea&&Et.g.Ea()&&Et.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Je=mp.prototype).add=function(n,e){El(this),this.i=null,n=hh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Je.forEach=function(n,e){El(this),this.g.forEach(function(t,r){KI(t,function(o){n.call(e,o,r,this)},this)},this)},Je.T=function(){El(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Je.R=function(n){El(this);var e=[];if("string"==typeof n)SC(this,n)&&(e=Gm(e,this.g.get(hh(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Gm(e,n[t])}return e},Je.set=function(n,e){return El(this),this.i=null,SC(this,n=hh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Je.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Je.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=o;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var WM=10;function AA(n){return!!n.h||!!n.g&&n.g.size>=n.j}function MC(n){return n.h?1:n.g?n.g.size:0}function NC(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function RC(n,e){n.g?n.g.add(e):n.h=e}function SA(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function xA(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return ZI(n.i)}function i(){}function s(){this.g=new i}function a(n,e,t){const r=t||"";try{IC(n,function(o,u){let c=o;Xf(o)&&(c=tE(o)),e.push(r+u+"="+encodeURIComponent(c))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function d(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function p(n){this.l=n.$b||null,this.j=n.ib||!1}function y(n,e){Lr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=w,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}TA.prototype.cancel=function(){if(this.i=xA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},i.prototype.stringify=function(n){return Et.JSON.stringify(n,void 0)},i.prototype.parse=function(n){return Et.JSON.parse(n,void 0)},Fr(p,cE),p.prototype.g=function(){return new y(this.l,this.j)},p.prototype.i=function(n){return function(){return n}}({}),Fr(y,Lr);var w=0;function C(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function A(n){n.readyState=4,n.l=null,n.j=null,n.A=null,N(n)}function N(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Je=y.prototype).open=function(n,e){if(this.readyState!=w)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,N(this)},Je.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Et).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,A(this)),this.readyState=w},Je.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,N(this)),this.g&&(this.readyState=3,N(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Et.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;C(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Je.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?A(this):N(this),3==this.readyState&&C(this)}},Je.Ua=function(n){this.g&&(this.response=this.responseText=n,A(this))},Je.Ta=function(n){this.g&&(this.response=n,A(this))},Je.ha=function(){this.g&&A(this)},Je.setRequestHeader=function(n,e){this.v.append(n,e)},Je.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Je.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(y.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var k=Et.JSON.parse;function U(n){Lr.call(this),this.headers=new hp,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Z,this.K=this.L=!1}Fr(U,Lr);var Z="",pe=/^https?$/i,Fe=["POST","PUT"];function et(n){return"content-type"==n.toLowerCase()}function be(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,dt(n),qt(n)}function dt(n){n.D||(n.D=!0,br(n,"complete"),br(n,"error"))}function Pt(n){if(n.h&&void 0!==Bv&&(!n.C[1]||4!=Hi(n)||2!=n.ba()))if(n.v&&4==Hi(n))Qm(n.Fa,0,n);else if(br(n,"readystatechange"),4==Hi(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(CC)[1]||null;if(!o&&Et.self&&Et.self.location){var u=Et.self.location.protocol;o=u.substr(0,u.length-1)}r=!pe.test(o?o.toLowerCase():"")}t=r}if(t)br(n,"complete"),br(n,"success");else{n.m=6;try{var c=2<Hi(n)?n.g.statusText:""}catch(E){c=""}n.j=c+" ["+n.ba()+"]",dt(n)}}finally{qt(n)}}}function qt(n,e){if(n.g){ps(n);const t=n.g,r=n.C[0]?Bm:null;n.g=null,n.C=null,e||br(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function ps(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Et.clearTimeout(n.A),n.A=null)}function Hi(n){return n.g?n.g.readyState:0}function o_(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Z:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function _p(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function gE(n){let e="";return Wv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Cn(n,e,t))}function Rc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function a_(n){this.za=0,this.l=[],this.h=new op,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Rc("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Rc("baseRetryDelayMs",5e3,n),this.$a=Rc("retryDelaySeedMs",1e4,n),this.Ya=Rc("forwardChannelMaxRetries",2,n),this.ra=Rc("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new TA(n&&n.concurrentRequestLimit),this.Ca=new s,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function yp(n){if(u_(n),3==n.G){var e=n.V++,t=ya(n.F);Cn(t,"SID",n.J),Cn(t,"RID",e),Cn(t,"TYPE","terminate"),mE(n,t),(e=new lp(n,n.h,e,void 0)).K=2,e.v=Nc(ya(t)),t=!1,Et.navigator&&Et.navigator.sendBeacon&&(t=Et.navigator.sendBeacon(e.v.toString(),"")),!t&&Et.Image&&((new Image).src=e.v,t=!0),t||(e.g=eN(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ch(e)}JM(n)}function fh(n){n.g&&(NA(n),n.g.cancel(),n.g=null)}function u_(n){fh(n),n.u&&(Et.clearTimeout(n.u),n.u=null),OC(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Et.clearTimeout(n.m),n.m=null)}function vp(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&PC(n)}function PC(n){AA(n.i)||n.m||(n.m=!0,Ym(n.Ha,n),n.C=0)}function qM(n,e){var t;t=e?e.m:n.V++;const r=ya(n.F);Cn(r,"SID",n.J),Cn(r,"RID",t),Cn(r,"AID",n.U),mE(n,r),n.o&&n.s&&_p(r,n.o,n.s),t=new lp(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=zM(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),RC(n.i,t),dp(t,r,e)}function mE(n,e){n.j&&IC({},function(t,r){Cn(e,r,t)})}function zM(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Dr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=o[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let g=!0;for(let E=0;E<t;E++){let I=o[E].h;const S=o[E].g;if(I-=u,0>I)u=Math.max(0,o[E].h-100),g=!1;else try{a(S,c,"req"+I+"_")}catch(M){r&&r(S)}}if(g){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function KM(n){n.g||n.u||(n.Y=1,Ym(n.Ga,n),n.A=0)}function MA(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=lh(Dr(n.Ga,n),QM(n,n.A)),n.A++,0))}function NA(n){null!=n.B&&(Et.clearTimeout(n.B),n.B=null)}function ZM(n){n.g=new lp(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ya(n.oa);Cn(e,"RID","rpc"),Cn(e,"SID",n.J),Cn(e,"CI",n.N?"0":"1"),Cn(e,"AID",n.U),mE(n,e),Cn(e,"TYPE","xmlhttp"),n.o&&n.s&&_p(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Nc(ya(e)),t.s=null,t.U=!0,t_(t,n)}function OC(n){null!=n.v&&(Et.clearTimeout(n.v),n.v=null)}function YM(n,e){var t=null;if(n.g==e){OC(n),NA(n),n.g=null;var r=2}else{if(!NC(n.i,e))return;t=e.D,SA(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;br(r=ap(),new yA(r,t,e,o)),PC(n)}else KM(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function gO(n,e){return!(MC(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=lh(Dr(n.Ha,n,e),QM(n,n.C)),n.C++,0)))}(n,e)||2==r&&MA(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Ep(n,5);break;case 4:Ep(n,10);break;case 3:Ep(n,6);break;default:Ep(n,2)}}function QM(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ep(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Dr(n.jb,n);t||(t=new Mc("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||fp(t,"https"),Nc(t)),function l(n,e){const t=new op;if(Et.Image){const r=new Image;r.onload=Uv(d,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Uv(d,t,r,"TestLoadImage: error",!1,e),r.onabort=Uv(d,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Uv(d,t,r,"TestLoadImage: timeout",!1,e),Et.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else fs(2);n.G=0,n.j&&n.j.va(e),JM(n),u_(n)}function JM(n){n.G=0,n.I=-1,n.j&&((0!=xA(n.i).length||0!=n.l.length)&&(n.i.i.length=0,ZI(n.l),n.l.length=0),n.j.ua())}function XM(n,e,t){let r=function jM(n){return n instanceof Mc?ya(n):new Mc(n,void 0)}(t);if(""!=r.i)e&&pp(r,e+"."+r.i),s_(r,r.m);else{const o=Et.location;r=function bC(n,e,t,r){var o=new Mc(null,void 0);return n&&fp(o,n),e&&pp(o,e),t&&s_(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Wv(n.aa,function(o,u){Cn(r,u,o)}),t=n.sa,(e=n.D)&&t&&Cn(r,e,t),Cn(r,"VER",n.ma),mE(n,r),r}function eN(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new U(t&&n.Ba&&!n.qa?new p({ib:!0}):n.qa)).L=n.H,e}function tN(){}function kC(){if(Tc&&!(10<=Number(VM)))throw Error("Environmental error: no available transport.")}function Oo(n,e){Lr.call(this),this.g=new a_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!$m(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$m(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new l_(this)}function nN(n){mC.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function rN(){_C.call(this),this.status=1}function l_(n){this.g=n}(Je=U.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():dE.g(),this.C=function vA(n){return n.h||(n.h=n.i())}(this.u?this.u:dE),this.g.onreadystatechange=Dr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void be(this,u)}n=t||"";const o=new hp(this.headers);r&&IC(r,function(u,c){o.set(c,u)}),r=function Hv(n){e:{var e=et;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Et.FormData&&n instanceof Et.FormData,!(0<=jv(Fe,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ps(this),0<this.B&&((this.K=function je(n){return Tc&&function LM(){return function XI(n){var e=FM;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=YI(String(Kv)).split("."),t=YI("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var o=e[c]||"",u=t[c]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Wm(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Wm(0==o[2].length,0==u[2].length)||Wm(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dr(this.pa,this)):this.A=Qm(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){be(this,u)}},Je.pa=function(){void 0!==Bv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,br(this,"timeout"),this.abort(8))},Je.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,br(this,"complete"),br(this,"abort"),qt(this))},Je.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qt(this,!0)),U.Z.M.call(this)},Je.Fa=function(){this.s||(this.F||this.v||this.l?Pt(this):this.cb())},Je.cb=function(){Pt(this)},Je.ba=function(){try{return 2<Hi(this)?this.g.status:-1}catch(n){return-1}},Je.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Je.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),k(e)}},Je.Da=function(){return this.m},Je.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Je=a_.prototype).ma=8,Je.G=1,Je.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Je.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new lp(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=QI(u),JI(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=zM(this,o,e),Cn(t=ya(this.F),"RID",n),Cn(t,"CVER",22),this.D&&Cn(t,"X-HTTP-Session-Id",this.D),mE(this,t),this.o&&u&&_p(t,this.o,u),RC(this.i,o),this.Ra&&Cn(t,"TYPE","init"),this.ja?(Cn(t,"$req",e),Cn(t,"SID","null"),o.$=!0,dp(o,t,null)):dp(o,t,e),this.G=2}}else 3==this.G&&(n?qM(this,n):0==this.l.length||AA(this.i)||qM(this))},Je.Ga=function(){if(this.u=null,ZM(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=lh(Dr(this.bb,this),n)}},Je.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,fs(10),fh(this),ZM(this))},Je.ab=function(){null!=this.v&&(this.v=null,fh(this),MA(this),fs(19))},Je.jb=function(n){n?(this.h.info("Successfully pinged google.com"),fs(2)):(this.h.info("Failed to ping google.com"),fs(1))},(Je=tN.prototype).xa=function(){},Je.wa=function(){},Je.va=function(){},Je.ua=function(){},Je.Oa=function(){},kC.prototype.g=function(n,e){return new Oo(n,e)},Fr(Oo,Lr),Oo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Ym(Dr(n.hb,n,e))),fs(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=XM(n,null,n.W),PC(n)},Oo.prototype.close=function(){yp(this.g)},Oo.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,vp(this.g,e)}else this.v?((e={}).__data__=tE(n),vp(this.g,e)):vp(this.g,n)},Oo.prototype.M=function(){this.g.j=null,delete this.j,yp(this.g),delete this.g,Oo.Z.M.call(this)},Fr(nN,mC),Fr(rN,_C),Fr(l_,tN),l_.prototype.xa=function(){br(this.g,"a")},l_.prototype.wa=function(n){br(this.g,new nN(n))},l_.prototype.va=function(n){br(this.g,new rN(n))},l_.prototype.ua=function(){br(this.g,"b")},kC.prototype.createWebChannel=kC.prototype.g,Oo.prototype.send=Oo.prototype.u,Oo.prototype.open=Oo.prototype.m,Oo.prototype.close=Oo.prototype.close,Xm.NO_ERROR=0,Xm.TIMEOUT=8,Xm.HTTP_ERROR=6,gC.COMPLETE="complete",EA.EventType=e_,e_.OPEN="a",e_.CLOSE="b",e_.ERROR="c",e_.MESSAGE="d",Lr.prototype.listen=Lr.prototype.N,U.prototype.listenOnce=U.prototype.O,U.prototype.getLastError=U.prototype.La,U.prototype.getLastErrorCode=U.prototype.Da,U.prototype.getStatus=U.prototype.ba,U.prototype.getResponseJson=U.prototype.Qa,U.prototype.getResponseText=U.prototype.ga,U.prototype.send=U.prototype.ea;var mO=ml.createWebChannelTransport=function(){return new kC},_O=ml.getStatEventTarget=function(){return ap()},RA=ml.ErrorCode=Xm,yO=ml.EventType=gC,vO=ml.Event=yl,iN=ml.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},EO=ml.FetchXmlHttpFactory=p,FC=ml.WebChannel=EA,wO=ml.XhrIo=U;const sN="@firebase/firestore";class Gi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gi.UNAUTHENTICATED=new Gi(null),Gi.GOOGLE_CREDENTIALS=new Gi("google-credentials-uid"),Gi.FIRST_PARTY=new Gi("first-party-uid"),Gi.MOCK_USER=new Gi("mock-user");let c_="9.6.7";const ph=new ln.Yd("@firebase/firestore");function PA(){return ph.logLevel}function Be(n,...e){if(ph.logLevel<=ln.in.DEBUG){const t=e.map(OA);ph.debug(`Firestore (${c_}): ${n}`,...t)}}function Vr(n,...e){if(ph.logLevel<=ln.in.ERROR){const t=e.map(OA);ph.error(`Firestore (${c_}): ${n}`,...t)}}function _E(n,...e){if(ph.logLevel<=ln.in.WARN){const t=e.map(OA);ph.warn(`Firestore (${c_}): ${n}`,...t)}}function OA(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${c_}) INTERNAL ASSERTION FAILED: `+n;throw Vr(e),new Error(e)}function bt(n,e){n||lt()}function Ke(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class di{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class oN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gi.UNAUTHENTICATED))}shutdown(){}}class bO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class TO{constructor(e){this.t=e,this.currentUser=Gi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=I=>this.i!==o?(o=this.i,t(I)):Promise.resolve();let c=new di;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new di,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const I=c;e.enqueueRetryable((0,de.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},E=I=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(I=>E(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?E(I):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new di)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt("string"==typeof r.accessToken),new oN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new Gi(e)}}class AO{constructor(e,t,r){this.type="FirstParty",this.user=Gi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class SO{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new AO(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Gi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xO{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Be("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt("string"==typeof t.token),this.p=t.token,new aN(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ko{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function MO(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ko.A=-1;class uN{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=MO(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Ht(n,e){return n<e?-1:n>e?1:0}function d_(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function lN(n){return n+"\0"}class hi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hi.fromMillis(Date.now())}static fromDate(e){return hi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new hi(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wt(e)}static min(){return new wt(new hi(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function cN(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function dN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class yE{constructor(e,t,r){void 0===t?t=0:t>e.length&&lt(),void 0===r?r=e.length-t:r>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===yE.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yE?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),c=t.get(o);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cn extends yE{construct(e,t,r){return new cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new cn(t)}static emptyPath(){return new cn([])}}const NO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fi extends yE{construct(e,t,r){return new fi(e,t,r)}static isValidIdentifier(e){return NO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fi(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Pe(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new Pe(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new Pe(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===g?(c=!c,o++):"."!==g||c?(r+=g,o++):(u(),o++)}if(u(),c)throw new Pe(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fi(t)}static emptyPath(){return new fi([])}}class h_{constructor(e){this.fields=e,e.sort(fi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return d_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ri{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ri(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new ri(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ri.EMPTY_BYTE_STRING=new ri("");const PO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gh(n){if(bt(!!n),"string"==typeof n){let e=0;const t=PO.exec(n);if(bt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fr(n.seconds),nanos:fr(n.nanos)}}function fr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ip(n){return"string"==typeof n?ri.fromBase64String(n):ri.fromUint8Array(n)}function kA(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function hN(n){const e=n.mapValue.fields.__previous_value__;return kA(e)?hN(e):e}function vE(n){const e=gh(n.mapValue.fields.__local_write_time__.timestampValue);return new hi(e.seconds,e.nanos)}class OO{constructor(e,t,r,o,u,c,g,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=g,this.useFetchStreams=E}}class Cp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Cp("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Cp&&e.projectId===this.projectId&&e.database===this.database}}function Dp(n){return null==n}function EE(n){return 0===n&&1/n==-1/0}function fN(n){return"number"==typeof n&&Number.isInteger(n)&&!EE(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class tt{constructor(e){this.path=e}static fromPath(e){return new tt(cn.fromString(e))}static fromName(e){return new tt(cn.fromString(e).popFirst(5))}static empty(){return new tt(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new cn(e.slice()))}}const kO={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function bp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kA(n)?4:10:lt()}function cu(n,e){if(n===e)return!0;const t=bp(n);if(t!==bp(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vE(n).isEqual(vE(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=gh(r.timestampValue),c=gh(o.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Ip(n.bytesValue).isEqual(Ip(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return fr(r.geoPointValue.latitude)===fr(o.geoPointValue.latitude)&&fr(r.geoPointValue.longitude)===fr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return fr(r.integerValue)===fr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=fr(r.doubleValue),c=fr(o.doubleValue);return u===c?EE(u)===EE(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return d_(n.arrayValue.values||[],e.arrayValue.values||[],cu);case 10:return function(r,o){const u=r.mapValue.fields||{},c=o.mapValue.fields||{};if(cN(u)!==cN(c))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===c[g]||!cu(u[g],c[g])))return!1;return!0}(n,e);default:return lt()}var o}function wE(n,e){return void 0!==(n.values||[]).find(t=>cu(t,e))}function f_(n,e){if(n===e)return 0;const t=bp(n),r=bp(e);if(t!==r)return Ht(t,r);switch(t){case 0:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return function(o,u){const c=fr(o.integerValue||o.doubleValue),g=fr(u.integerValue||u.doubleValue);return c<g?-1:c>g?1:c===g?0:isNaN(c)?isNaN(g)?0:-1:1}(n,e);case 3:return pN(n.timestampValue,e.timestampValue);case 4:return pN(vE(n),vE(e));case 5:return Ht(n.stringValue,e.stringValue);case 6:return function(o,u){const c=Ip(o),g=Ip(u);return c.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const c=o.split("/"),g=u.split("/");for(let E=0;E<c.length&&E<g.length;E++){const I=Ht(c[E],g[E]);if(0!==I)return I}return Ht(c.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const c=Ht(fr(o.latitude),fr(u.latitude));return 0!==c?c:Ht(fr(o.longitude),fr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const c=o.values||[],g=u.values||[];for(let E=0;E<c.length&&E<g.length;++E){const I=f_(c[E],g[E]);if(I)return I}return Ht(c.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const c=o.fields||{},g=Object.keys(c),E=u.fields||{},I=Object.keys(E);g.sort(),I.sort();for(let S=0;S<g.length&&S<I.length;++S){const M=Ht(g[S],I[S]);if(0!==M)return M;const F=f_(c[g[S]],E[I[S]]);if(0!==F)return F}return Ht(g.length,I.length)}(n.mapValue,e.mapValue);default:throw lt()}}function pN(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ht(n,e);const t=gh(n),r=gh(e),o=Ht(t.seconds,r.seconds);return 0!==o?o:Ht(t.nanos,r.nanos)}function p_(n){return FA(n)}function FA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=gh(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ip(n.bytesValue).toBase64():"referenceValue"in n?tt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const c of r.values||[])u?u=!1:o+=",",o+=FA(c);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const g of o)c?c=!1:u+=",",u+=`${g}:${FA(r.fields[g])}`;return u+"}"}(n.mapValue):lt();var e}function LC(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function LA(n){return!!n&&"integerValue"in n}function VC(n){return!!n&&"arrayValue"in n}function gN(n){return!!n&&"nullValue"in n}function mN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function BC(n){return!!n&&"mapValue"in n}function IE(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return wp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=IE(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=IE(n.arrayValue.values[t]);return e}return Object.assign({},n)}class gs{constructor(e){this.value=e}static empty(){return new gs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!BC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=IE(t)}setAll(e){let t=fi.emptyPath(),r={},o=[];e.forEach((c,g)=>{if(!t.isImmediateParentOf(g)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=g.popLast()}c?r[g.lastSegment()]=IE(c):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());BC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];BC(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){wp(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new gs(IE(this.value))}}function _N(n){const e=[];return wp(n.fields,(t,r)=>{const o=new fi([t]);if(BC(r)){const u=_N(r.mapValue).fields;if(0===u.length)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)}),new h_(e)}class sr{constructor(e,t,r,o,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=c}static newInvalidDocument(e){return new sr(e,0,wt.min(),wt.min(),gs.empty(),0)}static newFoundDocument(e,t,r){return new sr(e,1,t,wt.min(),r,0)}static newNoDocument(e,t){return new sr(e,2,t,wt.min(),gs.empty(),0)}static newUnknownDocument(e,t){return new sr(e,3,t,wt.min(),gs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}let VA=(()=>{class n{constructor(t,r,o,u){this.indexId=t,this.collectionGroup=r,this.fields=o,this.indexState=u}}return n.UNKNOWN_ID=-1,n})();class UC{constructor(e,t){this.fieldPath=e,this.kind=t}}class CE{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new CE(0,jC.min())}}class jC{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new jC(wt.min(),tt.empty(),-1)}}class FO{constructor(e,t=null,r=[],o=[],u=null,c=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=g,this.P=null}}function yN(n,e=null,t=[],r=[],o=null,u=null,c=null){return new FO(n,e,t,r,o,u,c)}function DE(n){const e=Ke(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+p_(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Dp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>p_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>p_(r)).join(",")),e.P=t}return e.P}function HC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!WO(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!cu(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!wN(n.startAt,e.startAt)&&wN(n.endAt,e.endAt)}function GC(n){return tt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Fs extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new VO(e,t,r):"array-contains"===t?new jO(e,r):"in"===t?new HO(e,r):"not-in"===t?new GO(e,r):"array-contains-any"===t?new $O(e,r):new Fs(e,t,r)}static v(e,t,r){return"in"===t?new BO(e,r):new UO(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(f_(t,this.value)):null!==t&&bp(this.value)===bp(t)&&this.V(f_(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class VO extends Fs{constructor(e,t,r){super(e,t,r),this.key=tt.fromName(r.referenceValue)}matches(e){const t=tt.comparator(e.key,this.key);return this.V(t)}}class BO extends Fs{constructor(e,t){super(e,"in",t),this.keys=vN(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class UO extends Fs{constructor(e,t){super(e,"not-in",t),this.keys=vN(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function vN(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>tt.fromName(r.referenceValue))}class jO extends Fs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return VC(t)&&wE(t.arrayValue,this.value)}}class HO extends Fs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wE(this.value.arrayValue,t)}}class GO extends Fs{constructor(e,t){super(e,"not-in",t)}matches(e){if(wE(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wE(this.value.arrayValue,t)}}class $O extends Fs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!VC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wE(this.value.arrayValue,r))}}class g_{constructor(e,t){this.position=e,this.inclusive=t}}class m_{constructor(e,t="asc"){this.field=e,this.dir=t}}function WO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function EN(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],c=n.position[o];if(r=u.field.isKeyField()?tt.comparator(tt.fromName(c.referenceValue),t.key):f_(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function wN(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!cu(n.position[t],e.position[t]))return!1;return!0}class Pc{constructor(e,t=null,r=[],o=[],u=null,c="F",g=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=g,this.endAt=E,this.D=null,this.C=null}}function IN(n,e,t,r,o,u,c,g){return new Pc(n,e,t,r,o,u,c,g)}function __(n){return new Pc(n)}function $C(n){return!Dp(n.limit)&&"F"===n.limitType}function WC(n){return!Dp(n.limit)&&"L"===n.limitType}function BA(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function UA(n){for(const e of n.filters)if(e.S())return e.field;return null}function jA(n){return null!==n.collectionGroup}function y_(n){const e=Ke(n);if(null===e.D){e.D=[];const t=UA(e),r=BA(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new m_(t)),e.D.push(new m_(fi.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new m_(fi.keyField(),u))}}}return e.D}function va(n){const e=Ke(n);if(!e.C)if("F"===e.limitType)e.C=yN(e.path,e.collectionGroup,y_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of y_(e))t.push(new m_(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new g_(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new g_(e.startAt.position,!e.startAt.inclusive):null;e.C=yN(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function CN(n,e,t){return new Pc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bE(n,e){return HC(va(n),va(e))&&n.limitType===e.limitType}function DN(n){return`${DE(va(n))}|lt:${n.limitType}`}function HA(n){return`Query(target=${function LO(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${p_(r.value)}`;var r}).join(", ")}]`),Dp(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>p_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>p_(t)).join(",")),`Target(${e})`}(va(n))}; limitType=${n.limitType})`}function GA(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):tt.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,c){const g=EN(o,u,c);return o.inclusive?g<=0:g<0}(t.startAt,y_(t),r)||t.endAt&&!function(o,u,c){const g=EN(o,u,c);return o.inclusive?g>=0:g>0}(t.endAt,y_(t),r)));var t,r}function bN(n){return(e,t)=>{let r=!1;for(const o of y_(n)){const u=qO(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function qO(n,e,t){const r=n.field.isKeyField()?tt.comparator(e.key,t.key):function(o,u,c){const g=u.data.field(o),E=c.data.field(o);return null!==g&&null!==E?f_(g,E):lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}function TN(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:EE(e)?"-0":e}}function AN(n){return{integerValue:""+n}}function SN(n,e){return fN(e)?AN(e):TN(n,e)}class qC{constructor(){this._=void 0}}function zO(n,e,t){return n instanceof v_?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Tp?MN(n,e):n instanceof Ap?NN(n,e):function(r,o){const u=xN(r,o),c=RN(u)+RN(r.k);return LA(u)&&LA(r.k)?AN(c):TN(r.O,c)}(n,e)}function KO(n,e,t){return n instanceof Tp?MN(n,e):n instanceof Ap?NN(n,e):t}function xN(n,e){return n instanceof E_?LA(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class v_ extends qC{}class Tp extends qC{constructor(e){super(),this.elements=e}}function MN(n,e){const t=PN(e);for(const r of n.elements)t.some(o=>cu(o,r))||t.push(r);return{arrayValue:{values:t}}}class Ap extends qC{constructor(e){super(),this.elements=e}}function NN(n,e){let t=PN(e);for(const r of n.elements)t=t.filter(o=>!cu(o,r));return{arrayValue:{values:t}}}class E_ extends qC{constructor(e,t){super(),this.O=e,this.k=t}}function RN(n){return fr(n.integerValue||n.doubleValue)}function PN(n){return VC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class TE{constructor(e,t){this.field=e,this.transform=t}}class YO{constructor(e,t){this.version=e,this.transformResults=t}}class Br{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Br}static exists(e){return new Br(void 0,e)}static updateTime(e){return new Br(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class KC{}function QO(n,e,t){n instanceof AE?function(r,o,u){const c=r.value.clone(),g=LN(r.fieldTransforms,o,u.transformResults);c.setAll(g),o.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Sp?function(r,o,u){if(!zC(r.precondition,o))return void o.convertToUnknownDocument(u.version);const c=LN(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(FN(r)),g.setAll(c),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function $A(n,e,t){var o;n instanceof AE?function(r,o,u){if(!zC(r.precondition,o))return;const c=r.value.clone(),g=VN(r.fieldTransforms,u,o);c.setAll(g),o.convertToFoundDocument(kN(o),c).setHasLocalMutations()}(n,e,t):n instanceof Sp?function(r,o,u){if(!zC(r.precondition,o))return;const c=VN(r.fieldTransforms,u,o),g=o.data;g.setAll(FN(r)),g.setAll(c),o.convertToFoundDocument(kN(o),g).setHasLocalMutations()}(n,e,t):zC(n.precondition,o=e)&&o.convertToNoDocument(wt.min())}function JO(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=xN(r.transform,o||null);null!=u&&(null==t&&(t=gs.empty()),t.set(r.field,u))}return t||null}function ON(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&d_(t,r,(o,u)=>function ZO(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Tp&&r instanceof Tp||t instanceof Ap&&r instanceof Ap?d_(t.elements,r.elements,cu):t instanceof E_&&r instanceof E_?cu(t.k,r.k):t instanceof v_&&r instanceof v_);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function kN(n){return n.isFoundDocument()?n.version:wt.min()}class AE extends KC{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Sp extends KC{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function FN(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function LN(n,e,t){const r=new Map;bt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],c=u.transform,g=e.data.field(u.field);r.set(u.field,KO(c,g,t[o]))}return r}function VN(n,e,t){const r=new Map;for(const o of n){const u=o.transform,c=t.data.field(o.field);r.set(o.field,zO(u,c,e))}return r}class SE extends KC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class WA extends KC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class XO{constructor(e){this.count=e}}var Ur,Xt;function BN(n){switch(n){default:return lt();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function UN(n){if(void 0===n)return Vr("GRPC error has no .code"),ue.UNKNOWN;switch(n){case Ur.OK:return ue.OK;case Ur.CANCELLED:return ue.CANCELLED;case Ur.UNKNOWN:return ue.UNKNOWN;case Ur.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Ur.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Ur.INTERNAL:return ue.INTERNAL;case Ur.UNAVAILABLE:return ue.UNAVAILABLE;case Ur.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Ur.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Ur.NOT_FOUND:return ue.NOT_FOUND;case Ur.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Ur.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Ur.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Ur.ABORTED:return ue.ABORTED;case Ur.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Ur.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Ur.DATA_LOSS:return ue.DATA_LOSS;default:return lt()}}(Xt=Ur||(Ur={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";class Tr{constructor(e,t){this.comparator=e,this.root=t||$i.EMPTY}insert(e,t){return new Tr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$i.BLACK,null,null))}remove(e){return new Tr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$i.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ZC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ZC(this.root,e,this.comparator,!1)}getReverseIterator(){return new ZC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ZC(this.root,e,this.comparator,!0)}}class ZC{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $i{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:$i.RED,this.left=null!=o?o:$i.EMPTY,this.right=null!=u?u:$i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new $i(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $i.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return $i.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}$i.EMPTY=null,$i.RED=!0,$i.BLACK=!1,$i.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new $i(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kn{constructor(e){this.comparator=e,this.data=new Tr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jN(this.data.getIterator())}getIteratorFrom(e){return new jN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Kn(this.comparator);return t.data=e,t}}class jN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function w_(n){return n.hasNext()?n.getNext():void 0}const ek=new Tr(tt.comparator);function Ea(){return ek}const tk=new Tr(tt.comparator);function qA(){return tk}const nk=new Tr(tt.comparator),rk=new Kn(tt.comparator);function mn(...n){let e=rk;for(const t of n)e=e.add(t);return e}const ik=new Kn(Ht);function YC(){return ik}class xE{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,ME.createSynthesizedTargetChangeForCurrentChange(e,t)),new xE(wt.min(),r,YC(),Ea(),mn())}}class ME{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new ME(ri.EMPTY_BYTE_STRING,t,mn(),mn(),mn())}}class QC{constructor(e,t,r,o){this.M=e,this.removedTargetIds=t,this.key=r,this.$=o}}class HN{constructor(e,t){this.targetId=e,this.F=t}}class GN{constructor(e,t,r=ri.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class $N{constructor(){this.B=0,this.L=qN(),this.U=ri.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=mn(),t=mn(),r=mn();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:lt()}}),new ME(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=qN()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class sk{constructor(e){this.nt=e,this.st=new Map,this.it=Ea(),this.rt=WN(),this.ot=new Kn(Ht)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.F.count,o=this.wt(t);if(o){const u=o.target;if(GC(u))if(0===r){const c=new tt(u.path);this.at(t,c,sr.newNoDocument(c,wt.min()))}else bt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const g=this.wt(c);if(g){if(u.current&&GC(g.target)){const E=new tt(g.target.path);null!==this.it.get(E)||this.It(c,E)||this.at(c,E,sr.newNoDocument(E,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=mn();this.rt.forEach((u,c)=>{let g=!0;c.forEachWhile(E=>{const I=this.wt(E);return!I||2===I.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const o=new xE(e,t,this.ot,this.it,r);return this.it=Ea(),this.rt=WN(),this.ot=new Kn(Ht),o}ut(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new $N,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new Kn(Ht),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new $N),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function WN(){return new Tr(tt.comparator)}function qN(){return new Tr(tt.comparator)}const ok={asc:"ASCENDING",desc:"DESCENDING"},ak={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class uk{constructor(e,t){this.databaseId=e,this.N=t}}function NE(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zN(n,e){return n.N?e.toBase64():e.toUint8Array()}function lk(n,e){return NE(n,e.toTimestamp())}function pi(n){return bt(!!n),wt.fromTimestamp(function(e){const t=gh(e);return new hi(t.seconds,t.nanos)}(n))}function zA(n,e){return(t=n,new cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function KN(n){const e=cn.fromString(n);return bt(rR(e)),e}function RE(n,e){return zA(n.databaseId,e.path)}function wl(n,e){const t=KN(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tt(YN(t))}function KA(n,e){return zA(n.databaseId,e)}function ZN(n){const e=KN(n);return 4===e.length?cn.emptyPath():YN(e)}function PE(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function YN(n){return bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function QN(n,e,t){return{name:RE(n,e),fields:t.value.mapValue.fields}}function JN(n,e,t){const r=wl(n,e.name),o=pi(e.updateTime),u=new gs({mapValue:{fields:e.fields}}),c=sr.newFoundDocument(r,o,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function OE(n,e){let t;if(e instanceof AE)t={update:QN(n,e.key,e.value)};else if(e instanceof SE)t={delete:RE(n,e.key)};else if(e instanceof Sp)t={update:QN(n,e.key,e.data),updateMask:yk(e.fieldMask)};else{if(!(e instanceof WA))return lt();t={verify:RE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const c=u.transform;if(c instanceof v_)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Tp)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ap)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof E_)return{fieldPath:u.field.canonicalString(),increment:c.k};throw lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:lk(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:lt()),t;var o}function ZA(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Br.updateTime(pi(o.updateTime)):void 0!==o.exists?Br.exists(o.exists):Br.none():Br.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,c){let g=null;"setToServerValue"in c?(bt("REQUEST_TIME"===c.setToServerValue),g=new v_):"appendMissingElements"in c?g=new Tp(c.appendMissingElements.values||[]):"removeAllFromArray"in c?g=new Ap(c.removeAllFromArray.values||[]):"increment"in c?g=new E_(u,c.increment):lt();const E=fi.fromServerFormat(c.fieldPath);return new TE(E,g)}(n,o)):[];var o;if(e.update){const o=wl(n,e.update.name),u=new gs({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new h_((e.updateMask.fieldPaths||[]).map(I=>fi.fromServerFormat(I)));return new Sp(o,u,c,t,r)}return new AE(o,u,t,r)}if(e.delete){const o=wl(n,e.delete);return new SE(o,t)}if(e.verify){const o=wl(n,e.verify);return new WA(o,t)}return lt()}function XN(n,e){return{documents:[KA(n,e.path)]}}function eR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=KA(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=KA(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0===E.length)return;const I=E.map(S=>function(M){if("=="===M.op){if(mN(M.value))return{unaryFilter:{field:I_(M.field),op:"IS_NAN"}};if(gN(M.value))return{unaryFilter:{field:I_(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(mN(M.value))return{unaryFilter:{field:I_(M.field),op:"IS_NOT_NAN"}};if(gN(M.value))return{unaryFilter:{field:I_(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:I_(M.field),op:gk(M.op),value:M.value}}}(S));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(E){if(0!==E.length)return E.map(I=>{return{field:I_((S=I).field),direction:pk(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(I=e.limit,n.N||Dp(I)?I:{value:I});var I,g,E;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function tR(n){let e=ZN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){bt(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=nR(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new m_(C_((M=S).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let g=null;t.limit&&(g=function(S){let M;return M="object"==typeof S?S.value:S,Dp(M)?null:M}(t.limit));let E=null;var S;t.startAt&&(E=new g_((S=t.startAt).values||[],!!S.before));let I=null;return t.endAt&&(I=function(S){return new g_(S.values||[],!S.before)}(t.endAt)),IN(e,o,c,u,g,"F",E,I)}function nR(n){return n?void 0!==n.unaryFilter?[_k(n)]:void 0!==n.fieldFilter?[mk(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>nR(e)).reduce((e,t)=>e.concat(t)):lt():[]}function pk(n){return ok[n]}function gk(n){return ak[n]}function I_(n){return{fieldPath:n.canonicalString()}}function C_(n){return fi.fromServerFormat(n.fieldPath)}function mk(n){return Fs.create(C_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}function _k(n){switch(n.unaryFilter.op){case"IS_NAN":const e=C_(n.unaryFilter.field);return Fs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=C_(n.unaryFilter.field);return Fs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=C_(n.unaryFilter.field);return Fs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=C_(n.unaryFilter.field);return Fs.create(o,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}function yk(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function rR(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function gi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=iR(e)),e=vk(n.get(t),e);return iR(e)}function vk(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function iR(n){return n+"\x01\x01"}function Il(n){const e=n.length;if(bt(e>=2),2===e)return bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),cn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&lt(),n.charAt(c+1)){case"\x01":const g=n.substring(u,c);let E;0===o.length?E=g:(o+=g,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(u,c),o+="\0";break;case"\x11":o+=n.substring(u,c+1);break;default:lt()}u=c+2}return new cn(r)}class Ek{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Fo{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}Fo.store="owner",Fo.key="owner";class mh{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}mh.store="mutationQueues",mh.keyPath="userId";class Ln{constructor(e,t,r,o,u){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=o,this.mutations=u}}Ln.store="mutations",Ln.keyPath="batchId",Ln.userMutationsIndex="userMutationsIndex",Ln.userMutationsKeyPath=["userId","batchId"];class ms{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,gi(t)]}static key(e,t,r){return[e,gi(t),r]}}ms.store="documentMutations",ms.PLACEHOLDER=new ms;class wk{constructor(e,t){this.path=e,this.readTime=t}}class Ik{constructor(e,t){this.path=e,this.version=t}}class pr{constructor(e,t,r,o,u,c){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=o,this.readTime=u,this.parentPath=c}}pr.store="remoteDocuments",pr.readTimeIndex="readTimeIndex",pr.readTimeIndexPath="readTime",pr.collectionReadTimeIndex="collectionReadTimeIndex",pr.collectionReadTimeIndexPath=["parentPath","readTime"];class Cl{constructor(e){this.byteSize=e}}Cl.store="remoteDocumentGlobal",Cl.key="remoteDocumentGlobalKey";class oo{constructor(e,t,r,o,u,c,g){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=o,this.lastListenSequenceNumber=u,this.lastLimboFreeSnapshotVersion=c,this.query=g}}oo.store="targets",oo.keyPath="targetId",oo.queryTargetsIndexName="queryTargetsIndex",oo.queryTargetsKeyPath=["canonicalId","targetId"];class Wi{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}Wi.store="targetDocuments",Wi.keyPath=["targetId","path"],Wi.documentTargetsIndex="documentTargetsIndex",Wi.documentTargetsKeyPath=["path","targetId"];class Lo{constructor(e,t,r,o){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=o}}Lo.key="targetGlobalKey",Lo.store="targetGlobal";class xp{constructor(e,t){this.collectionId=e,this.parent=t}}xp.store="collectionParents",xp.keyPath=["collectionId","parent"];class Oc{constructor(e,t,r,o){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=o}}Oc.store="clientMetadata",Oc.keyPath="clientId";class D_{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}D_.store="bundles",D_.keyPath="bundleId";class b_{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}b_.store="namedQueries",b_.keyPath="name";class Vo{constructor(e,t,r){this.indexId=e,this.collectionGroup=t,this.fields=r}}Vo.store="indexConfiguration",Vo.keyPath="indexId",Vo.collectionGroupIndex="collectionGroupIndex",Vo.collectionGroupIndexPath="collectionGroup";class wa{constructor(e,t,r,o,u,c){this.indexId=e,this.uid=t,this.sequenceNumber=r,this.readTime=o,this.documentKey=u,this.largestBatchId=c}}wa.store="indexState",wa.keyPath=["indexId","uid"],wa.sequenceNumberIndex="sequenceNumberIndex",wa.sequenceNumberIndexPath=["uid","sequenceNumber"];class Ia{constructor(e,t,r,o,u){this.indexId=e,this.uid=t,this.arrayValue=r,this.directionalValue=o,this.documentKey=u}}Ia.store="indexEntries",Ia.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],Ia.documentKeyIndex="documentKeyIndex",Ia.documentKeyIndexPath=["indexId","uid","documentKey"];class mi{constructor(e,t,r,o,u,c){this.userId=e,this.collectionPath=t,this.documentId=r,this.collectionGroup=o,this.largestBatchId=u,this.overlayMutation=c}}mi.store="documentOverlays",mi.keyPath=["userId","collectionPath","documentId"],mi.collectionPathOverlayIndex="collectionPathOverlayIndex",mi.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],mi.collectionGroupOverlayIndex="collectionGroupOverlayIndex",mi.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const sR=[mh.store,Ln.store,ms.store,pr.store,oo.store,Fo.store,Lo.store,Wi.store,Oc.store,Cl.store,xp.store,D_.store,b_.store],oR=[...sR,mi.store],Ck=[...oR,Vo.store,wa.store,Ia.store],aR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,r)=>{t(e)})}static reject(e){return new fe((t,r)=>{r(e)})}static waitFor(e){return new fe((t,r)=>{let o=0,u=0,c=!1;e.forEach(g=>{++o,g.next(()=>{++u,c&&u===o&&t()},E=>r(E))}),c=!0,u===o&&t()})}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next(o=>o?fe.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class JC{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new di,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new kE(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=YA(r.target.error);this.At.reject(new kE(e,o))}}static open(e,t,r,o){try{return new JC(t,e.transaction(o,r))}catch(u){throw new kE(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new bk(t)}}class du{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===du.vt((0,P.z$)())&&Vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),Np(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!(0,P.hl)())return!1;if(du.St())return!0;const e=(0,P.z$)(),t=du.vt(e),r=0<t&&t<10,o=du.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static Nt(e,t){return e.store(t)}static vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}xt(e){var t=this;return(0,de.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{o(new kE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const g=c.target.error;o("VersionError"===g.name?new Pe(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Pe(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new kE(e,g))},u.onupgradeneeded=c=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.bt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Ot&&(t.db.onversionchange=r=>t.Ot(r)),t.db})()}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,de.Z)(function*(){const c="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.xt(e);const E=JC.open(u.db,e,c?"readonly":"readwrite",r),I=o(E).next(S=>(E.Pt(),S)).catch(S=>(E.abort(S),fe.reject(S))).toPromise();return I.catch(()=>{}),yield E.Rt,I}catch(E){const I="FirebaseError"!==E.name&&g<3;if(Be("SimpleDb","Transaction failed with error:",E.message,"Retrying:",I),u.close(),!I)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Dk{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return Np(this.$t.delete())}}class kE extends Pe{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Mp(n){return"IndexedDbTransactionError"===n.name}class bk{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Np(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),Np(this.store.add(e))}get(e){return Np(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),Np(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),Np(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(c,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new fe((u,c)=>{o.onerror=g=>{c(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}Gt(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,c,g)=>g.delete())}Qt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}Wt(e){const t=this.cursor({});return new fe((r,o)=>{t.onerror=u=>{const c=YA(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(g=>{g?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new fe((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const g=c.target.result;if(!g)return void o();const E=new Dk(g),I=t(g.primaryKey,g.value,E);if(I instanceof fe){const S=I.catch(M=>(E.done(),fe.reject(M)));r.push(S)}E.isDone?o():null===E.Lt?g.continue():g.continue(E.Lt)}}).next(()=>fe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Np(n){return new fe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=YA(r.target.error);t(o)}})}let lR=!1;function YA(n){const e=du.vt((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return lR||(lR=!0,setTimeout(()=>{throw r},0)),r}}return n}class cR extends uR{constructor(e,t){super(),this.zt=e,this.currentSequenceNumber=t}}function _i(n,e){const t=Ke(n);return du.Nt(t.zt,e)}class QA{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&QO(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&$A(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&$A(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(wt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mn())}isEqual(e){return this.batchId===e.batchId&&d_(this.mutations,e.mutations,(t,r)=>ON(t,r))&&d_(this.baseMutations,e.baseMutations,(t,r)=>ON(t,r))}}class JA{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){bt(e.mutations.length===r.length);let o=nk;const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new JA(e,t,r,o)}}class XA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class _h{constructor(e,t,r,o,u=wt.min(),c=wt.min(),g=ri.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=g}withSequenceNumber(e){return new _h(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new _h(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new _h(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class dR{constructor(e){this.Ht=e}}function hR(n,e){let t;if(e.document)t=JN(n.Ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=tt.fromSegments(e.noDocument.path),o=Pp(e.noDocument.readTime);t=sr.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return lt();{const r=tt.fromSegments(e.unknownDocument.path),o=Pp(e.unknownDocument.version);t=sr.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(tS(e.readTime)),t}function fR(n,e){const t=eS(e.readTime),r=e.key.path.popLast().toArray();if(e.isFoundDocument()){const o={name:RE(c=n.Ht,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:NE(c,g.version.toTimestamp())};return new pr(null,null,o,e.hasCommittedMutations,t,r)}var c,g;if(e.isNoDocument()){const o=e.key.path.toArray(),u=Rp(e.version),c=e.hasCommittedMutations;return new pr(null,new wk(o,u),null,c,t,r)}if(e.isUnknownDocument()){const o=e.key.path.toArray(),u=Rp(e.version);return new pr(new Ik(o,u),null,null,!0,t,r)}return lt()}function eS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function tS(n){const e=new hi(n[0],n[1]);return wt.fromTimestamp(e)}function Rp(n){const e=n.toTimestamp();return new Ek(e.seconds,e.nanoseconds)}function Pp(n){const e=new hi(n.seconds,n.nanoseconds);return wt.fromTimestamp(e)}function T_(n,e){const t=(e.baseMutations||[]).map(u=>ZA(n.Ht,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>ZA(n.Ht,u)),o=hi.fromMillis(e.localWriteTimeMs);return new QA(e.batchId,o,t,r)}function FE(n){const e=Pp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Pp(n.lastLimboFreeSnapshotVersion):wt.min();let r;var o;return void 0!==n.query.documents?(bt(1===(o=n.query).documents.length),r=va(__(ZN(o.documents[0])))):r=va(tR(n.query)),new _h(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ri.fromBase64String(n.resumeToken))}function pR(n,e){const t=Rp(e.snapshotVersion),r=Rp(e.lastLimboFreeSnapshotVersion);let o;o=GC(e.target)?XN(n.Ht,e.target):eR(n.Ht,e.target);const u=e.resumeToken.toBase64();return new oo(e.targetId,DE(e.target),t,u,e.sequenceNumber,r,o)}function nS(n){const e=tR({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?CN(e,e.limit,"L"):e}function rS(n,e){return new XA(e.largestBatchId,ZA(n.Ht,e.overlayMutation))}function gR(n,e){const t=e.path.lastSegment();return[n,gi(e.path.popLast()),t]}class Tk{getBundleMetadata(e,t){return mR(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Pp(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return mR(e).put({bundleId:(r=t).id,createTime:Rp(pi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return _R(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:nS(o.bundledQuery),readTime:Pp(o.readTime)};var o})}saveNamedQuery(e,t){return _R(e).put({name:(r=t).name,readTime:Rp(pi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function mR(n){return _i(n,D_.store)}function _R(n){return _i(n,b_.store)}class iS{constructor(e,t){this.O=e,this.userId=t}static Jt(e,t){return new iS(e,t.uid||"")}getOverlay(e,t){return LE(e).get(gR(this.userId,t)).next(r=>r?rS(this.O,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach(u=>{const c=new XA(t,u);o.push(this.Yt(e,c))}),fe.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(c=>o.add(gi(c.getCollectionPath())));const u=[];return o.forEach(c=>{const g=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(LE(e).Gt(mi.collectionPathOverlayIndex,g))}),fe.waitFor(u)}getOverlaysForCollection(e,t,r){const o=new Map,u=gi(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return LE(e).qt(mi.collectionPathOverlayIndex,c).next(g=>{for(const E of g){const I=rS(this.O,E);o.set(I.getKey(),I)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=new Map;let c;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return LE(e).Qt({index:mi.collectionGroupOverlayIndex,range:g},(E,I,S)=>{const M=rS(this.O,I);u.size<o||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):S.done()}).next(()=>u)}Yt(e,t){return LE(e).put(function(r,o,u){const[c,g,E]=gR(o,u.mutation.key);return new mi(o,g,E,u.mutation.key.getCollectionGroup(),u.largestBatchId,OE(r.Ht,u.mutation))}(this.O,this.userId,t))}}function LE(n){return _i(n,mi.store)}class XC{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(fr(e.integerValue));else if("doubleValue"in e){const r=fr(e.doubleValue);isNaN(r)?this.ee(t,13):(this.ee(t,15),EE(r)?t.ne(0):t.ne(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se(`${r.seconds||""}`),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(Ip(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ee(t,45),t.ne(r.latitude||0),t.ne(r.longitude||0)}else"mapValue"in e?cu(e,kO)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):lt()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const r=e.fields||{};this.ee(t,55);for(const o of Object.keys(r))this.ie(o,t),this.Zt(r[o],t)}ae(e,t){const r=e.values||[];this.ee(t,50);for(const o of r)this.Zt(o,t)}ce(e,t){this.ee(t,37),tt.fromName(e).path.forEach(r=>{this.ee(t,60),this.he(r,t)})}ee(e,t){e.ne(t)}re(e){e.ne(2)}}function Ak(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function yR(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=Ak(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}XC.le=new XC;class Sk{constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.de(r.value),r=t.next();this._e()}we(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.me(r.value),r=t.next();this.ge()}ye(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.de(r);else if(r<2048)this.de(960|r>>>6),this.de(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.de(480|r>>>12),this.de(128|63&r>>>6),this.de(128|63&r);else{const o=t.codePointAt(0);this.de(240|o>>>18),this.de(128|63&o>>>12),this.de(128|63&o>>>6),this.de(128|63&o)}}this._e()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.me(r);else if(r<2048)this.me(960|r>>>6),this.me(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.me(480|r>>>12),this.me(128|63&r>>>6),this.me(128|63&r);else{const o=t.codePointAt(0);this.me(240|o>>>18),this.me(128|63&o>>>12),this.me(128|63&o>>>6),this.me(128|63&o)}}this.ge()}Ie(e){const t=this.Ee(e),r=yR(t);this.Te(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ae(e){const t=this.Ee(e),r=yR(t);this.Te(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}de(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}me(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class xk{constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class Mk{constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class vR{constructor(){this.Se=new Sk,this.De=new xk(this.Se),this.Ce=new Mk(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return 0===e?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}class sS{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}}function oS(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=tt.comparator(n.documentKey,e.documentKey),0!==t?t:(t=ER(n.arrayValue,e.arrayValue),0!==t?t:ER(n.directionalValue,e.directionalValue)))}function ER(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Nk{constructor(){this.xe=new aS}addToCollectionParentIndex(e,t){return this.xe.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t,r){return fe.resolve(mn())}getFieldIndex(e,t){return fe.resolve(null)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class aS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Kn(cn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Kn(cn.comparator)).toArray()}}class Rk{constructor(e){this.user=e,this.ke=new aS,this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.ke.add(t)});const u={collectionId:r,parent:gi(o)};return wR(e).put(u)}return fe.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[lN(t),""],!1,!0);return wR(e).qt(o).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Il(c.parent))}return r})}addFieldIndex(e,t){const r=tD(e),o=new Vo((u=t).indexId,u.collectionGroup,u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind]));var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=tD(e),o=nD(e),u=eD(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t,r){return fe.resolve(mn())}getFieldIndex(e,t){return fe.resolve(null)}Oe(e,t){const r=new vR;for(const o of e.fields.filter(c=>2!==c.kind)){const u=t.data.field(o.fieldPath);if(null==u)return null;const c=r.Ne(o.kind);XC.le.Xt(u,c)}return r.Ve()}Me(e){const t=new vR;return XC.le.Xt(e,t.Ne(0)),t.Ve()}getFieldIndexes(e,t){const r=tD(e),o=nD(e);return(t?r.qt(Vo.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return fe.forEach(u,g=>o.get([g.indexId,this.uid]).next(E=>{c.push(function(I,S){const M=S?new CE(S.sequenceNumber,new jC(Pp(S.readTime),new tt(Il(S.documentKey)),S.largestBatchId)):CE.empty(),F=I.fields.map(([q,Y])=>new UC(fi.fromServerFormat(q),Y));return new VA(I.indexId,I.collectionGroup,F,M)}(g,E))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>r.indexState.sequenceNumber-o.indexState.sequenceNumber),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=tD(e),u=nD(e);return this.$e(e).next(c=>o.qt(Vo.collectionGroupIndex,IDBKeyRange.bound(t,t)).next(g=>fe.forEach(g,E=>{return u.put(new wa(E.indexId,this.user.uid||"",c,Rp((F=r).readTime),gi(F.documentKey.path),F.largestBatchId));var F})))}updateIndexEntries(e,t){const r=new Map;return fe.forEach(t,(o,u)=>{const c=r.get(o.collectionGroup);return(c?fe.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),fe.forEach(g,E=>this.Fe(e,o,E).next(I=>{const S=this.Be(u,E);return I.isEqual(S)?fe.resolve():this.Le(e,u,I,S)}))))})}Ue(e,t,r){return eD(e).put(new Ia(r.indexId,this.uid,r.arrayValue,r.directionalValue,gi(t.key.path)))}qe(e,t,r){return eD(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,gi(t.key.path)])}Fe(e,t,r){const o=eD(e);let u=new Kn(oS);return o.Qt({index:Ia.documentKeyIndex,range:IDBKeyRange.only([r.indexId,this.uid,gi(t.path)])},(c,g)=>{u=u.add(new sS(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}Be(e,t){let r=new Kn(oS);const o=this.Oe(t,e);if(null==o)return r;const u=t.fields.find(g=>2===g.kind);if(null!=u){const c=e.data.field(u.fieldPath);if(VC(c))for(const g of c.arrayValue.values||[])r=r.add(new sS(t.indexId,e.key,this.Me(g),o))}else r=r.add(new sS(t.indexId,e.key,new Uint8Array,o));return r}Le(e,t,r,o){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(c,g,E,I,S){const M=c.getIterator(),F=g.getIterator();let q=w_(M),Y=w_(F);for(;q||Y;){let Re=!1,Ze=!1;if(q&&Y){const Ot=E(q,Y);Ot<0?Ze=!0:Ot>0&&(Re=!0)}else null!=q?Ze=!0:Re=!0;Re?(I(Y),Y=w_(F)):Ze?(S(q),q=w_(M)):(q=w_(M),Y=w_(F))}}(r,o,oS,c=>{u.push(this.Ue(e,t,c))},c=>{u.push(this.qe(e,t,c))}),fe.waitFor(u)}$e(e){let t=1;return nD(e).Qt({index:wa.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}}function wR(n){return _i(n,xp.store)}function eD(n){return _i(n,Ia.store)}function tD(n){return _i(n,Vo.store)}function nD(n){return _i(n,wa.store)}const IR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ao{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ao(e,ao.DEFAULT_COLLECTION_PERCENTILE,ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function CR(n,e,t){const r=n.store(Ln.store),o=n.store(ms.store),u=[],c=IDBKeyRange.only(t.batchId);let g=0;const E=r.Qt({range:c},(S,M,F)=>(g++,F.delete()));u.push(E.next(()=>{bt(1===g)}));const I=[];for(const S of t.mutations){const M=ms.key(e,S.key.path,t.batchId);u.push(o.delete(M)),I.push(S.key)}return fe.waitFor(u).next(()=>I)}function rD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}ao.DEFAULT_COLLECTION_PERCENTILE=10,ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ao.DEFAULT=new ao(41943040,ao.DEFAULT_COLLECTION_PERCENTILE,ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ao.DISABLED=new ao(-1,0,0);class uS{constructor(e,t,r,o){this.userId=e,this.O=t,this.indexManager=r,this.referenceDelegate=o,this.Ke={}}static Jt(e,t,r,o){bt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new uS(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yh(e).Qt({index:Ln.userMutationsIndex,range:r},(o,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=A_(e),c=yh(e);return c.add({}).next(g=>{bt("number"==typeof g);const E=new QA(g,t,r,o),I=function(F,q,Y){const Re=Y.baseMutations.map(Ot=>OE(F.Ht,Ot)),Ze=Y.mutations.map(Ot=>OE(F.Ht,Ot));return new Ln(q,Y.batchId,Y.localWriteTime.toMillis(),Re,Ze)}(this.O,this.userId,E),S=[];let M=new Kn((F,q)=>Ht(F.canonicalString(),q.canonicalString()));for(const F of o){const q=ms.key(this.userId,F.key.path,g);M=M.add(F.key.path.popLast()),S.push(c.put(I)),S.push(u.put(q,ms.PLACEHOLDER))}return M.forEach(F=>{S.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.Ke[g]=E.keys()}),fe.waitFor(S).next(()=>E)})}lookupMutationBatch(e,t){return yh(e).get(t).next(r=>r?(bt(r.userId===this.userId),T_(this.O,r)):null)}Ge(e,t){return this.Ke[t]?fe.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Ke[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return yh(e).Qt({index:Ln.userMutationsIndex,range:o},(c,g,E)=>{g.userId===this.userId&&(bt(g.batchId>=r),u=T_(this.O,g)),E.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return yh(e).Qt({index:Ln.userMutationsIndex,range:t,reverse:!0},(o,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yh(e).qt(Ln.userMutationsIndex,t).next(r=>r.map(o=>T_(this.O,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ms.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return A_(e).Qt({range:o},(c,g,E)=>{const[I,S,M]=c,F=Il(S);if(I===this.userId&&t.path.isEqual(F))return yh(e).get(M).next(q=>{if(!q)throw lt();bt(q.userId===this.userId),u.push(T_(this.O,q))});E.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kn(Ht);const o=[];return t.forEach(u=>{const c=ms.prefixForPath(this.userId,u.path),g=IDBKeyRange.lowerBound(c),E=A_(e).Qt({range:g},(I,S,M)=>{const[F,q,Y]=I,Re=Il(q);F===this.userId&&u.path.isEqual(Re)?r=r.add(Y):M.done()});o.push(E)}),fe.waitFor(o).next(()=>this.je(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=ms.prefixForPath(this.userId,r),c=IDBKeyRange.lowerBound(u);let g=new Kn(Ht);return A_(e).Qt({range:c},(E,I,S)=>{const[M,F,q]=E,Y=Il(F);M===this.userId&&r.isPrefixOf(Y)?Y.length===o&&(g=g.add(q)):S.done()}).next(()=>this.je(e,g))}je(e,t){const r=[],o=[];return t.forEach(u=>{o.push(yh(e).get(u).next(c=>{if(null===c)throw lt();bt(c.userId===this.userId),r.push(T_(this.O,c))}))}),fe.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return CR(e.zt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Qe(t.batchId)}),fe.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return fe.resolve();const r=IDBKeyRange.lowerBound(ms.prefixForUser(this.userId)),o=[];return A_(e).Qt({range:r},(u,c,g)=>{if(u[0]===this.userId){const E=Il(u[1]);o.push(E)}else g.done()}).next(()=>{bt(0===o.length)})})}containsKey(e,t){return DR(e,this.userId,t)}We(e){return bR(e).get(this.userId).next(t=>t||new mh(this.userId,-1,""))}}function DR(n,e,t){const r=ms.prefixForPath(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return A_(n).Qt({range:u,jt:!0},(g,E,I)=>{const[S,M,F]=g;S===e&&M===o&&(c=!0),I.done()}).next(()=>c)}function yh(n){return _i(n,Ln.store)}function A_(n){return _i(n,ms.store)}function bR(n){return _i(n,mh.store)}class Op{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new Op(0)}static Je(){return new Op(-1)}}class Pk{constructor(e,t){this.referenceDelegate=e,this.O=t}allocateTargetId(e){return this.Ye(e).next(t=>{const r=new Op(t.highestTargetId);return t.highestTargetId=r.next(),this.Xe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ye(e).next(t=>wt.fromTimestamp(new hi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ye(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ye(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Xe(e,o)))}addTargetData(e,t){return this.Ze(e,t).next(()=>this.Ye(e).next(r=>(r.targetCount+=1,this.tn(t,r),this.Xe(e,r))))}updateTargetData(e,t){return this.Ze(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>S_(e).delete(t.targetId)).next(()=>this.Ye(e)).next(r=>(bt(r.targetCount>0),r.targetCount-=1,this.Xe(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return S_(e).Qt((c,g)=>{const E=FE(g);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,u.push(this.removeTargetData(e,E)))}).next(()=>fe.waitFor(u)).next(()=>o)}forEachTarget(e,t){return S_(e).Qt((r,o)=>{const u=FE(o);t(u)})}Ye(e){return TR(e).get(Lo.key).next(t=>(bt(null!==t),t))}Xe(e,t){return TR(e).put(Lo.key,t)}Ze(e,t){return S_(e).put(pR(this.O,t))}tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ye(e).next(t=>t.targetCount)}getTargetData(e,t){const r=DE(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return S_(e).Qt({range:o,index:oo.queryTargetsIndexName},(c,g,E)=>{const I=FE(g);HC(t,I.target)&&(u=I,E.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=vh(e);return t.forEach(c=>{const g=gi(c.path);o.push(u.put(new Wi(r,g))),o.push(this.referenceDelegate.addReference(e,r,c))}),fe.waitFor(o)}removeMatchingKeys(e,t,r){const o=vh(e);return fe.forEach(t,u=>{const c=gi(u.path);return fe.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=vh(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=vh(e);let u=mn();return o.Qt({range:r,jt:!0},(c,g,E)=>{const I=Il(c[1]),S=new tt(I);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=gi(t.path),o=IDBKeyRange.bound([r],[lN(r)],!1,!0);let u=0;return vh(e).Qt({index:Wi.documentTargetsIndex,jt:!0,range:o},([c,g],E,I)=>{0!==c&&(u++,I.done())}).next(()=>u>0)}Tt(e,t){return S_(e).get(t).next(r=>r?FE(r):null)}}function S_(n){return _i(n,oo.store)}function TR(n){return _i(n,Lo.store)}function vh(n){return _i(n,Wi.store)}function kp(n){return lS.apply(this,arguments)}function lS(){return lS=(0,de.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==aR)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),lS.apply(this,arguments)}function AR([n,e],[t,r]){const o=Ht(n,t);return 0===o?Ht(e,r):o}class Ok{constructor(e){this.en=e,this.buffer=new Kn(AR),this.nn=0}sn(){return++this.nn}rn(e){const t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();AR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kk{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.on=!1,this.cn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return null!==this.cn}un(e){var t=this;const r=this.on?3e5:6e4;Be("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,de.Z)(function*(){t.cn=null,t.on=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Mp(o)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield kp(o)}yield t.un(e)}))}}class Fk{constructor(e,t){this.an=e,this.params=t}calculateTargetCount(e,t){return this.an.hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return fe.resolve(ko.A);const r=new Ok(t);return this.an.forEachTarget(e,o=>r.rn(o.sequenceNumber)).next(()=>this.an.ln(e,o=>r.rn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.an.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.an.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(IR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IR):this.fn(e,t))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,t){let r,o,u,c,g,E,I;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),o=this.params.maximumSequenceNumbersToCollect):o=M,c=Date.now(),this.nthSequenceNumber(e,o))).next(M=>(r=M,g=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(I=Date.now(),PA()<=ln.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${o} in `+(g-c)+`ms\n\tRemoved ${u} targets in `+(E-g)+`ms\n\tRemoved ${M} documents in `+(I-E)+`ms\nTotal Duration: ${I-S}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:M})))}}class Lk{constructor(e,t){this.db=e,this.garbageCollector=new Fk(this,t)}hn(e){const t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}dn(e){let t=0;return this.ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ln(e,t){return this._n(e,(r,o)=>t(o))}addReference(e,t,r){return iD(e,r)}removeReference(e,t,r){return iD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return iD(e,t)}wn(e,t){return function(r,o){let u=!1;return bR(r).Wt(c=>DR(r,c,o).next(g=>(g&&(u=!0),fe.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this._n(e,(c,g)=>{if(g<=t){const E=this.wn(e,c).next(I=>{if(!I)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,wt.min()),vh(e).delete([0,gi(c.path)])))});o.push(E)}}).next(()=>fe.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return iD(e,t)}_n(e,t){const r=vh(e);let o,u=ko.A;return r.Qt({index:Wi.documentTargetsIndex},([c,g],{path:E,sequenceNumber:I})=>{0===c?(u!==ko.A&&t(new tt(Il(o)),u),u=I,o=E):u=ko.A}).next(()=>{u!==ko.A&&t(new tt(Il(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function iD(n,e){return vh(n).put((r=n.currentSequenceNumber,new Wi(0,gi(e.path),r)));var r}class x_{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o){for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),!0;return!1}forEach(e){wp(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return dN(this.inner)}}class SR{constructor(){this.changes=new x_(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Vk{constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Eh(e).put(sD(t),r)}removeEntry(e,t){const r=Eh(e),o=sD(t);return r.delete(o)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.mn(e,r)))}getEntry(e,t){return Eh(e).get(sD(t)).next(r=>this.gn(t,r))}yn(e,t){return Eh(e).get(sD(t)).next(r=>({document:this.gn(t,r),size:rD(r)}))}getEntries(e,t){let r=Ea();return this.pn(e,t,(o,u)=>{const c=this.gn(o,u);r=r.insert(o,c)}).next(()=>r)}In(e,t){let r=Ea(),o=new Tr(tt.comparator);return this.pn(e,t,(u,c)=>{const g=this.gn(u,c);r=r.insert(u,g),o=o.insert(u,rD(c))}).next(()=>({documents:r,En:o}))}pn(e,t,r){if(t.isEmpty())return fe.resolve();const o=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),u=t.getIterator();let c=u.getNext();return Eh(e).Qt({range:o},(g,E,I)=>{const S=tt.fromSegments(g);for(;c&&tt.comparator(c,S)<0;)r(c,null),c=u.getNext();c&&c.isEqual(S)&&(r(c,E),c=u.hasNext()?u.getNext():null),c?I.Ut(c.path.toArray()):I.done()}).next(()=>{for(;c;)r(c,null),c=u.hasNext()?u.getNext():null})}getAll(e,t,r){let o=Ea();const u=t.length+1,c={};if(r.isEqual(wt.min())){const g=t.toArray();c.range=IDBKeyRange.lowerBound(g)}else{const g=t.toArray(),E=eS(r);c.range=IDBKeyRange.lowerBound([g,E],!0),c.index=pr.collectionReadTimeIndex}return Eh(e).Qt(c,(g,E,I)=>{if(g.length!==u)return;const S=this.gn(tt.fromSegments(g),E);t.isPrefixOf(S.key.path)?o=o.insert(S.key,S):I.done()}).next(()=>o)}newChangeBuffer(e){return new Bk(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return xR(e).get(Cl.key).next(t=>(bt(!!t),t))}mn(e,t){return xR(e).put(Cl.key,t)}gn(e,t){if(t){const r=hR(this.O,t);if(!r.isNoDocument()||!r.version.isEqual(wt.min()))return r}return sr.newInvalidDocument(e)}}class Bk extends SR{constructor(e,t){super(),this.Tn=e,this.trackRemovals=t,this.An=new x_(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Kn((u,c)=>Ht(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const g=this.An.get(u);if(c.isValidDocument()){const E=fR(this.Tn.O,c);o=o.add(u.path.popLast()),r+=rD(E)-g,t.push(this.Tn.addEntry(e,u,E))}else if(r-=g,this.trackRemovals){const E=fR(this.Tn.O,c.convertToNoDocument(wt.min()));t.push(this.Tn.addEntry(e,u,E))}else t.push(this.Tn.removeEntry(e,u))}),o.forEach(u=>{t.push(this.Tn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Tn.updateMetadata(e,r)),fe.waitFor(t)}getFromCache(e,t){return this.Tn.yn(e,t).next(r=>(this.An.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Tn.In(e,t).next(({documents:r,En:o})=>(o.forEach((u,c)=>{this.An.set(u,c)}),r))}}function xR(n){return _i(n,Cl.store)}function Eh(n){return _i(n,pr.store)}function sD(n){return n.path.toArray()}class Uk{constructor(e){this.O=e}kt(e,t,r,o){const u=new JC("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore(Fo.store),(g=e).createObjectStore(mh.store,{keyPath:mh.keyPath}),g.createObjectStore(Ln.store,{keyPath:Ln.keyPath,autoIncrement:!0}).createIndex(Ln.userMutationsIndex,Ln.userMutationsKeyPath,{unique:!0}),g.createObjectStore(ms.store),MR(e),function(g){g.createObjectStore(pr.store)}(e));let c=fe.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore(Wi.store),g.deleteObjectStore(oo.store),g.deleteObjectStore(Lo.store)}(e),MR(e)),c=c.next(()=>function(g){const E=g.store(Lo.store),I=new Lo(0,0,wt.min().toTimestamp(),0);return E.put(Lo.key,I)}(u))),r<4&&o>=4&&(0!==r&&(c=c.next(()=>function(g,E){return E.store(Ln.store).qt().next(I=>{g.deleteObjectStore(Ln.store),g.createObjectStore(Ln.store,{keyPath:Ln.keyPath,autoIncrement:!0}).createIndex(Ln.userMutationsIndex,Ln.userMutationsKeyPath,{unique:!0});const S=E.store(Ln.store),M=I.map(F=>S.put(F));return fe.waitFor(M)})}(e,u))),c=c.next(()=>{!function(g){g.createObjectStore(Oc.store,{keyPath:Oc.keyPath})}(e)})),r<5&&o>=5&&(c=c.next(()=>this.Rn(u))),r<6&&o>=6&&(c=c.next(()=>(function(g){g.createObjectStore(Cl.store)}(e),this.Pn(u)))),r<7&&o>=7&&(c=c.next(()=>this.bn(u))),r<8&&o>=8&&(c=c.next(()=>this.vn(e,u))),r<9&&o>=9&&(c=c.next(()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e),function(g){const E=g.objectStore(pr.store);E.createIndex(pr.readTimeIndex,pr.readTimeIndexPath,{unique:!1}),E.createIndex(pr.collectionReadTimeIndex,pr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&o>=10&&(c=c.next(()=>this.Vn(u))),r<11&&o>=11&&(c=c.next(()=>{(function(g){g.createObjectStore(D_.store,{keyPath:D_.keyPath})})(e),function(g){g.createObjectStore(b_.store,{keyPath:b_.keyPath})}(e)})),r<12&&o>=12&&(c=c.next(()=>{!function(g){const E=g.createObjectStore(mi.store,{keyPath:mi.keyPath});E.createIndex(mi.collectionPathOverlayIndex,mi.collectionPathOverlayIndexPath,{unique:!1}),E.createIndex(mi.collectionGroupOverlayIndex,mi.collectionGroupOverlayIndexPath,{unique:!1})}(e)})),r<13&&o>=13&&(c=c.next(()=>{!function(g){g.createObjectStore(Vo.store,{keyPath:Vo.keyPath,autoIncrement:!0}).createIndex(Vo.collectionGroupIndex,Vo.collectionGroupIndexPath,{unique:!1}),g.createObjectStore(wa.store,{keyPath:wa.keyPath}).createIndex(wa.sequenceNumberIndex,wa.sequenceNumberIndexPath,{unique:!1}),g.createObjectStore(Ia.store,{keyPath:Ia.keyPath}).createIndex(Ia.documentKeyIndex,Ia.documentKeyIndexPath,{unique:!1})}(e)})),c}Pn(e){let t=0;return e.store(pr.store).Qt((r,o)=>{t+=rD(o)}).next(()=>{const r=new Cl(t);return e.store(Cl.store).put(Cl.key,r)})}Rn(e){const t=e.store(mh.store),r=e.store(Ln.store);return t.qt().next(o=>fe.forEach(o,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt(Ln.userMutationsIndex,c).next(g=>fe.forEach(g,E=>{bt(E.userId===u.userId);const I=T_(this.O,E);return CR(e,u.userId,I).next(()=>{})}))}))}bn(e){const t=e.store(Wi.store),r=e.store(pr.store);return e.store(Lo.store).get(Lo.key).next(o=>{const u=[];return r.Qt((c,g)=>{const E=new cn(c),I=[0,gi(E)];u.push(t.get(I).next(S=>S?fe.resolve():t.put(new Wi(0,gi(E),o.highestListenSequenceNumber))))}).next(()=>fe.waitFor(u))})}vn(e,t){e.createObjectStore(xp.store,{keyPath:xp.keyPath});const r=t.store(xp.store),o=new aS,u=c=>{if(o.add(c)){const g=c.lastSegment(),E=c.popLast();return r.put({collectionId:g,parent:gi(E)})}};return t.store(pr.store).Qt({jt:!0},(c,g)=>{const E=new cn(c);return u(E.popLast())}).next(()=>t.store(ms.store).Qt({jt:!0},([c,g,E],I)=>{const S=Il(g);return u(S.popLast())}))}Vn(e){const t=e.store(oo.store);return t.Qt((r,o)=>{const u=FE(o),c=pR(this.O,u);return t.put(c)})}}function MR(n){n.createObjectStore(Wi.store,{keyPath:Wi.keyPath}).createIndex(Wi.documentTargetsIndex,Wi.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(oo.store,{keyPath:oo.keyPath}).createIndex(oo.queryTargetsIndexName,oo.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Lo.store)}const cS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class dS{constructor(e,t,r,o,u,c,g,E,I,S,M=12){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Sn=u,this.window=c,this.document=g,this.Dn=I,this.Cn=S,this.schemaVersion=M,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=F=>Promise.resolve(),!dS.Vt())throw new Pe(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Lk(this,o),this.Bn=t+"main",this.O=new dR(E),this.Ln=new du(this.Bn,this.schemaVersion,new Uk(this.O)),this.Un=new Pk(this.referenceDelegate,this.O),this.qn=new Vk(this.O),this.Kn=new Tk,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===S&&Vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(ue.FAILED_PRECONDITION,cS);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Un.getHighestSequenceNumber(e))}).then(e=>{this.Nn=new ko(e,this.Dn)}).then(()=>{this.xn=!0}).catch(e=>(this.Ln&&this.Ln.close(),Promise.reject(e)))}Hn(e){var t=this;return this.Fn=function(){var r=(0,de.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt(function(){var t=(0,de.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget((0,de.Z)(function*(){t.started&&(yield t.jn())})))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>oD(e).put(new Oc(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.Jn(e).next(t=>{t||(this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)))})}).next(()=>this.Yn(e)).next(t=>this.isPrimary&&!t?this.Xn(e).next(()=>!1):!!t&&this.Zn(e).next(()=>!0))).catch(e=>{if(Mp(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable(()=>this.Fn(e)),this.isPrimary=e})}Jn(e){return VE(e).get(Fo.key).next(t=>fe.resolve(this.ts(t)))}es(e){return oD(e).delete(this.clientId)}ns(){var e=this;return(0,de.Z)(function*(){if(e.isPrimary&&!e.ss(e.$n,18e5)){e.$n=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=_i(r,Oc.store);return o.qt().next(u=>{const c=e.rs(u,18e5),g=u.filter(E=>-1===c.indexOf(E));return fe.forEach(g,E=>o.delete(E.clientId)).next(()=>g)})}).catch(()=>[]);if(e.Gn)for(const r of t)e.Gn.removeItem(e.os(r.clientId))}})()}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.jn().then(()=>this.ns()).then(()=>this.zn()))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?fe.resolve(!0):VE(e).get(Fo.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new Pe(ue.FAILED_PRECONDITION,cS);return!1}}return!(!this.networkEnabled||!this.inForeground)||oD(e).qt().next(r=>void 0===this.rs(r,5e3).find(o=>{if(this.clientId!==o.clientId){const c=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||c&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,de.Z)(function*(){e.xn=!1,e.us(),e.Mn&&(e.Mn.cancel(),e.Mn=null),e.hs(),e.ls(),yield e.Ln.runTransaction("shutdown","readwrite",[Fo.store,Oc.store],t=>{const r=new cR(t,ko.A);return e.Xn(r).next(()=>e.es(r))}),e.Ln.close(),e.fs()})()}rs(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}ds(){return this.runTransaction("getActiveClients","readonly",e=>oD(e).qt().next(t=>this.rs(t,18e5).map(r=>r.clientId)))}get started(){return this.xn}getMutationQueue(e,t){return uS.Jt(e,this.O,t,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new Rk(e)}getDocumentOverlayCache(e){return iS.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=13===(c=this.schemaVersion)?Ck:12===c?oR:11===c?sR:void lt();var c;let g;return this.Ln.runTransaction(e,o,u,E=>(g=new cR(E,this.Nn?this.Nn.next():ko.A),"readwrite-primary"===t?this.Jn(g).next(I=>!!I||this.Yn(g)).next(I=>{if(!I)throw Vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)),new Pe(ue.FAILED_PRECONDITION,aR);return r(g)}).next(I=>this.Zn(g).next(()=>I)):this._s(g).next(()=>r(g)))).then(E=>(g.raiseOnCommittedEvent(),E))}_s(e){return VE(e).get(Fo.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Cn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(ue.FAILED_PRECONDITION,cS)})}Zn(e){const t=new Fo(this.clientId,this.allowTabSynchronization,Date.now());return VE(e).put(Fo.key,t)}static Vt(){return du.Vt()}Xn(e){const t=VE(e);return t.get(Fo.key).next(r=>this.ts(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete(Fo.key)):fe.resolve())}ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Vr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Qn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=()=>{this.Sn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.jn()))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=()=>{this.us(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var t;try{const r=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Vr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){Vr("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(e){}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function VE(n){return _i(n,Fo.store)}function oD(n){return _i(n,Oc.store)}function hS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class jk{constructor(e,t){this.progress=e,this.ws=t}}class Hk{constructor(e,t,r){this.qn=e,this.gs=t,this.indexManager=r}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.ps(e,t,r))}ps(e,t,r){return this.qn.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}Is(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Es(e,t){return this.qn.getEntries(e,t).next(r=>this.Ts(e,r).next(()=>r))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Is(t,r))}As(e,t,r){return tt.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Rs(e,t.path):jA(t)?this.Ps(e,t,r):this.bs(e,t,r);var o}Rs(e,t){return this.ys(e,new tt(t)).next(r=>{let o=qA();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ps(e,t,r){const o=t.collectionGroup;let u=qA();return this.indexManager.getCollectionParents(e,o).next(c=>fe.forEach(c,g=>{const E=(I=t,S=g.child(o),new Pc(S,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,S;return this.bs(e,E,r).next(I=>{I.forEach((S,M)=>{u=u.insert(S,M)})})}).next(()=>u))}bs(e,t,r){let o;return this.qn.getAll(e,t.path,r).next(u=>(o=u,this.gs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const g of c.mutations){const E=g.key;let I=o.get(E);null==I&&(I=sr.newInvalidDocument(E),o=o.insert(E,I)),$A(g,I,c.localWriteTime),I.isFoundDocument()||(o=o.remove(E))}}).next(()=>(o.forEach((u,c)=>{GA(t,c)||(o=o.remove(u))}),o))}}class fS{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.vs=r,this.Vs=o}static Ss(e,t){let r=mn(),o=mn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new fS(e,t.fromCache,r,o)}}class NR{Ds(e){this.Cs=e}As(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(wt.min())?this.Ns(e,t):this.Cs.Es(e,o).next(u=>{const c=this.xs(t,u);return($C(t)||WC(t))&&this.ks(t.limitType,c,o,r)?this.Ns(e,t):(PA()<=ln.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),HA(t)),this.Cs.As(e,t,r).next(g=>(c.forEach(E=>{g=g.insert(E.key,E)}),g)))});var u}xs(e,t){let r=new Kn(bN(e));return t.forEach((o,u)=>{GA(e,u)&&(r=r.add(u))}),r}ks(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ns(e,t){return PA()<=ln.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",HA(t)),this.Cs.As(e,t,wt.min())}}class Gk{constructor(e,t,r,o){this.persistence=e,this.Os=t,this.O=o,this.Ms=new Tr(Ht),this.$s=new x_(u=>DE(u),HC),this.Fs=wt.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(r)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new Hk(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function RR(n,e,t,r){return new Gk(n,e,t,r)}function PR(n,e){return pS.apply(this,arguments)}function pS(){return pS=(0,de.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.gs.getAllMutationBatches(r).next(u=>(o=u,t.Ls(e),t.gs.getAllMutationBatches(r))).next(u=>{const c=[],g=[];let E=mn();for(const I of o){c.push(I.batchId);for(const S of I.mutations)E=E.add(S.key)}for(const I of u){g.push(I.batchId);for(const S of I.mutations)E=E.add(S.key)}return t.Us.Es(r,E).next(I=>({qs:I,removedBatchIds:c,addedBatchIds:g}))})})}),pS.apply(this,arguments)}function $k(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Bs.newChangeBuffer({trackRemovals:!0});return function(c,g,E,I){const S=E.batch,M=S.keys();let F=fe.resolve();return M.forEach(q=>{F=F.next(()=>I.getEntry(g,q)).next(Y=>{const Re=E.docVersions.get(q);bt(null!==Re),Y.version.compareTo(Re)<0&&(S.applyToRemoteDocument(Y,E),Y.isValidDocument()&&(Y.setReadTime(E.commitVersion),I.addEntry(Y)))})}),F.next(()=>c.gs.removeMutationBatch(g,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.gs.performConsistencyCheck(r)).next(()=>t.Us.Es(r,o))})}function OR(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Un.getLastRemoteSnapshotVersion(t))}function Wk(n,e){const t=Ke(n),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.Ms;const g=[];e.targetChanges.forEach((I,S)=>{const M=o.get(S);if(!M)return;g.push(t.Un.removeMatchingKeys(u,I.removedDocuments,S).next(()=>t.Un.addMatchingKeys(u,I.addedDocuments,S)));let F=M.withSequenceNumber(u.currentSequenceNumber);var q,Y,Re;e.targetMismatches.has(S)?F=F.withResumeToken(ri.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):I.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(I.resumeToken,r)),o=o.insert(S,F),Y=F,Re=I,(0===(q=M).resumeToken.approximateByteSize()||Y.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||Re.addedDocuments.size+Re.modifiedDocuments.size+Re.removedDocuments.size>0)&&g.push(t.Un.updateTargetData(u,F))});let E=Ea();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,I))}),g.push(kR(u,c,e.documentUpdates).next(I=>{E=I})),!r.isEqual(wt.min())){const I=t.Un.getLastRemoteSnapshotVersion(u).next(S=>t.Un.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(I)}return fe.waitFor(g).next(()=>c.apply(u)).next(()=>t.Us.Ts(u,E)).next(()=>E)}).then(u=>(t.Ms=o,u))}function kR(n,e,t){let r=mn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=Ea();return t.forEach((c,g)=>{const E=o.get(c);g.isNoDocument()&&g.version.isEqual(wt.min())?(e.removeEntry(c,g.readTime),u=u.insert(c,g)):!E.isValidDocument()||g.version.compareTo(E.version)>0||0===g.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(g),u=u.insert(c,g)):Be("LocalStore","Ignoring outdated watch update for ",c,". Current version:",E.version," Watch version:",g.version)}),u})}function qk(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.gs.getNextMutationBatchAfterBatchId(r,e)))}function M_(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Un.getTargetData(r,e).next(u=>u?(o=u,fe.resolve(o)):t.Un.allocateTargetId(r).next(c=>(o=new _h(e,c,0,r.currentSequenceNumber),t.Un.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ms.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.$s.set(e,r.targetId)),r})}function N_(n,e,t){return gS.apply(this,arguments)}function gS(){return gS=(0,de.Z)(function*(n,e,t){const r=Ke(n),o=r.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Mp(c))throw c;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.$s.delete(o.target)}),gS.apply(this,arguments)}function aD(n,e,t){const r=Ke(n);let o=wt.min(),u=mn();return r.persistence.runTransaction("Execute query","readonly",c=>function(g,E,I){const S=Ke(g),M=S.$s.get(I);return void 0!==M?fe.resolve(S.Ms.get(M)):S.Un.getTargetData(E,I)}(r,c,va(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(c,g.targetId).next(E=>{u=E})}).next(()=>r.Os.As(c,e,t?o:wt.min(),t?u:mn())).next(g=>({documents:g,Ks:u})))}function FR(n,e){const t=Ke(n),r=Ke(t.Un),o=t.Ms.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Tt(u,e).next(c=>c?c.target:null))}function LR(n){const e=Ke(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,o,u){const c=Ke(r);let g=Ea(),E=eS(u);const I=Eh(o),S=IDBKeyRange.lowerBound(E,!0);return I.Qt({index:pr.readTimeIndex,range:S},(M,F)=>{const q=hR(c.O,F);g=g.insert(q.key,q),E=F.readTime}).next(()=>({ws:g,readTime:tS(E)}))}(e.Bs,t,e.Fs)).then(({ws:t,readTime:r})=>(e.Fs=r,t))}function mS(){return mS=(0,de.Z)(function*(n){const e=Ke(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const o=Eh(r);let u=wt.min();return o.Qt({index:pr.readTimeIndex,reverse:!0},(c,g,E)=>{g.readTime&&(u=tS(g.readTime)),E.done()}).next(()=>u)}(t)).then(t=>{e.Fs=t})}),mS.apply(this,arguments)}function _S(){return _S=(0,de.Z)(function*(n,e,t,r){const o=Ke(n);let u=mn(),c=Ea();for(const I of t){const S=e.Gs(I.metadata.name);I.document&&(u=u.add(S));const M=e.js(I);M.setReadTime(e.Qs(I.metadata.readTime)),c=c.insert(S,M)}const g=o.Bs.newChangeBuffer({trackRemovals:!0}),E=yield M_(o,(I=r,va(__(cn.fromString(`__bundle__/docs/${I}`)))));var I;return o.persistence.runTransaction("Apply bundle documents","readwrite",I=>kR(I,g,c).next(S=>(g.apply(I),S)).next(S=>o.Un.removeMatchingKeysForTargetId(I,E.targetId).next(()=>o.Un.addMatchingKeys(I,u,E.targetId)).next(()=>o.Us.Ts(I,S)).next(()=>S)))}),_S.apply(this,arguments)}function Zk(n,e){return yS.apply(this,arguments)}function yS(){return yS=(0,de.Z)(function*(n,e,t=mn()){const r=yield M_(n,va(nS(e.bundledQuery))),o=Ke(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const c=pi(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return o.Kn.saveNamedQuery(u,e);const g=r.withResumeToken(ri.EMPTY_BYTE_STRING,c);return o.Ms=o.Ms.insert(g.targetId,g),o.Un.updateTargetData(u,g).next(()=>o.Un.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Un.addMatchingKeys(u,t,r.targetId)).next(()=>o.Kn.saveNamedQuery(u,e))})}),yS.apply(this,arguments)}class Yk{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return fe.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var r;return this.Ws.set(t.id,{id:(r=t).id,version:r.version,createTime:pi(r.createTime)}),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,{name:(r=t).name,query:nS(r.bundledQuery),readTime:pi(r.readTime)}),fe.resolve();var r}}class Qk{constructor(){this.overlays=new Tr(tt.comparator),this.Hs=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach(o=>{this.Yt(e,t,o)}),fe.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Hs.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Hs.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const o=new Map,u=t.length+1,c=new tt(t.child("")),g=this.overlays.getIteratorFrom(c);for(;g.hasNext();){const E=g.getNext().value,I=E.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&E.largestBatchId>r&&o.set(E.getKey(),E)}return fe.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Tr((I,S)=>I-S);const c=this.overlays.getIterator();for(;c.hasNext();){const I=c.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let S=u.get(I.largestBatchId);null===S&&(S=new Map,u=u.insert(I.largestBatchId,S)),S.set(I.getKey(),I)}}const g=new Map,E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((I,S)=>g.set(S,I)),!(g.size>=o)););return fe.resolve(g)}Yt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);null!==o&&this.Hs.get(o.largestBatchId).delete(r.key),this.overlays=this.overlays.insert(r.key,new XA(t,r));let u=this.Hs.get(t);void 0===u&&(u=new Set,this.Hs.set(t,u)),u.add(r.key)}}class vS{constructor(){this.Js=new Kn(yi.Ys),this.Xs=new Kn(yi.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const r=new yi(e,t);this.Js=this.Js.add(r),this.Xs=this.Xs.add(r)}ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ei(new yi(e,t))}ni(e,t){e.forEach(r=>this.removeReference(r,t))}si(e){const t=new tt(new cn([])),r=new yi(t,e),o=new yi(t,e+1),u=[];return this.Xs.forEachInRange([r,o],c=>{this.ei(c),u.push(c.key)}),u}ii(){this.Js.forEach(e=>this.ei(e))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new tt(new cn([])),r=new yi(t,e),o=new yi(t,e+1);let u=mn();return this.Xs.forEachInRange([r,o],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new yi(e,0),r=this.Js.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class yi{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return tt.comparator(e.key,t.key)||Ht(e.oi,t.oi)}static Zs(e,t){return Ht(e.oi,t.oi)||tt.comparator(e.key,t.key)}}class Jk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new Kn(yi.Ys)}checkEmpty(e){return fe.resolve(0===this.gs.length)}addMutationBatch(e,t,r,o){const u=this.ci;this.ci++;const c=new QA(u,t,r,o);this.gs.push(c);for(const g of o)this.ui=this.ui.add(new yi(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return fe.resolve(c)}lookupMutationBatch(e,t){return fe.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.hi(t+1),u=o<0?0:o;return fe.resolve(this.gs.length>u?this.gs[u]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return fe.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new yi(t,0),o=new yi(t,Number.POSITIVE_INFINITY),u=[];return this.ui.forEachInRange([r,o],c=>{const g=this.ai(c.oi);u.push(g)}),fe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kn(Ht);return t.forEach(o=>{const u=new yi(o,0),c=new yi(o,Number.POSITIVE_INFINITY);this.ui.forEachInRange([u,c],g=>{r=r.add(g.oi)})}),fe.resolve(this.li(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;tt.isDocumentKey(u)||(u=u.child(""));const c=new yi(new tt(u),0);let g=new Kn(Ht);return this.ui.forEachWhile(E=>{const I=E.key.path;return!!r.isPrefixOf(I)&&(I.length===o&&(g=g.add(E.oi)),!0)},c),fe.resolve(this.li(g))}li(e){const t=[];return e.forEach(r=>{const o=this.ai(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){bt(0===this.fi(t.batchId,"removed")),this.gs.shift();let r=this.ui;return fe.forEach(t.mutations,o=>{const u=new yi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ui=r})}Qe(e){}containsKey(e,t){const r=new yi(t,0),o=this.ui.firstAfterOrEqual(r);return fe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return fe.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class Xk{constructor(e){this.di=e,this.docs=new Tr(tt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,c=this.di(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():sr.newInvalidDocument(t))}getEntries(e,t){let r=Ea();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():sr.newInvalidDocument(o))}),fe.resolve(r)}getAll(e,t,r){let o=Ea();const u=new tt(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:g,value:{document:E}}=c.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||E.readTime.compareTo(r)<=0||(o=o.insert(E.key,E.mutableCopy()))}return fe.resolve(o)}_i(e,t){return fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new e1(this)}getSize(e){return fe.resolve(this.size)}}class e1 extends SR{constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Tn.addEntry(e,o)):this.Tn.removeEntry(r)}),fe.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class t1{constructor(e){this.persistence=e,this.wi=new x_(t=>DE(t),HC),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.mi=0,this.gi=new vS,this.targetCount=0,this.yi=Op.He()}forEachTarget(e,t){return this.wi.forEach((r,o)=>t(o)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.mi&&(this.mi=t),fe.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new Op(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Ze(t),fe.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.wi.forEach((c,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.wi.delete(c),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),fe.waitFor(u).next(()=>o)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.wi.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this.gi.ti(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this.gi.ni(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(c=>{u.push(o.markPotentiallyOrphaned(e,c))}),fe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.gi.ri(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this.gi.containsKey(t))}}class n1{constructor(e,t){this.pi={},this.overlays={},this.Nn=new ko(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new t1(this),this.indexManager=new Nk,this.qn=new Xk(r=>this.referenceDelegate.Ii(r)),this.O=new dR(t),this.Kn=new Yk(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Qk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.pi[e.toKey()];return r||(r=new Jk(t,this.referenceDelegate),this.pi[e.toKey()]=r),r}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const o=new r1(this.Nn.next());return this.referenceDelegate.Ei(),r(o).next(u=>this.referenceDelegate.Ti(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ai(e,t){return fe.or(Object.values(this.pi).map(r=>()=>r.containsKey(e,t)))}}class r1 extends uR{constructor(e){super(),this.currentSequenceNumber=e}}class ES{constructor(e){this.persistence=e,this.Ri=new vS,this.Pi=null}static bi(e){return new ES(e)}get vi(){if(this.Pi)return this.Pi;throw lt()}addReference(e,t,r){return this.Ri.addReference(r,t),this.vi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.vi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach(o=>this.vi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.vi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.vi,r=>{const o=tt.fromPath(r);return this.Vi(e,o).next(u=>{u||t.removeEntry(o,wt.min())})}).next(()=>(this.Pi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Vi(e,t).next(r=>{r?this.vi.delete(t.toString()):this.vi.add(t.toString())})}Ii(e){return 0}Vi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}function VR(n,e){return`firestore_clients_${n}_${e}`}function BR(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function wS(n,e){return`firestore_targets_${n}_${e}`}class uD{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Si(e,t,r){const o=JSON.parse(r);let u,c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(u=new Pe(o.error.code,o.error.message))),c?new uD(e,t,o.state,u):(Vr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class BE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Si(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Pe(r.error.code,r.error.message))),u?new BE(e,r.state,o):(Vr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Si(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=YC();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=fN(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return o?new lD(e,u):(Vr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class IS{constructor(e,t){this.clientId=e,this.onlineState=t}static Si(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new IS(t.clientId,t.onlineState):(Vr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class CS{constructor(){this.activeTargetIds=YC()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DS{constructor(e,t,r,o,u){this.window=e,this.Sn=t,this.persistenceKey=r,this.xi=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new Tr(Ht),this.started=!1,this.$i=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Fi=VR(this.persistenceKey,this.xi),this.Bi=`firestore_sequence_number_${this.persistenceKey}`,this.Mi=this.Mi.insert(this.xi,new CS),this.Li=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.Ki=`firestore_online_state_${this.persistenceKey}`,this.Gi=function(g){return`firestore_bundle_loaded_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,de.Z)(function*(){const t=yield e.syncEngine.ds();for(const o of t){if(o===e.xi)continue;const u=e.getItem(VR(e.persistenceKey,o));if(u){const c=lD.Si(o,u);c&&(e.Mi=e.Mi.insert(c.clientId,c))}}e.ji();const r=e.storage.getItem(e.Ki);if(r){const o=e.Qi(r);o&&e.Wi(o)}for(const o of e.$i)e.Oi(o);e.$i=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let t=!1;return this.Mi.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,t,r){this.Hi(e,t,r),this.Ji(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(wS(this.persistenceKey,e));if(r){const o=BE.Si(e,r);o&&(t=o.state)}}return this.Yi.Ci(e),this.ji(),t}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(wS(this.persistenceKey,e))}updateQueryState(e,t,r){this.Xi(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ji(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Fi)return void Vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable((0,de.Z)(function*(){if(t.started){if(null!==r.key)if(t.Li.test(r.key)){if(null==r.newValue){const o=t.er(r.key);return t.nr(o,null)}{const o=t.sr(r.key,r.newValue);if(o)return t.nr(o.clientId,o)}}else if(t.Ui.test(r.key)){if(null!==r.newValue){const o=t.ir(r.key,r.newValue);if(o)return t.rr(o)}}else if(t.qi.test(r.key)){if(null!==r.newValue){const o=t.cr(r.key,r.newValue);if(o)return t.ur(o)}}else if(r.key===t.Ki){if(null!==r.newValue){const o=t.Qi(r.newValue);if(o)return t.Wi(o)}}else if(r.key===t.Bi){const o=function(u){let c=ko.A;if(null!=u)try{const g=JSON.parse(u);bt("number"==typeof g),c=g}catch(g){Vr("SharedClientState","Failed to read sequence number from WebStorage",g)}return c}(r.newValue);o!==ko.A&&t.sequenceNumberHandler(o)}else if(r.key===t.Gi)return t.syncEngine.ar()}else t.$i.push(r)}))}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,t,r){const o=new uD(this.currentUser,e,t,r),u=BR(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Di())}Ji(e){const t=BR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Zi(e){this.storage.setItem(this.Ki,JSON.stringify({clientId:this.xi,onlineState:e}))}Xi(e,t,r){const o=wS(this.persistenceKey,e),u=new BE(e,t,r);this.setItem(o,u.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const t=this.Li.exec(e);return t?t[1]:null}sr(e,t){const r=this.er(e);return lD.Si(r,t)}ir(e,t){const r=this.Ui.exec(e),o=Number(r[1]);return uD.Si(new Gi(void 0!==r[2]?r[2]:null),o,t)}cr(e,t){const r=this.qi.exec(e),o=Number(r[1]);return BE.Si(o,t)}Qi(e){return IS.Si(e)}rr(e){var t=this;return(0,de.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.hr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,t){const r=t?this.Mi.insert(e,t):this.Mi.remove(e),o=this.zi(this.Mi),u=this.zi(r),c=[],g=[];return u.forEach(E=>{o.has(E)||c.push(E)}),o.forEach(E=>{u.has(E)||g.push(E)}),this.syncEngine.dr(c,g).then(()=>{this.Mi=r})}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let t=YC();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class UR{constructor(){this._r=new CS,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,r){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new CS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class i1{mr(e){}shutdown(){}}class jR{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const s1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class o1{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class a1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.kr=(e.ssl?"https":"http")+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,r,o,u){const c=this.$r(e,t);Be("RestConnection","Sending: ",c,r);const g={};return this.Fr(g,o,u),this.Br(e,c,g,r).then(E=>(Be("RestConnection","Received: ",E),E),E=>{throw _E("RestConnection",`${e} failed with error: `,E,"url: ",c,"request:",r),E})}Lr(e,t,r,o,u){return this.Mr(e,t,r,o,u)}Fr(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+c_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}$r(e,t){return`${this.kr}/v1/${t}:${s1[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,r,o){return new Promise((u,c)=>{const g=new wO;g.listenOnce(yO.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case RA.NO_ERROR:const I=g.getResponseJson();Be("Connection","XHR received:",JSON.stringify(I)),u(I);break;case RA.TIMEOUT:Be("Connection",'RPC "'+e+'" timed out'),c(new Pe(ue.DEADLINE_EXCEEDED,"Request time out"));break;case RA.HTTP_ERROR:const S=g.getStatus();if(Be("Connection",'RPC "'+e+'" failed with status:',S,"response text:",g.getResponseText()),S>0){const M=g.getResponseJson().error;if(M&&M.status&&M.message){const F=function(q){const Y=q.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(Y)>=0?Y:ue.UNKNOWN}(M.status);c(new Pe(F,M.message))}else c(new Pe(ue.UNKNOWN,"Server responded with status "+g.getStatus()))}else c(new Pe(ue.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Be("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(o);g.send(t,"POST",E,r,15)})}Ur(e,t,r){const o=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=mO(),c=_O(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new EO({})),this.Fr(g.initMessageHeaders,t,r),(0,P.uI)()||(0,P.b$)()||(0,P.d)()||(0,P.w1)()||(0,P.Mn)()||(0,P.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const E=o.join("");Be("Connection","Creating WebChannel: "+E,g);const I=u.createWebChannel(E,g);let S=!1,M=!1;const F=new o1({Ar:Y=>{M?Be("Connection","Not sending because WebChannel is closed:",Y):(S||(Be("Connection","Opening WebChannel transport."),I.open(),S=!0),Be("Connection","WebChannel sending:",Y),I.send(Y))},Rr:()=>I.close()}),q=(Y,Re,Ze)=>{Y.listen(Re,Ot=>{try{Ze(Ot)}catch(Vt){setTimeout(()=>{throw Vt},0)}})};return q(I,FC.EventType.OPEN,()=>{M||Be("Connection","WebChannel transport opened.")}),q(I,FC.EventType.CLOSE,()=>{M||(M=!0,Be("Connection","WebChannel transport closed"),F.Cr())}),q(I,FC.EventType.ERROR,Y=>{M||(M=!0,_E("Connection","WebChannel transport errored:",Y),F.Cr(new Pe(ue.UNAVAILABLE,"The operation could not be completed")))}),q(I,FC.EventType.MESSAGE,Y=>{var Re;if(!M){const Ze=Y.data[0];bt(!!Ze);const Ot=Ze,Vt=Ot.error||(null===(Re=Ot[0])||void 0===Re?void 0:Re.error);if(Vt){Be("Connection","WebChannel received error:",Vt);const or=Vt.status;let Kt=function(hu){const TD=Ur[hu];if(void 0!==TD)return UN(TD)}(or),ar=Vt.message;void 0===Kt&&(Kt=ue.INTERNAL,ar="Unknown error status: "+or+" with message "+Vt.message),M=!0,F.Cr(new Pe(Kt,ar)),I.close()}else Be("Connection","WebChannel received:",Ze),F.Nr(Ze)}}),q(c,vO.STAT_EVENT,Y=>{Y.stat===iN.PROXY?Be("Connection","Detected buffering proxy"):Y.stat===iN.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.Dr()},0),F}}function HR(){return"undefined"!=typeof window?window:null}function cD(){return"undefined"!=typeof document?document:null}function UE(n){return new uk(n,!0)}class bS{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Sn=e,this.timerId=t,this.qr=r,this.Kr=o,this.Gr=u,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),o=Math.max(0,t-r);o>0&&Be("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,o,()=>(this.Wr=Date.now(),e())),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class GR{constructor(e,t,r,o,u,c,g,E){this.Sn=e,this.Xr=r,this.Zr=o,this.eo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=g,this.listener=E,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new bS(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}stop(){var e=this;return(0,de.Z)(function*(){e.oo()&&(yield e.close(0))})()}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,()=>this.lo()))}fo(e){this._o(),this.stream.send(e)}lo(){var e=this;return(0,de.Z)(function*(){if(e.co())return e.close(0)})()}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}close(e,t){var r=this;return(0,de.Z)(function*(){r._o(),r.wo(),r.ro.cancel(),r.no++,4!==e?r.ro.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Vr(t.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),r.ro.zr()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.mo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.vr(t)})()}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.no===t&&this.po(r,o)},r=>{e(()=>{const o=new Pe(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Io(o)})})}po(e,t){const r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr(()=>{r(()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,()=>(this.co()&&(this.state=3),Promise.resolve())),this.listener.Pr()))}),this.stream.vr(o=>{r(()=>this.Io(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}uo(){var e=this;this.state=5,this.ro.Hr((0,de.Z)(function*(){e.state=0,e.start()}))}Io(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget(()=>this.no===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class u1 extends GR{constructor(e,t,r,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.O=u}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function dk(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:lt(),o=e.targetChange.targetIds||[],u=function(E,I){return E.N?(bt(void 0===I||"string"==typeof I),ri.fromBase64String(I||"")):(bt(void 0===I||I instanceof Uint8Array),ri.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,g=c&&function(E){const I=void 0===E.code?ue.UNKNOWN:UN(E.code);return new Pe(I,E.message||"")}(c);t=new GN(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=wl(n,r.document.name),u=pi(r.document.updateTime),c=new gs({mapValue:{fields:r.document.fields}}),g=sr.newFoundDocument(o,u,c);t=new QC(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,o=wl(n,r.document),u=r.readTime?pi(r.readTime):wt.min(),c=sr.newNoDocument(o,u);t=new QC([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,o=wl(n,r.document);t=new QC([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return lt();{const r=e.filter,u=new XO(r.count||0);t=new HN(r.targetId,u)}}var E;return t}(this.O,e),r=function(o){if(!("targetChange"in o))return wt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?wt.min():u.readTime?pi(u.readTime):wt.min()}(e);return this.listener.To(t,r)}Ao(e){const t={};t.database=PE(this.O),t.addTarget=function(o,u){let c;const g=u.target;return c=GC(g)?{documents:XN(o,g)}:{query:eR(o,g)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=zN(o,u.resumeToken):u.snapshotVersion.compareTo(wt.min())>0&&(c.readTime=NE(o,u.snapshotVersion.toTimestamp())),c}(this.O,e);const r=function fk(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.fo(t)}Ro(e){const t={};t.database=PE(this.O),t.removeTarget=e,this.fo(t)}}class l1 extends GR{constructor(e,t,r,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.O=u,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function hk(n,e){return n&&n.length>0?(bt(void 0!==e),n.map(t=>function(r,o){let u=pi(r.updateTime?r.updateTime:o);return u.isEqual(wt.min())&&(u=pi(o)),new YO(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=pi(e.commitTime);return this.listener.Vo(r,t)}return bt(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=PE(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>OE(this.O,r))};this.fo(t)}}class c1 extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=r,this.O=o,this.Co=!1}No(){if(this.Co)throw new Pe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.eo.Mr(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(ue.UNKNOWN,o.toString())})}Lr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.eo.Lr(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(ue.UNKNOWN,o.toString())})}terminate(){this.Co=!0}}class d1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve())))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(Vr(t),this.Oo=!1):Be("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class h1{constructor(e,t,r,o,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=u,this.jo.mr(g=>{r.enqueueAndForget((0,de.Z)(function*(){var E;wh(c)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,de.Z)(function*(I){const S=Ke(I);S.Ko.add(4),yield R_(S),S.Qo.set("Unknown"),S.Ko.delete(4),yield jE(S)}),function(I){return E.apply(this,arguments)})(c))}))}),this.Qo=new d1(r,o)}}function jE(n){return TS.apply(this,arguments)}function TS(){return TS=(0,de.Z)(function*(n){if(wh(n))for(const e of n.Go)yield e(!0)}),TS.apply(this,arguments)}function R_(n){return AS.apply(this,arguments)}function AS(){return AS=(0,de.Z)(function*(n){for(const e of n.Go)yield e(!1)}),AS.apply(this,arguments)}function dD(n,e){const t=Ke(n);t.qo.has(e.targetId)||(t.qo.set(e.targetId,e),MS(t)?xS(t):O_(t).co()&&SS(t,e))}function HE(n,e){const t=Ke(n),r=O_(t);t.qo.delete(e),r.co()&&$R(t,e),0===t.qo.size&&(r.co()?r.ho():wh(t)&&t.Qo.set("Unknown"))}function SS(n,e){n.Wo.Z(e.targetId),O_(n).Ao(e)}function $R(n,e){n.Wo.Z(e),O_(n).Ro(e)}function xS(n){n.Wo=new sk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qo.get(e)||null}),O_(n).start(),n.Qo.Mo()}function MS(n){return wh(n)&&!O_(n).oo()&&n.qo.size>0}function wh(n){return 0===Ke(n).Ko.size}function WR(n){n.Wo=void 0}function f1(n){return NS.apply(this,arguments)}function NS(){return NS=(0,de.Z)(function*(n){n.qo.forEach((e,t)=>{SS(n,e)})}),NS.apply(this,arguments)}function p1(n,e){return RS.apply(this,arguments)}function RS(){return RS=(0,de.Z)(function*(n,e){WR(n),MS(n)?(n.Qo.Bo(e),xS(n)):n.Qo.set("Unknown")}),RS.apply(this,arguments)}function g1(n,e,t){return PS.apply(this,arguments)}function PS(){return PS=(0,de.Z)(function*(n,e,t){if(n.Qo.set("Online"),e instanceof GN&&2===e.state&&e.cause)try{yield(r=(0,de.Z)(function*(o,u){const c=u.cause;for(const g of u.targetIds)o.qo.has(g)&&(yield o.remoteSyncer.rejectListen(g,c),o.qo.delete(g),o.Wo.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield hD(n,r)}else if(e instanceof QC?n.Wo.ct(e):e instanceof HN?n.Wo._t(e):n.Wo.ht(e),!t.isEqual(wt.min()))try{const r=yield OR(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const c=o.Wo.yt(u);return c.targetChanges.forEach((g,E)=>{if(g.resumeToken.approximateByteSize()>0){const I=o.qo.get(E);I&&o.qo.set(E,I.withResumeToken(g.resumeToken,u))}}),c.targetMismatches.forEach(g=>{const E=o.qo.get(g);if(!E)return;o.qo.set(g,E.withResumeToken(ri.EMPTY_BYTE_STRING,E.snapshotVersion)),$R(o,g);const I=new _h(E.target,g,1,E.sequenceNumber);SS(o,I)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield hD(n,r)}var r}),PS.apply(this,arguments)}function hD(n,e,t){return OS.apply(this,arguments)}function OS(){return OS=(0,de.Z)(function*(n,e,t){if(!Mp(e))throw e;n.Ko.add(1),yield R_(n),n.Qo.set("Offline"),t||(t=()=>OR(n.localStore)),n.asyncQueue.enqueueRetryable((0,de.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.Ko.delete(1),yield jE(n)}))}),OS.apply(this,arguments)}function qR(n,e){return e().catch(t=>hD(n,t,e))}function P_(n){return kS.apply(this,arguments)}function kS(){return kS=(0,de.Z)(function*(n){const e=Ke(n),t=Ih(e);let r=e.Uo.length>0?e.Uo[e.Uo.length-1].batchId:-1;for(;m1(e);)try{const o=yield qk(e.localStore,r);if(null===o){0===e.Uo.length&&t.ho();break}r=o.batchId,_1(e,o)}catch(o){yield hD(e,o)}zR(e)&&KR(e)}),kS.apply(this,arguments)}function m1(n){return wh(n)&&n.Uo.length<10}function _1(n,e){n.Uo.push(e);const t=Ih(n);t.co()&&t.bo&&t.vo(e.mutations)}function zR(n){return wh(n)&&!Ih(n).oo()&&n.Uo.length>0}function KR(n){Ih(n).start()}function y1(n){return FS.apply(this,arguments)}function FS(){return FS=(0,de.Z)(function*(n){Ih(n).Do()}),FS.apply(this,arguments)}function v1(n){return LS.apply(this,arguments)}function LS(){return LS=(0,de.Z)(function*(n){const e=Ih(n);for(const t of n.Uo)e.vo(t.mutations)}),LS.apply(this,arguments)}function E1(n,e,t){return VS.apply(this,arguments)}function VS(){return VS=(0,de.Z)(function*(n,e,t){const r=n.Uo.shift(),o=JA.from(r,e,t);yield qR(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield P_(n)}),VS.apply(this,arguments)}function w1(n,e){return BS.apply(this,arguments)}function BS(){return BS=(0,de.Z)(function*(n,e){var t;e&&Ih(n).bo&&(yield(t=(0,de.Z)(function*(r,o){if(BN(u=o.code)&&u!==ue.ABORTED){const c=r.Uo.shift();Ih(r).ao(),yield qR(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),yield P_(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),zR(n)&&KR(n)}),BS.apply(this,arguments)}function ZR(n,e){return US.apply(this,arguments)}function US(){return US=(0,de.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=wh(t);t.Ko.add(3),yield R_(t),r&&t.Qo.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ko.delete(3),yield jE(t)}),US.apply(this,arguments)}function jS(n,e){return HS.apply(this,arguments)}function HS(){return HS=(0,de.Z)(function*(n,e){const t=Ke(n);e?(t.Ko.delete(2),yield jE(t)):e||(t.Ko.add(2),yield R_(t),t.Qo.set("Unknown"))}),HS.apply(this,arguments)}function O_(n){return n.zo||(n.zo=function(e,t,r){const o=Ke(e);return o.No(),new u1(t,o.eo,o.authCredentials,o.appCheckCredentials,o.O,r)}(n.datastore,n.asyncQueue,{Pr:f1.bind(null,n),vr:p1.bind(null,n),To:g1.bind(null,n)}),n.Go.push(function(){var e=(0,de.Z)(function*(t){t?(n.zo.ao(),MS(n)?xS(n):n.Qo.set("Unknown")):(yield n.zo.stop(),WR(n))});return function(t){return e.apply(this,arguments)}}())),n.zo}function Ih(n){return n.Ho||(n.Ho=function(e,t,r){const o=Ke(e);return o.No(),new l1(t,o.eo,o.authCredentials,o.appCheckCredentials,o.O,r)}(n.datastore,n.asyncQueue,{Pr:y1.bind(null,n),vr:w1.bind(null,n),So:v1.bind(null,n),Vo:E1.bind(null,n)}),n.Go.push(function(){var e=(0,de.Z)(function*(t){t?(n.Ho.ao(),yield P_(n)):(yield n.Ho.stop(),n.Uo.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.Uo.length} pending writes`),n.Uo=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ho}class GS{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,o,u){const c=Date.now()+r,g=new GS(e,t,c,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function k_(n,e){if(Vr("AsyncQueue",`${e}: ${n}`),Mp(n))return new Pe(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class F_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||tt.comparator(t.key,r.key):(t,r)=>tt.comparator(t.key,r.key),this.keyedMap=qA(),this.sortedSet=new Tr(this.comparator)}static emptySet(e){return new F_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof F_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new F_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class YR{constructor(){this.Jo=new Tr(tt.comparator)}track(e){const t=e.doc.key,r=this.Jo.get(t);r?0!==e.type&&3===r.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==r.type?this.Jo=this.Jo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Jo=this.Jo.remove(t):1===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):lt():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal((t,r)=>{e.push(r)}),e}}class L_{constructor(e,t,r,o,u,c,g,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=g,this.excludesMetadataChanges=E}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new L_(e,t,F_.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class I1{constructor(){this.Xo=void 0,this.listeners=[]}}class C1{constructor(){this.queries=new x_(e=>DN(e),bE),this.onlineState="Unknown",this.Zo=new Set}}function $S(n,e){return WS.apply(this,arguments)}function WS(){return WS=(0,de.Z)(function*(n,e){const t=Ke(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new I1),o)try{u.Xo=yield t.onListen(r)}catch(c){const g=k_(c,`Initialization of query '${HA(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.tc(t.onlineState),u.Xo&&e.ec(u.Xo)&&KS(t)}),WS.apply(this,arguments)}function qS(n,e){return zS.apply(this,arguments)}function zS(){return zS=(0,de.Z)(function*(n,e){const t=Ke(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),zS.apply(this,arguments)}function D1(n,e){const t=Ke(n);let r=!1;for(const o of e){const c=t.queries.get(o.query);if(c){for(const g of c.listeners)g.ec(o)&&(r=!0);c.Xo=o}}r&&KS(t)}function b1(n,e,t){const r=Ke(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function KS(n){n.Zo.forEach(e=>{e.next()})}class ZS{constructor(e,t,r){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}ec(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new L_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){return!e.fromCache||!(this.options.uc&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}rc(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}cc(e){e=L_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class T1{constructor(e,t){this.payload=e,this.byteLength=t}ac(){return"metadata"in this.payload}}class QR{constructor(e){this.O=e}Gs(e){return wl(this.O,e)}js(e){return e.metadata.exists?JN(this.O,e.document,!1):sr.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return pi(e)}}class A1{constructor(e,t,r){this.hc=e,this.localStore=t,this.O=r,this.queries=[],this.documents=[],this.progress=JR(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}fc(e){const t=new Map,r=new QR(this.O);for(const o of e)if(o.metadata.queries){const u=r.Gs(o.metadata.name);for(const c of o.metadata.queries){const g=(t.get(c)||mn()).add(u);t.set(c,g)}}return t}complete(){var e=this;return(0,de.Z)(function*(){const t=yield function Kk(n,e,t,r){return _S.apply(this,arguments)}(e.localStore,new QR(e.O),e.documents,e.hc.id),r=e.fc(e.documents);for(const o of e.queries)yield Zk(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",new jk(Object.assign({},e.progress),t)})()}}function JR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class XR{constructor(e){this.key=e}}class eP{constructor(e){this.key=e}}class tP{constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=mn(),this.mutatedKeys=mn(),this.mc=bN(e),this.gc=new F_(this.mc)}get yc(){return this.dc}Ic(e,t){const r=t?t.Ec:new YR,o=t?t.gc:this.gc;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,g=!1;const E=$C(this.query)&&o.size===this.query.limit?o.last():null,I=WC(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,M)=>{const F=o.get(S),q=GA(this.query,M)?M:null,Y=!!F&&this.mutatedKeys.has(F.key),Re=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Ze=!1;F&&q?F.data.isEqual(q.data)?Y!==Re&&(r.track({type:3,doc:q}),Ze=!0):this.Tc(F,q)||(r.track({type:2,doc:q}),Ze=!0,(E&&this.mc(q,E)>0||I&&this.mc(q,I)<0)&&(g=!0)):!F&&q?(r.track({type:0,doc:q}),Ze=!0):F&&!q&&(r.track({type:1,doc:F}),Ze=!0,(E||I)&&(g=!0)),Ze&&(q?(c=c.add(q),u=Re?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),$C(this.query)||WC(this.query))for(;c.size>this.query.limit;){const S=$C(this.query)?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{gc:c,Ec:r,ks:g,mutatedKeys:u}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const u=e.Ec.Yo();u.sort((I,S)=>function(M,F){const q=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return q(M)-q(F)}(I.type,S.type)||this.mc(I.doc,S.doc)),this.Ac(r);const c=t?this.Rc():[],g=0===this.wc.size&&this.current?1:0,E=g!==this._c;return this._c=g,0!==u.length||E?{snapshot:new L_(this.query,e.gc,o,u,e.mutatedKeys,0===g,E,!1),Pc:c}:{Pc:c}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new YR,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach(t=>this.dc=this.dc.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.dc=this.dc.delete(t)),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=mn(),this.gc.forEach(r=>{this.bc(r.key)&&(this.wc=this.wc.add(r.key))});const t=[];return e.forEach(r=>{this.wc.has(r)||t.push(new eP(r))}),this.wc.forEach(r=>{e.has(r)||t.push(new XR(r))}),t}vc(e){this.dc=e.Ks,this.wc=mn();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return L_.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class S1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class x1{constructor(e){this.key=e,this.Sc=!1}}class M1{constructor(e,t,r,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Dc={},this.Cc=new x_(g=>DN(g),bE),this.Nc=new Map,this.xc=new Set,this.kc=new Tr(tt.comparator),this.Oc=new Map,this.Mc=new vS,this.$c={},this.Fc=new Map,this.Bc=Op.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}function N1(n,e){return YS.apply(this,arguments)}function YS(){return YS=(0,de.Z)(function*(n,e){const t=vx(n);let r,o;const u=t.Cc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Vc();else{const c=yield M_(t.localStore,va(e));t.isPrimaryClient&&dD(t.remoteStore,c);const g=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,o=yield QS(t,e,r,"current"===g)}return o}),YS.apply(this,arguments)}function QS(n,e,t,r){return JS.apply(this,arguments)}function JS(){return JS=(0,de.Z)(function*(n,e,t,r){n.Uc=(S,M,F)=>{return(q=(0,de.Z)(function*(Y,Re,Ze,Ot){let Vt=Re.view.Ic(Ze);Vt.ks&&(Vt=yield aD(Y.localStore,Re.query,!1).then(({documents:ar})=>Re.view.Ic(ar,Vt)));const or=Ot&&Ot.targetChanges.get(Re.targetId),Kt=Re.view.applyChanges(Vt,Y.isPrimaryClient,or);return ux(Y,Re.targetId,Kt.Pc),Kt.snapshot}),function(Y,Re,Ze,Ot){return q.apply(this,arguments)})(n,S,M,F);var q};const o=yield aD(n.localStore,e,!0),u=new tP(e,o.Ks),c=u.Ic(o.documents),g=ME.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),E=u.applyChanges(c,n.isPrimaryClient,g);ux(n,t,E.Pc);const I=new S1(e,t,u);return n.Cc.set(e,I),n.Nc.has(t)?n.Nc.get(t).push(e):n.Nc.set(t,[e]),E.snapshot}),JS.apply(this,arguments)}function R1(n,e){return XS.apply(this,arguments)}function XS(){return XS=(0,de.Z)(function*(n,e){const t=Ke(n),r=t.Cc.get(e),o=t.Nc.get(r.targetId);if(o.length>1)return t.Nc.set(r.targetId,o.filter(u=>!bE(u,e))),void t.Cc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield N_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),HE(t.remoteStore,r.targetId),V_(t,r.targetId)}).catch(kp))):(V_(t,r.targetId),yield N_(t.localStore,r.targetId,!0))}),XS.apply(this,arguments)}function ex(){return ex=(0,de.Z)(function*(n,e,t){const r=Ex(n);try{const o=yield function(u,c){const g=Ke(u),E=hi.now(),I=c.reduce((M,F)=>M.add(F.key),mn());let S;return g.persistence.runTransaction("Locally write mutations","readwrite",M=>g.Us.Es(M,I).next(F=>{S=F;const q=[];for(const Y of c){const Re=JO(Y,S.get(Y.key));null!=Re&&q.push(new Sp(Y.key,Re,_N(Re.value.mapValue),Br.exists(!0)))}return g.gs.addMutationBatch(M,E,q,c)})).then(M=>(M.applyToLocalDocumentSet(S),{batchId:M.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,c,g){let E=u.$c[u.currentUser.toKey()];E||(E=new Tr(Ht)),E=E.insert(c,g),u.$c[u.currentUser.toKey()]=E}(r,o.batchId,t),yield kc(r,o.changes),yield P_(r.remoteStore)}catch(o){const u=k_(o,"Failed to persist write");t.reject(u)}}),ex.apply(this,arguments)}function nP(n,e){return tx.apply(this,arguments)}function tx(){return tx=(0,de.Z)(function*(n,e){const t=Ke(n);try{const r=yield Wk(t.localStore,e);e.targetChanges.forEach((o,u)=>{const c=t.Oc.get(u);c&&(bt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.Sc=!0:o.modifiedDocuments.size>0?bt(c.Sc):o.removedDocuments.size>0&&(bt(c.Sc),c.Sc=!1))}),yield kc(t,r,e)}catch(r){yield kp(r)}}),tx.apply(this,arguments)}function rP(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.Cc.forEach((u,c)=>{const g=c.view.tc(e);g.snapshot&&o.push(g.snapshot)}),function(u,c){const g=Ke(u);g.onlineState=c;let E=!1;g.queries.forEach((I,S)=>{for(const M of S.listeners)M.tc(c)&&(E=!0)}),E&&KS(g)}(r.eventManager,e),o.length&&r.Dc.To(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function O1(n,e,t){return nx.apply(this,arguments)}function nx(){return nx=(0,de.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Oc.get(e),u=o&&o.key;if(u){let c=new Tr(tt.comparator);c=c.insert(u,sr.newNoDocument(u,wt.min()));const g=mn().add(u),E=new xE(wt.min(),new Map,new Kn(Ht),c,g);yield nP(r,E),r.kc=r.kc.remove(u),r.Oc.delete(e),lx(r)}else yield N_(r.localStore,e,!1).then(()=>V_(r,e,t)).catch(kp)}),nx.apply(this,arguments)}function k1(n,e){return rx.apply(this,arguments)}function rx(){return rx=(0,de.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const o=yield $k(t.localStore,e);ax(t,r,null),ox(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield kc(t,o)}catch(o){yield kp(o)}}),rx.apply(this,arguments)}function F1(n,e,t){return ix.apply(this,arguments)}function ix(){return ix=(0,de.Z)(function*(n,e,t){const r=Ke(n);try{const o=yield function(u,c){const g=Ke(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let I;return g.gs.lookupMutationBatch(E,c).next(S=>(bt(null!==S),I=S.keys(),g.gs.removeMutationBatch(E,S))).next(()=>g.gs.performConsistencyCheck(E)).next(()=>g.Us.Es(E,I))})}(r.localStore,e);ax(r,e,t),ox(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield kc(r,o)}catch(o){yield kp(o)}}),ix.apply(this,arguments)}function sx(){return sx=(0,de.Z)(function*(n,e){const t=Ke(n);wh(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ke(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>c.gs.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.Fc.get(r)||[];o.push(e),t.Fc.set(r,o)}catch(r){const o=k_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),sx.apply(this,arguments)}function ox(n,e){(n.Fc.get(e)||[]).forEach(t=>{t.resolve()}),n.Fc.delete(e)}function ax(n,e,t){const r=Ke(n);let o=r.$c[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.$c[r.currentUser.toKey()]=o}}function V_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Nc.get(e))n.Cc.delete(r),t&&n.Dc.qc(r,t);n.Nc.delete(e),n.isPrimaryClient&&n.Mc.si(e).forEach(r=>{n.Mc.containsKey(r)||iP(n,r)})}function iP(n,e){n.xc.delete(e.path.canonicalString());const t=n.kc.get(e);null!==t&&(HE(n.remoteStore,t),n.kc=n.kc.remove(e),n.Oc.delete(t),lx(n))}function ux(n,e,t){for(const r of t)r instanceof XR?(n.Mc.addReference(r.key,e),V1(n,r)):r instanceof eP?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.Mc.removeReference(r.key,e),n.Mc.containsKey(r.key)||iP(n,r.key)):lt()}function V1(n,e){const t=e.key,r=t.path.canonicalString();n.kc.get(t)||n.xc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.xc.add(r),lx(n))}function lx(n){for(;n.xc.size>0&&n.kc.size<n.maxConcurrentLimboResolutions;){const e=n.xc.values().next().value;n.xc.delete(e);const t=new tt(cn.fromString(e)),r=n.Bc.next();n.Oc.set(r,new x1(t)),n.kc=n.kc.insert(t,r),dD(n.remoteStore,new _h(va(__(t.path)),r,2,ko.A))}}function kc(n,e,t){return cx.apply(this,arguments)}function cx(){return cx=(0,de.Z)(function*(n,e,t){const r=Ke(n),o=[],u=[],c=[];var g;r.Cc.isEmpty()||(r.Cc.forEach((g,E)=>{c.push(r.Uc(E,e,t).then(I=>{if(I){r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,I.fromCache?"not-current":"current"),o.push(I);const S=fS.Ss(E.targetId,I);u.push(S)}}))}),yield Promise.all(c),r.Dc.To(o),yield(g=(0,de.Z)(function*(E,I){const S=Ke(E);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>fe.forEach(I,F=>fe.forEach(F.vs,q=>S.persistence.referenceDelegate.addReference(M,F.targetId,q)).next(()=>fe.forEach(F.Vs,q=>S.persistence.referenceDelegate.removeReference(M,F.targetId,q)))))}catch(M){if(!Mp(M))throw M;Be("LocalStore","Failed to update sequence numbers: "+M)}for(const M of I){const F=M.targetId;if(!M.fromCache){const q=S.Ms.get(F),Re=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);S.Ms=S.Ms.insert(F,Re)}}}),function(E,I){return g.apply(this,arguments)})(r.localStore,u))}),cx.apply(this,arguments)}function B1(n,e){return dx.apply(this,arguments)}function dx(){return dx=(0,de.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield PR(t.localStore,e);t.currentUser=e,(o=t).Fc.forEach(c=>{c.forEach(g=>{g.reject(new Pe(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Fc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield kc(t,r.qs)}var o}),dx.apply(this,arguments)}function U1(n,e){const t=Ke(n),r=t.Oc.get(e);if(r&&r.Sc)return mn().add(r.key);{let o=mn();const u=t.Nc.get(e);if(!u)return o;for(const c of u){const g=t.Cc.get(c);o=o.unionWith(g.view.yc)}return o}}function j1(n,e){return hx.apply(this,arguments)}function hx(){return hx=(0,de.Z)(function*(n,e){const t=Ke(n),r=yield aD(t.localStore,e.query,!0),o=e.view.vc(r);return t.isPrimaryClient&&ux(t,e.targetId,o.Pc),o}),hx.apply(this,arguments)}function H1(n){return fx.apply(this,arguments)}function fx(){return fx=(0,de.Z)(function*(n){const e=Ke(n);return LR(e.localStore).then(t=>kc(e,t))}),fx.apply(this,arguments)}function G1(n,e,t,r){return px.apply(this,arguments)}function px(){return px=(0,de.Z)(function*(n,e,t,r){const o=Ke(n),u=yield function(c,g){const E=Ke(c),I=Ke(E.gs);return E.persistence.runTransaction("Lookup mutation documents","readonly",S=>I.Ge(S,g).next(M=>M?E.Us.Es(S,M):fe.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield P_(o.remoteStore):"acknowledged"===t||"rejected"===t?(ax(o,e,r||null),ox(o,e),g=e,Ke(Ke(o.localStore).gs).Qe(g)):lt(),yield kc(o,u)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),px.apply(this,arguments)}function gx(){return gx=(0,de.Z)(function*(n,e){const t=Ke(n);if(vx(t),Ex(t),!0===e&&!0!==t.Lc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield sP(t,r.toArray());t.Lc=!0,yield jS(t.remoteStore,!0);for(const u of o)dD(t.remoteStore,u)}else if(!1===e&&!1!==t.Lc){const r=[];let o=Promise.resolve();t.Nc.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then(()=>(V_(t,c),N_(t.localStore,c,!0))),HE(t.remoteStore,c)}),yield o,yield sP(t,r),function(u){const c=Ke(u);c.Oc.forEach((g,E)=>{HE(c.remoteStore,E)}),c.Mc.ii(),c.Oc=new Map,c.kc=new Tr(tt.comparator)}(t),t.Lc=!1,yield jS(t.remoteStore,!1)}}),gx.apply(this,arguments)}function sP(n,e,t){return mx.apply(this,arguments)}function mx(){return mx=(0,de.Z)(function*(n,e,t){const r=Ke(n),o=[],u=[];for(const c of e){let g;const E=r.Nc.get(c);if(E&&0!==E.length){g=yield M_(r.localStore,va(E[0]));for(const I of E){const S=r.Cc.get(I),M=yield j1(r,S);M.snapshot&&u.push(M.snapshot)}}else{const I=yield FR(r.localStore,c);g=yield M_(r.localStore,I),yield QS(r,oP(I),c,!1)}o.push(g)}return r.Dc.To(u),o}),mx.apply(this,arguments)}function oP(n){return IN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function W1(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).ds()}function q1(n,e,t,r){return _x.apply(this,arguments)}function _x(){return _x=(0,de.Z)(function*(n,e,t,r){const o=Ke(n);if(o.Lc)Be("SyncEngine","Ignoring unexpected query state notification.");else if(o.Nc.has(e))switch(t){case"current":case"not-current":{const u=yield LR(o.localStore),c=xE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield kc(o,u,c);break}case"rejected":yield N_(o.localStore,e,!0),V_(o,e,r);break;default:lt()}}),_x.apply(this,arguments)}function z1(n,e,t){return yx.apply(this,arguments)}function yx(){return yx=(0,de.Z)(function*(n,e,t){const r=vx(n);if(r.Lc){for(const o of e){if(r.Nc.has(o)){Be("SyncEngine","Adding an already active target "+o);continue}const u=yield FR(r.localStore,o),c=yield M_(r.localStore,u);yield QS(r,oP(u),c.targetId,!1),dD(r.remoteStore,c)}for(const o of t)r.Nc.has(o)&&(yield N_(r.localStore,o,!1).then(()=>{HE(r.remoteStore,o),V_(r,o)}).catch(kp))}}),yx.apply(this,arguments)}function vx(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O1.bind(null,e),e.Dc.To=D1.bind(null,e.eventManager),e.Dc.qc=b1.bind(null,e.eventManager),e}function Ex(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F1.bind(null,e),e}class aP{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,de.Z)(function*(){t.O=UE(e.databaseInfo.databaseId),t.sharedClientState=t.Gc(e),t.persistence=t.jc(e),yield t.persistence.start(),t.gcScheduler=t.Qc(e),t.localStore=t.Wc(e)})()}Qc(e){return null}Wc(e){return RR(this.persistence,new NR,e.initialUser,this.O)}jc(e){return new n1(ES.bi,this.O)}Gc(e){return new UR}terminate(){var e=this;return(0,de.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class uP extends aP{constructor(e,t,r){super(),this.zc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,de.Z)(function*(){yield t().call(r,e),yield function zk(n){return mS.apply(this,arguments)}(r.localStore),yield r.zc.initialize(r,e),yield Ex(r.zc.syncEngine),yield P_(r.zc.remoteStore),yield r.persistence.Hn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Wc(e){return RR(this.persistence,new NR,e.initialUser,this.O)}Qc(e){return new kk(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}jc(e){const t=hS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ao.withCacheSize(this.cacheSizeBytes):ao.DEFAULT;return new dS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,HR(),cD(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new UR}}class Z1 extends uP{constructor(e,t){super(e,t,!1),this.zc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,de.Z)(function*(){yield t().call(r,e);const o=r.zc.syncEngine;r.sharedClientState instanceof DS&&(r.sharedClientState.syncEngine={hr:G1.bind(null,o),lr:q1.bind(null,o),dr:z1.bind(null,o),ds:W1.bind(null,o),ar:H1.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Hn(function(){var u=(0,de.Z)(function*(c){yield function $1(n,e){return gx.apply(this,arguments)}(r.zc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}Gc(e){const t=HR();if(!DS.Vt(t))throw new Pe(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=hS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new DS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class wx{initialize(e,t){var r=this;return(0,de.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>rP(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=B1.bind(null,r.syncEngine),yield jS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new C1}createDatastore(e){const t=UE(e.databaseInfo.databaseId),r=new a1(e.databaseInfo);return new c1(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>rP(this.syncEngine,g,0),c=jR.Vt()?new jR:new i1,new h1(t,r,o,u,c);var t,r,o,u,c}createSyncEngine(e,t){return function(r,o,u,c,g,E,I){const S=new M1(r,o,u,c,g,E);return I&&(S.Lc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,de.Z)(function*(t){const r=Ke(t);Be("RemoteStore","RemoteStore shutting down."),r.Ko.add(5),yield R_(r),r.jo.shutdown(),r.Qo.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function lP(n,e=10240){let t=0;return{read:()=>(0,de.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,de.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class fD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Y1{constructor(e,t){this.Yc=e,this.O=t,this.metadata=new di,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then(r=>{r&&r.ac()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Yc.cancel()}getMetadata(){var e=this;return(0,de.Z)(function*(){return e.metadata.promise})()}Kc(){var e=this;return(0,de.Z)(function*(){return yield e.getMetadata(),e.Zc()})()}Zc(){var e=this;return(0,de.Z)(function*(){const t=yield e.tu();if(null===t)return null;const r=e.Xc.decode(t),o=Number(r);isNaN(o)&&e.eu(`length string (${r}) is not valid number`);const u=yield e.nu(o);return new T1(JSON.parse(u),t.length+o)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}tu(){var e=this;return(0,de.Z)(function*(){for(;e.su()<0&&!(yield e.iu()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.eu("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}nu(e){var t=this;return(0,de.Z)(function*(){for(;t.buffer.length<e;)(yield t.iu())&&t.eu("Reached the end of bundle when more is expected.");const r=t.Xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}iu(){var e=this;return(0,de.Z)(function*(){const t=yield e.Yc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Q1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,de.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,de.Z)(function*(u,c){const g=Ke(u),E=PE(g.O)+"/documents",I={documents:c.map(q=>RE(g.O,q))},S=yield g.Lr("BatchGetDocuments",E,I),M=new Map;S.forEach(q=>{const Y=function ck(n,e){return"found"in e?function(t,r){bt(!!r.found);const o=wl(t,r.found.name),u=pi(r.found.updateTime),c=new gs({mapValue:{fields:r.found.fields}});return sr.newFoundDocument(o,u,c)}(n,e):"missing"in e?function(t,r){bt(!!r.missing),bt(!!r.readTime);const o=wl(t,r.missing),u=pi(r.readTime);return sr.newNoDocument(o,u)}(n,e):lt()}(g.O,q);M.set(Y.key.toString(),Y)});const F=[];return c.forEach(q=>{const Y=M.get(q.toString());bt(!!Y),F.push(Y)}),F}),function(u,c){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new SE(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,de.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=tt.fromPath(o);e.mutations.push(new WA(u,e.precondition(u)))}),yield(r=(0,de.Z)(function*(o,u){const c=Ke(o),g=PE(c.O)+"/documents",E={writes:u.map(I=>OE(c.O,I))};yield c.Mr("Commit",g,E)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=wt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Br.updateTime(t):Br.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wt.min()))throw new Pe(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Br.updateTime(t)}return Br.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class J1{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.ru=5,this.ro=new bS(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){var e=this;this.ro.Hr((0,de.Z)(function*(){const t=new Q1(e.datastore),r=e.cu(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.uu(u)}))}).catch(o=>{e.uu(o)})}))}cu(e){try{const t=this.updateFunction(e);return!Dp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget(()=>(this.ou(),Promise.resolve()))):this.deferred.reject(e)}au(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!BN(t)}return!1}}class X1{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Gi.UNAUTHENTICATED,this.clientId=uN.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,de.Z)(function*(g){Be("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Be("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,de.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,de.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=k_(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function cP(n,e){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,de.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,de.Z)(function*(u){r.isEqual(u)||(yield PR(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Ix.apply(this,arguments)}function dP(n,e){return Cx.apply(this,arguments)}function Cx(){return Cx=(0,de.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Dx(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>ZR(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>ZR(e.remoteStore,u)),n.onlineComponents=e}),Cx.apply(this,arguments)}function Dx(n){return bx.apply(this,arguments)}function bx(){return bx=(0,de.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield cP(n,new aP)),n.offlineComponents}),bx.apply(this,arguments)}function pD(n){return Tx.apply(this,arguments)}function Tx(){return Tx=(0,de.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield dP(n,new wx)),n.onlineComponents}),Tx.apply(this,arguments)}function hP(n){return Dx(n).then(e=>e.persistence)}function Ax(n){return Dx(n).then(e=>e.localStore)}function fP(n){return pD(n).then(e=>e.remoteStore)}function Sx(n){return pD(n).then(e=>e.syncEngine)}function B_(n){return xx.apply(this,arguments)}function xx(){return xx=(0,de.Z)(function*(n){const e=yield pD(n),t=e.eventManager;return t.onListen=N1.bind(null,e.syncEngine),t.onUnlisten=R1.bind(null,e.syncEngine),t}),xx.apply(this,arguments)}function pP(n,e,t={}){const r=new di;return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function(o,u,c,g,E){const I=new fD({next:M=>{u.enqueueAndForget(()=>qS(o,S));const F=M.docs.has(c);!F&&M.fromCache?E.reject(new Pe(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&M.fromCache&&g&&"server"===g.source?E.reject(new Pe(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(M)},error:M=>E.reject(M)}),S=new ZS(__(c.path),I,{includeMetadataChanges:!0,uc:!0});return $S(o,S)}(yield B_(n),n.asyncQueue,e,t,r)})),r.promise}function gP(n,e,t={}){const r=new di;return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function(o,u,c,g,E){const I=new fD({next:M=>{u.enqueueAndForget(()=>qS(o,S)),M.fromCache&&"server"===g.source?E.reject(new Pe(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(M)},error:M=>E.reject(M)}),S=new ZS(c,I,{includeMetadataChanges:!0,uc:!0});return $S(o,S)}(yield B_(n),n.asyncQueue,e,t,r)})),r.promise}const mP=new Map;function Mx(n,e,t){if(!t)throw new Pe(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _P(n,e,t,r){if(!0===e&&!0===r)throw new Pe(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yP(n){if(!tt.isDocumentKey(n))throw new Pe(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vP(n){if(tt.isDocumentKey(n))throw new Pe(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function zt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gD(n);throw new Pe(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function EP(n,e){if(e<=0)throw new Pe(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class wP{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,_P("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class GE{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wP({}),this._settingsFrozen=!1,e instanceof Cp?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Pe(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cp(o.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wP(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new DO;switch(t.type){case"gapi":const r=t.client;return bt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new SO(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=mP.get(e);t&&(Be("ComponentProvider","Removing Datastore"),mP.delete(e),t.terminate())}(this),Promise.resolve()}}class Vn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vn(this.firestore,e,this._key)}}class _s{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _s(this.firestore,e,this._query)}}class Dl extends _s{constructor(e,t,r){super(e,t,__(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vn(this.firestore,null,new tt(e))}withConverter(e){return new Dl(this.firestore,e,this._path)}}function IP(n,e,...t){if(n=(0,P.m9)(n),Mx("collection","path",e),n instanceof GE){const r=cn.fromString(e,...t);return vP(r),new Dl(n,null,r)}{if(!(n instanceof Vn||n instanceof Dl))throw new Pe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return vP(r),new Dl(n.firestore,null,r)}}function mD(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=uN.R()),Mx("doc","path",e),n instanceof GE){const r=cn.fromString(e,...t);return yP(r),new Vn(n,null,new tt(r))}{if(!(n instanceof Vn||n instanceof Dl))throw new Pe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return yP(r),new Vn(n.firestore,n instanceof Dl?n.converter:null,new tt(r))}}function CP(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof Vn||n instanceof Dl)&&(e instanceof Vn||e instanceof Dl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function DP(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof _s&&e instanceof _s&&n.firestore===e.firestore&&bE(n._query,e._query)&&n.converter===e.converter}class cF{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new bS(this,"async_queue_retry"),this.yu=()=>{const t=cD();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ro.Yr()};const e=cD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=cD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise(()=>{});const t=new di;return this.Iu(()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.lu.push(e),this.Eu()))}Eu(){var e=this;return(0,de.Z)(function*(){if(0!==e.lu.length){try{yield e.lu[0](),e.lu.shift(),e.ro.reset()}catch(t){if(!Mp(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.lu.length>0&&e.ro.Hr(()=>e.Eu())}})()}Iu(e){const t=this.hu.then(()=>(this.wu=!0,e().catch(r=>{throw this._u=r,this.wu=!1,Vr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.wu=!1,r))));return this.hu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const o=GS.createAndSchedule(this,e,t,r,u=>this.Tu(u));return this.du.push(o),o}pu(){this._u&&lt()}verifyOperationInProgress(){}Au(){var e=this;return(0,de.Z)(function*(){let t;do{t=e.hu,yield t}while(t!==e.hu)})()}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()})}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function Nx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class dF{constructor(){this._progressObserver={},this._taskCompletionResolver=new di,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Zn extends GE{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new cF,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||bP(this),this._firestoreClient.terminate()}}function jr(n){return n._firestoreClient||bP(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function bP(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new OO(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new X1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function TP(n,e,t){const r=new di;return n.asyncQueue.enqueue((0,de.Z)(function*(){try{yield cP(n,t),yield dP(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ue.FAILED_PRECONDITION||u.code===ue.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function AP(n){if(n._initialized||n._terminated)throw new Pe(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Fc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bl(ri.fromBase64String(e))}catch(t){throw new Pe(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bl(ri.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Fp{constructor(e){this._methodName=e}}class _D{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const wF=/^__.*__$/;class IF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Sp(e,this.data,this.fieldMask,t,this.fieldTransforms):new AE(e,this.data,t,this.fieldTransforms)}}class SP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Sp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class yD{constructor(e,t,r,o,u,c){this.settings=e,this.databaseId=t,this.O=r,this.ignoreUndefinedProperties=o,void 0===u&&this.vu(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new yD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Su({path:r,Cu:!1});return o.Nu(e),o}xu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Su({path:r,Cu:!1});return o.vu(),o}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return wD(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(xP(this.Vu)&&wF.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class CF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=r||UE(e)}Fu(e,t,r,o=!1){return new yD({Vu:e,methodName:t,$u:r,path:fi.emptyPath(),Cu:!1,Mu:o},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function Lp(n){const e=n._freezeSettings(),t=UE(n._databaseId);return new CF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function vD(n,e,t,r,o,u={}){const c=n.Fu(u.merge||u.mergeFields?2:0,e,t,o);kx("Data must be an object, but it was:",c,r);const g=RP(r,c);let E,I;if(u.merge)E=new h_(c.fieldMask),I=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const M of u.mergeFields){const F=Fx(e,M,t);if(!c.contains(F))throw new Pe(ue.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);OP(S,F)||S.push(F)}E=new h_(S),I=c.fieldTransforms.filter(M=>E.covers(M.field))}else E=null,I=c.fieldTransforms;return new IF(new gs(g),E,I)}class $E extends Fp{_toFieldTransform(e){if(2!==e.Vu)throw e.Ou(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $E}}function MP(n,e,t){return new yD({Vu:3,$u:e.settings.$u,methodName:n._methodName,Cu:t},e.databaseId,e.O,e.ignoreUndefinedProperties)}class Rx extends Fp{_toFieldTransform(e){return new TE(e.path,new v_)}isEqual(e){return e instanceof Rx}}class DF extends Fp{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=MP(this,e,!0),r=this.Bu.map(u=>Vp(u,t)),o=new Tp(r);return new TE(e.path,o)}isEqual(e){return this===e}}class bF extends Fp{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=MP(this,e,!0),r=this.Bu.map(u=>Vp(u,t)),o=new Ap(r);return new TE(e.path,o)}isEqual(e){return this===e}}class TF extends Fp{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new E_(e.O,SN(e.O,this.Lu));return new TE(e.path,t)}isEqual(e){return this===e}}function Px(n,e,t,r){const o=n.Fu(1,e,t);kx("Data must be an object, but it was:",o,r);const u=[],c=gs.empty();wp(r,(E,I)=>{const S=ED(e,E,t);I=(0,P.m9)(I);const M=o.xu(S);if(I instanceof $E)u.push(S);else{const F=Vp(I,M);null!=F&&(u.push(S),c.set(S,F))}});const g=new h_(u);return new SP(c,g,o.fieldTransforms)}function Ox(n,e,t,r,o,u){const c=n.Fu(1,e,t),g=[Fx(e,r,t)],E=[o];if(u.length%2!=0)throw new Pe(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)g.push(Fx(e,u[F])),E.push(u[F+1]);const I=[],S=gs.empty();for(let F=g.length-1;F>=0;--F)if(!OP(I,g[F])){const q=g[F];let Y=E[F];Y=(0,P.m9)(Y);const Re=c.xu(q);if(Y instanceof $E)I.push(q);else{const Ze=Vp(Y,Re);null!=Ze&&(I.push(q),S.set(q,Ze))}}const M=new h_(I);return new SP(S,M,c.fieldTransforms)}function NP(n,e,t,r=!1){return Vp(t,n.Fu(r?4:3,e))}function Vp(n,e){if(PP(n=(0,P.m9)(n)))return kx("Unsupported field value:",e,n),RP(n,e);if(n instanceof Fp)return function(t,r){if(!xP(r.Vu))throw r.Ou(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ou(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Cu&&4!==e.Vu)throw e.Ou("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const c of t){let g=Vp(c,r.ku(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return SN(r.O,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=hi.fromDate(t);return{timestampValue:NE(r.O,o)}}if(t instanceof hi){const o=new hi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:NE(r.O,o)}}if(t instanceof _D)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bl)return{bytesValue:zN(r.O,t._byteString)};if(t instanceof Vn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.Ou(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:zA(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ou(`Unsupported field value: ${gD(t)}`)}(n,e)}function RP(n,e){const t={};return dN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wp(n,(r,o)=>{const u=Vp(o,e.Du(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function PP(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof hi||n instanceof _D||n instanceof bl||n instanceof Vn||n instanceof Fp)}function kx(n,e,t){if(!PP(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=gD(t);throw e.Ou("an object"===r?n+" a custom object":n+" "+r)}var r}function Fx(n,e,t){if((e=(0,P.m9)(e))instanceof Fc)return e._internalPath;if("string"==typeof e)return ED(n,e);throw wD("Field path arguments must be of type string or ",n,!1,void 0,t)}const AF=new RegExp("[~\\*/\\[\\]]");function ED(n,e,t){if(e.search(AF)>=0)throw wD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fc(...e.split("."))._internalPath}catch(r){throw wD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wD(n,e,t,r,o){const u=r&&!r.isEmpty(),c=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let E="";return(u||c)&&(E+=" (found",u&&(E+=` in field ${r}`),c&&(E+=` in document ${o}`),E+=")"),new Pe(ue.INVALID_ARGUMENT,g+n+E)}function OP(n,e){return n.some(t=>t.isEqual(e))}class WE{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Vn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new SF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ID("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class SF extends WE{data(){return super.data()}}function ID(n,e){return"string"==typeof e?ED(n,e):e instanceof Fc?e._internalPath:e._delegate._internalPath}class Bp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lc extends WE{constructor(e,t,r,o,u,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ID("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class qE extends Lc{data(e={}){return super.data(e)}}class Ch{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Bp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new qE(this._firestore,this._userDataWriter,r.key,r,new Bp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new qE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Bp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||3!==c.type).map(c=>{const g=new qE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Bp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,I=-1;return 0!==c.type&&(E=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),I=u.indexOf(c.doc.key)),{type:xF(c.type),doc:g,oldIndex:E,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function xF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function kP(n,e){return n instanceof Lc&&e instanceof Lc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ch&&e instanceof Ch&&n._firestore===e._firestore&&DP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function FP(n){if(WC(n)&&0===n.explicitOrderBy.length)throw new Pe(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zE{}function Dh(n,...e){for(const t of e)n=t._apply(n);return n}class MF extends zE{constructor(e,t,r){super(),this.Uu=e,this.qu=t,this.Ku=r,this.type="where"}_apply(e){const t=Lp(e.firestore),r=function(o,u,c,g,E,I,S){let M;if(E.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new Pe(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){HP(S,I);const q=[];for(const Y of S)q.push(jP(g,o,Y));M={arrayValue:{values:q}}}else M=jP(g,o,S)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||HP(S,I),M=NP(c,"where",S,"in"===I||"not-in"===I);const F=Fs.create(E,I,M);return function(q,Y){if(Y.S()){const Ze=UA(q);if(null!==Ze&&!Ze.isEqual(Y.field))throw new Pe(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ze.toString()}' and '${Y.field.toString()}'`);const Ot=BA(q);null!==Ot&&GP(0,Y.field,Ot)}const Re=function(Ze,Ot){for(const Vt of Ze.filters)if(Ot.indexOf(Vt.op)>=0)return Vt.op;return null}(q,function(Ze){switch(Ze){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Y.op));if(null!==Re)throw new Pe(ue.INVALID_ARGUMENT,Re===Y.op?`Invalid query. You cannot use more than one '${Y.op.toString()}' filter.`:`Invalid query. You cannot use '${Y.op.toString()}' filters with '${Re.toString()}' filters.`)}(o,F),F}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new _s(e.firestore,e.converter,function(o,u){const c=o.filters.concat([u]);return new Pc(o.path,o.collectionGroup,o.explicitOrderBy.slice(),c,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class RF extends zE{constructor(e,t){super(),this.Uu=e,this.Gu=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Pe(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new m_(o,u);return function(g,E){if(null===BA(g)){const I=UA(g);null!==I&&GP(0,I,E.field)}}(r,c),c}(e._query,this.Uu,this.Gu);return new _s(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Pc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class LP extends zE{constructor(e,t,r){super(),this.type=e,this.ju=t,this.Qu=r}_apply(e){return new _s(e.firestore,e.converter,CN(e._query,this.ju,this.Qu))}}class VP extends zE{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=UP(e,this.type,this.Wu,this.zu);return new _s(e.firestore,e.converter,(o=t,new Pc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class BP extends zE{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=UP(e,this.type,this.Wu,this.zu);return new _s(e.firestore,e.converter,(o=t,new Pc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function UP(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof WE)return function(o,u,c,g,E){if(!g)throw new Pe(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const I=[];for(const S of y_(o))if(S.field.isKeyField())I.push(LC(u,g.key));else{const M=g.data.field(S.field);if(kA(M))throw new Pe(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const F=S.field.canonicalString();throw new Pe(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}I.push(M)}return new g_(I,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Lp(n.firestore);return function(u,c,g,E,I,S){const M=u.explicitOrderBy;if(I.length>M.length)throw new Pe(ue.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let q=0;q<I.length;q++){const Y=I[q];if(M[q].field.isKeyField()){if("string"!=typeof Y)throw new Pe(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof Y}`);if(!jA(u)&&-1!==Y.indexOf("/"))throw new Pe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${Y}' contains a slash.`);const Re=u.path.child(cn.fromString(Y));if(!tt.isDocumentKey(Re))throw new Pe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Re}' is not because it contains an odd number of segments.`);const Ze=new tt(Re);F.push(LC(c,Ze))}else{const Re=NP(g,E,Y);F.push(Re)}}return new g_(F,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function jP(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new Pe(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jA(e)&&-1!==t.indexOf("/"))throw new Pe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(cn.fromString(t));if(!tt.isDocumentKey(r))throw new Pe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return LC(n,new tt(r))}if(t instanceof Vn)return LC(n,t._key);throw new Pe(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gD(t)}.`)}function HP(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function GP(n,e,t){if(!t.isEqual(e))throw new Pe(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Lx{convertValue(e,t="none"){switch(bp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ip(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){const r={};return wp(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new _D(fr(e.latitude),fr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=hN(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vE(e));default:return null}}convertTimestamp(e){const t=gh(e);return new hi(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=cn.fromString(e);bt(rR(r));const o=new Cp(r.get(1),r.get(3)),u=new tt(r.popFirst(5));return o.isEqual(t)||Vr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function CD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class UF extends Lx{constructor(e){super(),this.firestore=e}convertBytes(e){return new bl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,t)}}class $P{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Lp(e)}set(e,t,r){this._verifyNotCommitted();const o=bh(e,this._firestore),u=CD(o.converter,t,r),c=vD(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(c.toMutation(o._key,Br.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=bh(e,this._firestore);let c;return c="string"==typeof(t=(0,P.m9)(t))||t instanceof Fc?Ox(this._dataReader,"WriteBatch.update",u._key,t,r,o):Px(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Br.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=bh(e,this._firestore);return this._mutations=this._mutations.concat(new SE(t._key,Br.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bh(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new Pe(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Up extends Lx{constructor(e){super(),this.firestore=e}convertBytes(e){return new bl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,t)}}function WP(n,e,t){n=zt(n,Vn);const r=zt(n.firestore,Zn),o=CD(n.converter,e,t);return U_(r,[vD(Lp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Br.none())])}function qP(n,e,t,...r){n=zt(n,Vn);const o=zt(n.firestore,Zn),u=Lp(o);let c;return c="string"==typeof(e=(0,P.m9)(e))||e instanceof Fc?Ox(u,"updateDoc",n._key,e,t,r):Px(u,"updateDoc",n._key,e),U_(o,[c.toMutation(n._key,Br.exists(!0))])}function zP(n,...e){var t,r,o;n=(0,P.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Nx(e[c])||(u=e[c],c++);const g={includeMetadataChanges:u.includeMetadataChanges};if(Nx(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(o=M.complete)||void 0===o?void 0:o.bind(M)}let E,I,S;if(n instanceof Vn)I=zt(n.firestore,Zn),S=__(n._key.path),E={next:M=>{e[c]&&e[c](Vx(I,n,M))},error:e[c+1],complete:e[c+2]};else{const M=zt(n,_s);I=zt(M.firestore,Zn),S=M._query;const F=new Up(I);E={next:q=>{e[c]&&e[c](new Ch(I,F,M,q))},error:e[c+1],complete:e[c+2]},FP(n._query)}return function(M,F,q,Y){const Re=new fD(Y),Ze=new ZS(F,Re,q);return M.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return $S(yield B_(M),Ze)})),()=>{Re.Jc(),M.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return qS(yield B_(M),Ze)}))}}(jr(I),S,g,E)}function U_(n,e){return function(t,r){const o=new di;return t.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function P1(n,e,t){return ex.apply(this,arguments)}(yield Sx(t),r,o)})),o.promise}(jr(n),e)}function Vx(n,e,t){const r=t.docs.get(e._key),o=new Up(n);return new Lc(n,o,e._key,r,new Bp(t.hasPendingWrites,t.fromCache),e.converter)}class YF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Lp(e)}get(e){const t=bh(e,this._firestore),r=new UF(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return lt();const u=o[0];if(u.isFoundDocument())return new WE(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new WE(this._firestore,r,t._key,null,t.converter);throw lt()})}set(e,t,r){const o=bh(e,this._firestore),u=CD(o.converter,t,r),c=vD(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,c),this}update(e,t,r,...o){const u=bh(e,this._firestore);let c;return c="string"==typeof(t=(0,P.m9)(t))||t instanceof Fc?Ox(this._dataReader,"Transaction.update",u._key,t,r,o):Px(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=bh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=bh(e,this._firestore),r=new Up(this._firestore);return super.get(e).then(o=>new Lc(this._firestore,r,t._key,o._document,new Bp(!1,!1),t.converter))}}function Bx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function ZP(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function YP(){if(!function RO(){return"undefined"!=typeof atob}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){c_=Er.SDK_VERSION,(0,Er._registerComponent)(new Pi.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Zn(o,new TO(t.getProvider("auth-internal")),new xO(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Er.registerVersion)(sN,"3.4.5",n),(0,Er.registerVersion)(sN,"3.4.5","esm2017")}();class KE{constructor(e){this._delegate=e}static fromBase64String(e){return YP(),new KE(bl.fromBase64String(e))}static fromUint8Array(e){return ZP(),new KE(bl.fromUint8Array(e))}toBase64(){return YP(),this._delegate.toBase64()}toUint8Array(){return ZP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ux(n){return function sL(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class oL{enableIndexedDbPersistence(e,t){return function fF(n,e){AP(n=zt(n,Zn));const t=jr(n),r=n._freezeSettings(),o=new wx;return TP(t,o,new uP(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function pF(n){AP(n=zt(n,Zn));const e=jr(n),t=n._freezeSettings(),r=new wx;return TP(e,r,new Z1(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function gF(n){if(n._initialized&&!n._terminated)throw new Pe(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new di;return n._queue.enqueueAndForgetEvenWhileRestricted((0,de.Z)(function*(){try{yield(t=(0,de.Z)(function*(r){if(!du.Vt())return Promise.resolve();const o=r+"main";yield du.delete(o)}),function(r){return t.apply(this,arguments)})(hS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class QP{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Cp||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&_E("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function uF(n,e,t,r={}){var o;const u=(n=zt(n,GE))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&_E("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,g;if("string"==typeof r.mockUserToken)c=r.mockUserToken,g=Gi.MOCK_USER;else{c=(0,P.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Pe(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Gi(E)}n._authCredentials=new bO(new oN(c,g))}}(this._delegate,e,t,r)}enableNetwork(){return function _F(n){return function eF(n){return n.asyncQueue.enqueue((0,de.Z)(function*(){const e=yield hP(n),t=yield fP(n);return e.setNetworkEnabled(!0),function(r){const o=Ke(r);return o.Ko.delete(0),jE(o)}(t)}))}(jr(n=zt(n,Zn)))}(this._delegate)}disableNetwork(){return function yF(n){return function tF(n){return n.asyncQueue.enqueue((0,de.Z)(function*(){const e=yield hP(n),t=yield fP(n);return e.setNetworkEnabled(!1),(r=(0,de.Z)(function*(o){const u=Ke(o);u.Ko.add(0),yield R_(u),u.Qo.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(jr(n=zt(n,Zn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,_P("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function mF(n){return function(e){const t=new di;return e.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function L1(n,e){return sx.apply(this,arguments)}(yield Sx(e),t)})),t.promise}(jr(n=zt(n,Zn)))}(this._delegate)}onSnapshotsInSync(e){return function ZF(n,e){return function iF(n,e){const t=new fD(e);return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return r=yield B_(n),o=t,Ke(r).Zo.add(o),void o.next();var r,o})),()=>{t.Jc(),n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return r=yield B_(n),o=t,void Ke(r).Zo.delete(o);var r,o}))}}(jr(n=zt(n,Zn)),Nx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new j_(this,IP(this._delegate,e))}catch(t){throw Ls(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ca(this,mD(this._delegate,e))}catch(t){throw Ls(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Vs(this,function lF(n,e){if(n=zt(n,GE),Mx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _s(n,null,(t=e,new Pc(cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ls(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function QF(n,e){return function sF(n,e){const t=new di;return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){const r=yield(o=n,pD(o).then(u=>u.datastore));var o;new J1(n.asyncQueue,r,e,t).run()})),t.promise}(jr(n=zt(n,Zn)),t=>e(new YF(n,t)))}(this._delegate,t=>e(new JP(this,t)))}batch(){return jr(this._delegate),new XP(new $P(this._delegate,e=>U_(this._delegate,e)))}loadBundle(e){return function vF(n,e){const t=jr(n=zt(n,Zn)),r=new dF;return function oF(n,e,t,r){const o=function(u,c){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,E=function(E,I){if(E instanceof Uint8Array)return lP(E,I);if(E instanceof ArrayBuffer)return lP(new Uint8Array(E),I);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new Y1(E,c);var E}(t,UE(e));n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){!function K1(n,e,t){const r=Ke(n);var o;(o=(0,de.Z)(function*(u,c,g){try{const E=yield c.getMetadata();if(yield function(F,q){const Y=Ke(F),Re=pi(q.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",Ze=>Y.Kn.getBundleMetadata(Ze,q.id)).then(Ze=>!!Ze&&Ze.createTime.compareTo(Re)>=0)}(u.localStore,E))return yield c.close(),void g._completeWith((F=E,{taskState:"Success",documentsLoaded:F.totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}));g._updateProgress(JR(E));const I=new A1(E,u.localStore,c.O);let S=yield c.Kc();for(;S;){const F=yield I.lc(S);F&&g._updateProgress(F),S=yield c.Kc()}const M=yield I.complete();yield kc(u,M.ws,void 0),yield function(F,q){const Y=Ke(F);return Y.persistence.runTransaction("Save bundle","readwrite",Re=>Y.Kn.saveBundleMetadata(Re,q))}(u.localStore,E),g._completeWith(M.progress)}catch(E){_E("SyncEngine",`Loading bundle failed with ${E}`),g._failWith(E)}var F}),function(u,c,g){return o.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield Sx(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function EF(n,e){return function aF(n,e){return n.asyncQueue.enqueue((0,de.Z)(function*(){return function(t,r){const o=Ke(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Kn.getNamedQuery(u,r))}(yield Ax(n),e)}))}(jr(n=zt(n,Zn)),e).then(t=>t?new _s(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Vs(this,t):null)}}class DD extends Lx{constructor(e){super(),this.firestore=e}convertBytes(e){return new KE(new bl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ca.forKey(t,this.firestore,null)}}class JP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new DD(e)}get(e){const t=Hp(e);return this._delegate.get(t).then(r=>new ZE(this._firestore,new Lc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Hp(e);return r?(Bx("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Hp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Hp(e);return this._delegate.delete(t),this}}class XP{constructor(e){this._delegate=e}set(e,t,r){const o=Hp(e);return r?(Bx("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Hp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Hp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class jp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new qE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new YE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=jp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new jp(e,new DD(e),t),o.set(t,u)),u}}jp.INSTANCES=new WeakMap;class Ca{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new DD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ca(t,new Vn(t._delegate,r,new tt(e)))}static forKey(e,t,r){return new Ca(t,new Vn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new j_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new j_(this.firestore,IP(this._delegate,e))}catch(t){throw Ls(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof Vn&&CP(this._delegate,e)}set(e,t){t=Bx("DocumentReference.set",t);try{return t?WP(this._delegate,e,t):WP(this._delegate,e)}catch(r){throw Ls(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?qP(this._delegate,e):qP(this._delegate,e,t,...r)}catch(o){throw Ls(o,"updateDoc()","DocumentReference.update()")}}delete(){return function zF(n){return U_(zt(n.firestore,Zn),[new SE(n._key,Br.none())])}(this._delegate)}onSnapshot(...e){const t=eO(e),r=tO(e,o=>new ZE(this.firestore,new Lc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return zP(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function HF(n){n=zt(n,Vn);const e=zt(n.firestore,Zn),t=jr(e),r=new Up(e);return function nF(n,e){const t=new di;return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return(r=(0,de.Z)(function*(o,u,c){try{const g=yield function(E,I){const S=Ke(E);return S.persistence.runTransaction("read document","readonly",M=>S.Us.ys(M,I))}(o,u);g.isFoundDocument()?c.resolve(g):g.isNoDocument()?c.resolve(null):c.reject(new Pe(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const E=k_(g,`Failed to get document '${u} from cache`);c.reject(E)}}),function(o,u,c){return r.apply(this,arguments)})(yield Ax(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Lc(e,r,n._key,o,new Bp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function GF(n){n=zt(n,Vn);const e=zt(n.firestore,Zn);return pP(jr(e),n._key,{source:"server"}).then(t=>Vx(e,n,t))}(this._delegate):function jF(n){n=zt(n,Vn);const e=zt(n.firestore,Zn);return pP(jr(e),n._key).then(t=>Vx(e,n,t))}(this._delegate),t.then(r=>new ZE(this.firestore,new Lc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ca(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}function Ls(n,e,t){return n.message=n.message.replace(e,t),n}function eO(n){for(const e of n)if("object"==typeof e&&!Ux(e))return e;return{}}function tO(n,e){var t,r;let o;return o=Ux(n[0])?n[0]:Ux(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class ZE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ca(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return kP(this._delegate,e._delegate)}}class YE extends ZE{data(e){const t=this._delegate.data(e);return function CO(n,e){n||lt()}(void 0!==t),t}}class Vs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new DD(e)}where(e,t,r){try{return new Vs(this.firestore,Dh(this._delegate,function NF(n,e,t){const r=e,o=ID("where",n);return new MF(o,r,t)}(e,t,r)))}catch(o){throw Ls(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Vs(this.firestore,Dh(this._delegate,function PF(n,e="asc"){const t=e,r=ID("orderBy",n);return new RF(r,t)}(e,t)))}catch(r){throw Ls(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Vs(this.firestore,Dh(this._delegate,function OF(n){return EP("limit",n),new LP("limit",n,"F")}(e)))}catch(t){throw Ls(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Vs(this.firestore,Dh(this._delegate,function kF(n){return EP("limitToLast",n),new LP("limitToLast",n,"L")}(e)))}catch(t){throw Ls(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Vs(this.firestore,Dh(this._delegate,function FF(...n){return new VP("startAt",n,!0)}(...e)))}catch(t){throw Ls(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Vs(this.firestore,Dh(this._delegate,function LF(...n){return new VP("startAfter",n,!1)}(...e)))}catch(t){throw Ls(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Vs(this.firestore,Dh(this._delegate,function VF(...n){return new BP("endBefore",n,!1)}(...e)))}catch(t){throw Ls(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Vs(this.firestore,Dh(this._delegate,function BF(...n){return new BP("endAt",n,!0)}(...e)))}catch(t){throw Ls(t,"endAt()","Query.endAt()")}}isEqual(e){return DP(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function WF(n){n=zt(n,_s);const e=zt(n.firestore,Zn),t=jr(e),r=new Up(e);return function rF(n,e){const t=new di;return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return(r=(0,de.Z)(function*(o,u,c){try{const g=yield aD(o,u,!0),E=new tP(u,g.Ks),I=E.Ic(g.documents),S=E.applyChanges(I,!1);c.resolve(S.snapshot)}catch(g){const E=k_(g,`Failed to execute query '${u} against cache`);c.reject(E)}}),function(o,u,c){return r.apply(this,arguments)})(yield Ax(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Ch(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function qF(n){n=zt(n,_s);const e=zt(n.firestore,Zn),t=jr(e),r=new Up(e);return gP(t,n._query,{source:"server"}).then(o=>new Ch(e,r,n,o))}(this._delegate):function $F(n){n=zt(n,_s);const e=zt(n.firestore,Zn),t=jr(e),r=new Up(e);return FP(n._query),gP(t,n._query).then(o=>new Ch(e,r,n,o))}(this._delegate),t.then(r=>new jx(this.firestore,new Ch(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=eO(e),r=tO(e,o=>new jx(this.firestore,new Ch(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return zP(this._delegate,t,r)}withConverter(e){return new Vs(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}class uL{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new YE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class jx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Vs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new YE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new uL(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new YE(this._firestore,r))})}isEqual(e){return kP(this._delegate,e._delegate)}}class j_ extends Vs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ca(this.firestore,e):null}doc(e){try{return new Ca(this.firestore,void 0===e?mD(this._delegate):mD(this._delegate,e))}catch(t){throw Ls(t,"doc()","CollectionReference.doc()")}}add(e){return function KF(n,e){const t=zt(n.firestore,Zn),r=mD(n),o=CD(n.converter,e);return U_(t,[vD(Lp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Br.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ca(this.firestore,t))}isEqual(e){return CP(this._delegate,e._delegate)}withConverter(e){return new j_(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}function Hp(n){return zt(n,Vn)}class Hx{constructor(...e){this._delegate=new Fc(...e)}static documentId(){return new Hx(fi.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof Fc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Gp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function XF(){return new Rx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Gp(e)}static delete(){const e=function JF(){return new $E("deleteField")}();return e._methodName="FieldValue.delete",new Gp(e)}static arrayUnion(...e){const t=function eL(...n){return new DF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Gp(t)}static arrayRemove(...e){const t=function tL(...n){return new bF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Gp(t)}static increment(e){const t=function nL(n){return new TF("increment",n)}(e);return t._methodName="FieldValue.increment",new Gp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const lL={Firestore:QP,GeoPoint:_D,Timestamp:hi,Blob:KE,Transaction:JP,WriteBatch:XP,DocumentReference:Ca,DocumentSnapshot:ZE,Query:Vs,QueryDocumentSnapshot:YE,QuerySnapshot:jx,CollectionReference:j_,FieldPath:Hx,FieldValue:Gp,setLogLevel:function aL(n){!function IO(n){ph.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function nO(n,e){return function hL(n,e=Su.z){return new An.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Gx(n,e){return nO(n,e).pipe((0,dn.U)(t=>({payload:t,type:"query"})))}function bD(n,e){return Gx(n,e).pipe(gl(void 0),Vv(),(0,dn.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,g)=>{const E=o.find(S=>S.doc.ref.isEqual(c.ref)),I=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(c.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(c.metadata)||!E&&I&&JSON.stringify(I.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:c}})}),u}))}function rO(n,e,t){return bD(n,t).pipe(Wa((r,o)=>function pL(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function gL(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return $x(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return $x(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return $x(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),xu(),(0,dn.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function $x(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function iO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function dL(n){(function cL(n,e){n.INTERNAL.registerComponent(new Pi.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},lL)))})(n,(e,t)=>new QP(e,t,new oL)),n.registerVersion("@firebase/firestore-compat","0.1.14")}(Nu.Z);class sO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=bD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,dn.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(gl(void 0),Vv(),$g(([r,o])=>o.length>0||!r),(0,dn.U)(([r,o])=>o),un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Wa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=iO(e);return rO(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return Gx(this.query,this.afs.schedulers.outsideAngular).pipe((0,dn.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),un.iC)}get(e){return(0,bs.D)(this.query.get(e)).pipe(un.iC)}add(e){return this.ref.add(e)}doc(e){return new oO(this.ref.doc(e),this.afs)}}class oO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=aO(r,t);return new sO(o,u,this.afs)}snapshotChanges(){return function fL(n,e){return nO(n,e).pipe(gl(void 0),Vv(),(0,dn.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,dn.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,bs.D)(this.ref.get(e)).pipe(un.iC)}}class mL{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?bD(this.query,this.afs.schedulers.outsideAngular).pipe((0,dn.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),$g(t=>t.length>0),un.iC):bD(this.query,this.afs.schedulers.outsideAngular).pipe(un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Wa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=iO(e);return rO(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return Gx(this.query,this.afs.schedulers.outsideAngular).pipe((0,dn.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),un.iC)}get(e){return(0,bs.D)(this.query.get(e)).pipe(un.iC)}}const _L=new _.OlP("angularfire2.enableFirestorePersistence"),yL=new _.OlP("angularfire2.firestore.persistenceSettings"),vL=new _.OlP("angularfire2.firestore.settings"),EL=new _.OlP("angularfire2.firestore.use-emulator");function aO(n,e=(t=>t)){return{query:e(n),ref:n}}let wL=(()=>{class n{constructor(t,r,o,u,c,g,E,I,S,M,F,q,Y,Re,Ze,Ot,Vt){this.schedulers=E;const or=(0,dr.on)(t,g,r),Kt=S;M&&hm(or,g,F,Y,Re,Ze,q,Ot),[this.firestore,this.persistenceEnabled$]=(0,dr.cc)(`${or.name}.firestore`,"AngularFirestore",or.name,()=>{const ar=g.runOutsideAngular(()=>or.firestore());if(u&&ar.settings(u),Kt&&ar.useEmulator(...Kt),o&&!Na(c)){const hu=()=>{try{return(0,bs.D)(ar.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(TD){return"undefined"!=typeof console&&console.warn(TD),Ni(!1)}};return[ar,g.runOutsideAngular(hu)]}return[ar,Ni(!1)]},[u,Kt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=aO(o,r),g=this.schedulers.ngZone.run(()=>u);return new sO(g,c,this)}collectionGroup(t,r){const o=r||(c=>c),u=this.firestore.collectionGroup(t);return new mL(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new oO(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(dr.Dh),_.LFG(dr.xv,8),_.LFG(_L,8),_.LFG(vL,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(un.HU),_.LFG(yL,8),_.LFG(EL,8),_.LFG(fm,8),_.LFG(om,8),_.LFG(am,8),_.LFG(um,8),_.LFG(lm,8),_.LFG(cm,8),_.LFG(dm,8),_.LFG(sm,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),uO=(()=>{class n{constructor(t){this.firestore=t}createImagen(t){return this.firestore.collection("imagenes").add(t)}getImagenes(){return this.firestore.collection("imagenes").snapshotChanges()}getImagen(t){return this.firestore.collection("imagenes").doc(t).snapshotChanges()}updateImagen(t,r){return this.firestore.collection("imagenes").doc(t).set(r)}deleteImagen(t){return this.firestore.collection("imagenes").doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(wL))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function IL(n,e){if(1&n){const t=_.EpF();_.TgZ(0,"li",10),_._UZ(1,"img",11),_.TgZ(2,"p"),_._uU(3),_.qZA(),_.TgZ(4,"button",12),_.NdJ("click",function(){const u=_.CHM(t).$implicit;return _.oxw().editarImagen(u.id)}),_._uU(5,"Editar"),_.qZA(),_.TgZ(6,"button",13),_.NdJ("click",function(){const u=_.CHM(t).$implicit;return _.oxw().deleteImagen(u.id)}),_._uU(7,"Eliminar"),_.qZA(),_.qZA()}if(2&n){const t=e.$implicit;_.xp6(1),_.Q6J("src",t.data.url,_.LSH),_.xp6(2),_.hij("",t.data.descripcion," ")}}let CL=(()=>{class n{constructor(t){this.imagenesService=t,this.imagenes=[],this.documentId="",this.currentStatus=1,this.imgForm=new Nm({descripcion:new Mm("",vT.required),url:new Mm("",vT.required),id:new Mm("")}),this.imgForm.setValue({id:"",descripcion:"",url:""})}ngOnInit(){this.imagenesService.getImagenes().subscribe(t=>{this.imagenes=[],t.forEach(r=>{this.imagenes.push({data:r.payload.doc.data(),id:r.payload.doc.id})})})}saveImagen(t,r=this.documentId){1==this.currentStatus?this.imagenesService.createImagen({descripcion:t.descripcion,url:t.url}).then(()=>{this.imgForm.setValue({descripcion:"",url:"",id:""})},u=>{console.log(u)}):this.imagenesService.updateImagen(this.documentId,{descripcion:t.descripcion,url:t.url}).then(()=>{this.currentStatus=1,this.imgForm.setValue({descripcion:"",url:"",id:""})},u=>{console.log(u)})}editarImagen(t){let r=this.imagenesService.getImagen(t).subscribe(o=>{this.currentStatus=2,this.documentId=t,this.imgForm.setValue({id:t,descripcion:o.payload.data().descripcion,url:o.payload.data().url}),r.unsubscribe()})}deleteImagen(t){this.imagenesService.deleteImagen(t).then(()=>{console.log("Documento eliminado")},r=>{console.log(r)})}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(uO))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-imagenes"]],decls:16,vars:3,consts:[[1,"col-sm-4"],[3,"formGroup","ngSubmit"],["type","hidden","formControlName","id"],["for","descripcion"],["type","text","formControlName","descripcion",1,"form-control"],["for","url"],["type","url","formControlName","url",1,"form-control"],["type","submit","value","Guardar",1,"btn","btn-primary",3,"disabled"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],["width","300",3,"src"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,r){1&t&&(_.TgZ(0,"h2"),_._uU(1,"Cat\xe1ologo de imagenes de Alain"),_.qZA(),_.TgZ(2,"div",0),_.TgZ(3,"form",1),_.NdJ("ngSubmit",function(){return r.saveImagen(r.imgForm.value)}),_._UZ(4,"input",2),_.TgZ(5,"label",3),_._uU(6,"Descripci\xf3n:"),_.qZA(),_._UZ(7,"input",4),_.TgZ(8,"label",5),_._uU(9,"URL de la imagen:"),_.qZA(),_._UZ(10,"input",6),_._UZ(11,"p"),_._UZ(12,"input",7),_.qZA(),_.qZA(),_.TgZ(13,"div",0),_.TgZ(14,"ul",8),_.YNc(15,IL,8,2,"li",9),_.qZA(),_.qZA()),2&t&&(_.xp6(3),_.Q6J("formGroup",r.imgForm),_.xp6(9),_.Q6J("disabled",!r.imgForm.valid),_.xp6(3),_.Q6J("ngForOf",r.imagenes))},directives:[TI,Ev,Pm,Gf,gI,bc,Gn],styles:[""]}),n})(),DL=(()=>{class n{constructor(){this.title="ImagenesAlain"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"container"]],template:function(t,r){1&t&&(_.TgZ(0,"div",0),_._UZ(1,"app-imagenes"),_.qZA())},directives:[CL],styles:[""]}),n})();const lO_firebaseConfig={apiKey:"AIzaSyA4H8t4jjRc0TTDrhXY9xDLVh8h-RYhg2s",authDomain:"imagenes-da61b.firebaseapp.com",projectId:"imagenes-da61b",storageBucket:"imagenes-da61b.appspot.com",messagingSenderId:"727435975447",appId:"1:727435975447:web:bbfdc1e9d5d6073a463552"};let bL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n,bootstrap:[DL]}),n.\u0275inj=_.cJS({providers:[uO],imports:[[Ol,YT,QT,dr.hO.initializeApp(lO_firebaseConfig),qw]]}),n})();(0,_.G48)(),La().bootstrapModule(bL).catch(n=>console.error(n))},5867:(at,Se,L)=>{"use strict";L.d(Se,{Mq:()=>_.getApp,C6:()=>_.getApps});var _=L(9681);(0,_.registerVersion)("firebase","9.6.8","app")},127:(at,Se,L)=>{"use strict";L.d(Se,{Z:()=>_.Z});var _=L(3942);_.Z.registerVersion("firebase","9.6.8","app-compat")},2438:(at,Se,L)=>{"use strict";L.r(Se);var _=L(5861),J=L(3942),O=L(2090),se=L(9681);function ce(m,h){var f={};for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&h.indexOf(v)<0&&(f[v]=m[v]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var b=0;for(v=Object.getOwnPropertySymbols(m);b<v.length;b++)h.indexOf(v[b])<0&&Object.prototype.propertyIsEnumerable.call(m,v[b])&&(f[v[b]]=m[v[b]])}return f}var ke=L(1877),le=L(4859);const ur=function Yn(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},en=function Gt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Hr=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Dn=new ke.Yd("@firebase/auth");function Ei(m,...h){Dn.logLevel<=ke.in.ERROR&&Dn.error(`Auth (${se.SDK_VERSION}): ${m}`,...h)}function Zt(m,...h){throw ys(m,...h)}function Bt(m,...h){return ys(m,...h)}function uo(m,h,f){const v=Object.assign(Object.assign({},en()),{[h]:f});return new O.LL("auth","Firebase",v).create(h,{appName:m.name})}function Gr(m,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&Zt(m,"argument-error"),uo(m,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ys(m,...h){if("string"!=typeof m){const f=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=m.name),m._errorFactory.create(f,...v)}return Hr.create(m,...h)}function Ne(m,h,...f){if(!m)throw ys(h,...f)}function lr(m){const h="INTERNAL ASSERTION FAILED: "+m;throw Ei(h),new Error(h)}function it(m,h){m||lr(h)}const wi=new Map;function kt(m){it(m instanceof Function,"Expected a class definition");let h=wi.get(m);return h?(it(h instanceof m,"Instance stored in cache mismatched with class"),h):(h=new m,wi.set(m,h),h)}function mr(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function _r(){return"http:"===fn()||"https:"===fn()}function fn(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class Rt{constructor(h,f){this.shortDelay=h,this.longDelay=f,it(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function ii(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_r()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function st(m,h){it(m.emulator,"Emulator should always be set here");const{url:f}=m.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class pt{static initialize(h,f,v){this.fetchImpl=h,f&&(this.headersImpl=f),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lo={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},vs=new Rt(3e4,6e4);function ut(m,h){return m.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:m.tenantId}):h}function rn(m,h,f,v){return cr.apply(this,arguments)}function cr(){return(cr=(0,_.Z)(function*(m,h,f,v,b={}){return Ii(m,b,(0,_.Z)(function*(){let x={},j={};v&&("GET"===h?j=v:x={body:JSON.stringify(v)});const te=(0,O.xO)(Object.assign({key:m.config.apiKey},j)).slice(1),we=yield m._getAdditionalHeaders();return we["Content-Type"]="application/json",m.languageCode&&(we["X-Firebase-Locale"]=m.languageCode),pt.fetch()(ve(m,m.config.apiHost,f,te),Object.assign({method:h,headers:we,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function Ii(m,h,f){return B.apply(this,arguments)}function B(){return(B=(0,_.Z)(function*(m,h,f){m._canInitEmulator=!1;const v=Object.assign(Object.assign({},lo),h);try{const b=new ee(m),x=yield Promise.race([f(),b.promise]);b.clearNetworkTimeout();const j=yield x.json();if("needConfirmation"in j)throw Ge(m,"account-exists-with-different-credential",j);if(x.ok&&!("errorMessage"in j))return j;{const te=x.ok?j.errorMessage:j.error.message,[we,Te]=te.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===we)throw Ge(m,"credential-already-in-use",j);if("EMAIL_EXISTS"===we)throw Ge(m,"email-already-in-use",j);const Ye=v[we]||we.toLowerCase().replace(/[_\s]+/g,"-");if(Te)throw uo(m,Ye,Te);Zt(m,Ye)}}catch(b){if(b instanceof O.ZR)throw b;Zt(m,"network-request-failed")}})).apply(this,arguments)}function H(m,h,f,v){return W.apply(this,arguments)}function W(){return(W=(0,_.Z)(function*(m,h,f,v,b={}){const x=yield rn(m,h,f,v,b);return"mfaPendingCredential"in x&&Zt(m,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function ve(m,h,f,v){const b=`${h}${f}?${v}`;return m.config.emulator?st(m.config,b):`${m.config.apiScheme}://${b}`}class ee{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,v)=>{this.timer=setTimeout(()=>v(Bt(this.auth,"network-request-failed")),vs.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ge(m,h,f){const v={appName:m.name};f.email&&(v.email=f.email),f.phoneNumber&&(v.phoneNumber=f.phoneNumber);const b=Bt(m,h,v);return b.customData._tokenResponse=f,b}function me(){return(me=(0,_.Z)(function*(m,h){return rn(m,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Ue(m,h){return nt.apply(this,arguments)}function nt(){return(nt=(0,_.Z)(function*(m,h){return rn(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function It(m,h){return ct.apply(this,arguments)}function ct(){return(ct=(0,_.Z)(function*(m,h){return rn(m,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function tn(m){if(m)try{const h=new Date(Number(m));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Uo(){return(Uo=(0,_.Z)(function*(m,h=!1){const f=(0,O.m9)(m),v=yield f.getIdToken(h),b=co(v);Ne(b&&b.exp&&b.auth_time&&b.iat,f.auth,"internal-error");const x="object"==typeof b.firebase?b.firebase:void 0,j=null==x?void 0:x.sign_in_provider;return{claims:b,token:v,authTime:tn(fu(b.auth_time)),issuedAtTime:tn(fu(b.iat)),expirationTime:tn(fu(b.exp)),signInProvider:j||null,signInSecondFactor:(null==x?void 0:x.sign_in_second_factor)||null}})).apply(this,arguments)}function fu(m){return 1e3*Number(m)}function co(m){const[h,f,v]=m.split(".");if(void 0===h||void 0===f||void 0===v)return Ei("JWT malformed, contained fewer than 3 sections"),null;try{const b=(0,O.tV)(f);return b?JSON.parse(b):(Ei("Failed to decode base64 JWT payload"),null)}catch(b){return Ei("Caught error parsing JWT payload as JSON",b),null}}function Un(m,h){return qi.apply(this,arguments)}function qi(){return(qi=(0,_.Z)(function*(m,h,f=!1){if(f)return h;try{return yield h}catch(v){throw v instanceof O.ZR&&Xn(v)&&m.auth.currentUser===m&&(yield m.auth.signOut()),v}})).apply(this,arguments)}function Xn({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}class Us{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const b=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,b)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,_.Z)(function*(){yield f.iteration()}),v)}iteration(){var h=this;return(0,_.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f.code&&h.schedule(!0))}h.schedule()})()}}class Al{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=tn(this.lastLoginAt),this.creationTime=tn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ci(m){return ho.apply(this,arguments)}function ho(){return(ho=(0,_.Z)(function*(m){var h;const f=m.auth,v=yield m.getIdToken(),b=yield Un(m,It(f,{idToken:v}));Ne(null==b?void 0:b.users.length,f,"internal-error");const x=b.users[0];m._notifyReloadListener(x);const j=(null===(h=x.providerUserInfo)||void 0===h?void 0:h.length)?$r(x.providerUserInfo):[],te=Da(m.providerData,j),Ye=!!m.isAnonymous&&!(m.email&&x.passwordHash||(null==te?void 0:te.length)),Xe={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:te,metadata:new Al(x.createdAt,x.lastLoginAt),isAnonymous:Ye};Object.assign(m,Xe)})).apply(this,arguments)}function jn(){return(jn=(0,_.Z)(function*(m){const h=(0,O.m9)(m);yield Ci(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Da(m,h){return[...m.filter(v=>!h.some(b=>b.providerId===v.providerId)),...h]}function $r(m){return m.map(h=>{var{providerId:f}=h,v=ce(h,["providerId"]);return{providerId:f,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function At(){return(At=(0,_.Z)(function*(m,h){const f=yield Ii(m,{},(0,_.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:b,apiKey:x}=m.config,j=ve(m,b,"/v1/token",`key=${x}`),te=yield m._getAdditionalHeaders();return te["Content-Type"]="application/x-www-form-urlencoded",pt.fetch()(j,{method:"POST",headers:te,body:v})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class Ut{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){Ne(h.idToken,"internal-error"),Ne(void 0!==h.idToken,"internal-error"),Ne(void 0!==h.refreshToken,"internal-error");const f="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function Jn(m){const h=co(m);return Ne(h,"internal-error"),Ne(void 0!==h.exp,"internal-error"),Ne(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}getToken(h,f=!1){var v=this;return(0,_.Z)(function*(){return Ne(!v.accessToken||v.refreshToken,h,"user-token-expired"),f||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var v=this;return(0,_.Z)(function*(){const{accessToken:b,refreshToken:x,expiresIn:j}=yield function We(m,h){return At.apply(this,arguments)}(h,f);v.updateTokensAndExpiration(b,x,Number(j))})()}updateTokensAndExpiration(h,f,v){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,f){const{refreshToken:v,accessToken:b,expirationTime:x}=f,j=new Ut;return v&&(Ne("string"==typeof v,"internal-error",{appName:h}),j.refreshToken=v),b&&(Ne("string"==typeof b,"internal-error",{appName:h}),j.accessToken=b),x&&(Ne("number"==typeof x,"internal-error",{appName:h}),j.expirationTime=x),j}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Ut,this.toJSON())}_performRefresh(){return lr("not implemented")}}function bn(m,h){Ne("string"==typeof m||void 0===m,"internal-error",{appName:h})}class yr{constructor(h){var{uid:f,auth:v,stsTokenManager:b}=h,x=ce(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Us(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=v,this.stsTokenManager=b,this.accessToken=b.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new Al(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,_.Z)(function*(){const v=yield Un(f,f.stsTokenManager.getToken(f.auth,h));return Ne(v,f.auth,"internal-error"),f.accessToken!==v&&(f.accessToken=v,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),v})()}getIdTokenResult(h){return function Tl(m){return Uo.apply(this,arguments)}(this,h)}reload(){return function fo(m){return jn.apply(this,arguments)}(this)}_assign(h){this!==h&&(Ne(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new yr(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var v=this;return(0,_.Z)(function*(){let b=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),b=!0),f&&(yield Ci(v)),yield v.auth._persistUserIfCurrent(v),b&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,_.Z)(function*(){const f=yield h.getIdToken();return yield Un(h,function Ie(m,h){return me.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var v,b,x,j,te,we,Te,Ye;const Xe=null!==(v=f.displayName)&&void 0!==v?v:void 0,Nt=null!==(b=f.email)&&void 0!==b?b:void 0,zn=null!==(x=f.phoneNumber)&&void 0!==x?x:void 0,Cr=null!==(j=f.photoURL)&&void 0!==j?j:void 0,uc=null!==(te=f.tenantId)&&void 0!==te?te:void 0,Ns=null!==(we=f._redirectEventId)&&void 0!==we?we:void 0,lc=null!==(Te=f.createdAt)&&void 0!==Te?Te:void 0,ca=null!==(Ye=f.lastLoginAt)&&void 0!==Ye?Ye:void 0,{uid:Ju,emailVerified:Xu,isAnonymous:cc,providerData:el,stsTokenManager:df}=f;Ne(Ju&&df,h,"internal-error");const hf=Ut.fromJSON(this.name,df);Ne("string"==typeof Ju,h,"internal-error"),bn(Xe,h.name),bn(Nt,h.name),Ne("boolean"==typeof Xu,h,"internal-error"),Ne("boolean"==typeof cc,h,"internal-error"),bn(zn,h.name),bn(Cr,h.name),bn(uc,h.name),bn(Ns,h.name),bn(lc,h.name),bn(ca,h.name);const Td=new yr({uid:Ju,auth:h,email:Nt,emailVerified:Xu,displayName:Xe,isAnonymous:cc,photoURL:Cr,phoneNumber:zn,tenantId:uc,stsTokenManager:hf,createdAt:lc,lastLoginAt:ca});return el&&Array.isArray(el)&&(Td.providerData=el.map(ff=>Object.assign({},ff))),Ns&&(Td._redirectEventId=Ns),Td}static _fromIdTokenResponse(h,f,v=!1){return(0,_.Z)(function*(){const b=new Ut;b.updateFromServerResponse(f);const x=new yr({uid:f.localId,auth:h,stsTokenManager:b,isAnonymous:v});return yield Ci(x),x})()}}const Ar=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(f,v){var b=this;return(0,_.Z)(function*(){b.storage[f]=v})()}_get(f){var v=this;return(0,_.Z)(function*(){const b=v.storage[f];return void 0===b?null:b})()}_remove(f){var v=this;return(0,_.Z)(function*(){delete v.storage[f]})()}_addListener(f,v){}_removeListener(f,v){}}return m.type="NONE",m})();function Lt(m,h,f){return`firebase:${m}:${h}:${f}`}class Di{constructor(h,f,v){this.persistence=h,this.auth=f,this.userKey=v;const{config:b,name:x}=this.auth;this.fullUserKey=Lt(this.userKey,b.apiKey,x),this.fullPersistenceKey=Lt("persistence",b.apiKey,x),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,_.Z)(function*(){const f=yield h.persistence._get(h.fullUserKey);return f?yr._fromJSON(h.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var f=this;return(0,_.Z)(function*(){if(f.persistence===h)return;const v=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=h,v?f.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,f,v="authUser"){return(0,_.Z)(function*(){if(!f.length)return new Di(kt(Ar),h,v);const b=(yield Promise.all(f.map(function(){var Te=(0,_.Z)(function*(Ye){if(yield Ye._isAvailable())return Ye});return function(Ye){return Te.apply(this,arguments)}}()))).filter(Te=>Te);let x=b[0]||kt(Ar);const j=Lt(v,h.config.apiKey,h.name);let te=null;for(const Te of f)try{const Ye=yield Te._get(j);if(Ye){const Xe=yr._fromJSON(h,Ye);Te!==x&&(te=Xe),x=Te;break}}catch(Ye){}const we=b.filter(Te=>Te._shouldAllowMigration);return x._shouldAllowMigration&&we.length?(x=we[0],te&&(yield x._set(j,te.toJSON())),yield Promise.all(f.map(function(){var Te=(0,_.Z)(function*(Ye){if(Ye!==x)try{yield Ye._remove(j)}catch(Xe){}});return function(Ye){return Te.apply(this,arguments)}}())),new Di(x,h,v)):new Di(x,h,v)})()}}function Tn(m){const h=m.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(ba(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Ct(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Gn(h))return"Blackberry";if(Ho(h))return"Webos";if(jo(h))return"Safari";if((h.includes("chrome/")||po(h))&&!h.includes("edge/"))return"Chrome";if(zi(h))return"Android";{const v=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function Ct(m=(0,O.z$)()){return/firefox\//i.test(m)}function jo(m=(0,O.z$)()){const h=m.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function po(m=(0,O.z$)()){return/crios\//i.test(m)}function ba(m=(0,O.z$)()){return/iemobile/i.test(m)}function zi(m=(0,O.z$)()){return/android/i.test(m)}function Gn(m=(0,O.z$)()){return/blackberry/i.test(m)}function Ho(m=(0,O.z$)()){return/webos/i.test(m)}function Ki(m=(0,O.z$)()){return/iphone|ipad|ipod/i.test(m)}function Go(m=(0,O.z$)()){return Ki(m)||zi(m)||Ho(m)||Gn(m)||/windows phone/i.test(m)||ba(m)}function Ti(m,h=[]){let f;switch(m){case"Browser":f=Tn((0,O.z$)());break;case"Worker":f=`${Tn((0,O.z$)())}-${m}`;break;default:f=m}const v=h.length?h.join(","):"FirebaseCore-web";return`${f}/JsCore/${se.SDK_VERSION}/${v}`}class Bc{constructor(h,f){this.app=h,this.config=f,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Es(this),this.idTokenSubscription=new Es(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Hr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=f.sdkClientVersion}_initializeWithPersistence(h,f){var v=this;return f&&(this._popupRedirectResolver=kt(f)),this._initializationPromise=this.queue((0,_.Z)(function*(){var b,x;if(!v._deleted&&(v.persistenceManager=yield Di.create(v,h),!v._deleted)){if(null===(b=v._popupRedirectResolver)||void 0===b?void 0:b._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(j){}yield v.initializeCurrentUser(f),v.lastNotifiedUid=(null===(x=v.currentUser)||void 0===x?void 0:x.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,_.Z)(function*(){if(h._deleted)return;const f=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||f){if(h.currentUser&&f&&h.currentUser.uid===f.uid)return h._currentUser._assign(f),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(f)}})()}initializeCurrentUser(h){var f=this;return(0,_.Z)(function*(){var v;let b=yield f.assertedPersistence.getCurrentUser();if(h&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const x=null===(v=f.redirectUser)||void 0===v?void 0:v._redirectEventId,j=null==b?void 0:b._redirectEventId,te=yield f.tryRedirectSignIn(h);(!x||x===j)&&(null==te?void 0:te.user)&&(b=te.user)}return b?b._redirectEventId?(Ne(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===b._redirectEventId?f.directlySetCurrentUser(b):f.reloadAndSetCurrentUserOrClear(b)):f.reloadAndSetCurrentUserOrClear(b):f.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var f=this;return(0,_.Z)(function*(){let v=null;try{v=yield f._popupRedirectResolver._completeRedirectFn(f,h,!0)}catch(b){yield f._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var f=this;return(0,_.Z)(function*(){try{yield Ci(h)}catch(v){if("auth/network-request-failed"!==v.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Bo(){if("undefined"==typeof navigator)return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var h=this;return(0,_.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var f=this;return(0,_.Z)(function*(){const v=h?(0,O.m9)(h):null;return v&&Ne(v.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(v&&v._clone(f))})()}_updateCurrentUser(h){var f=this;return(0,_.Z)(function*(){if(!f._deleted)return h&&Ne(f.tenantId===h.tenantId,f,"tenant-id-mismatch"),f.queue((0,_.Z)(function*(){yield f.directlySetCurrentUser(h),f.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,_.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var f=this;return this.queue((0,_.Z)(function*(){yield f.assertedPersistence.setPersistence(kt(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,f,v){return this.registerStateListener(this.authStateSubscription,h,f,v)}onIdTokenChanged(h,f,v){return this.registerStateListener(this.idTokenSubscription,h,f,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,f){var v=this;return(0,_.Z)(function*(){const b=yield v.getOrInitRedirectPersistenceManager(f);return null===h?b.removeCurrentUser():b.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var f=this;return(0,_.Z)(function*(){if(!f.redirectPersistenceManager){const v=h&&kt(h)||f._popupRedirectResolver;Ne(v,f,"argument-error"),f.redirectPersistenceManager=yield Di.create(f,[kt(v._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(h){var f=this;return(0,_.Z)(function*(){var v,b;return f._isInitialized&&(yield f.queue((0,_.Z)(function*(){}))),(null===(v=f._currentUser)||void 0===v?void 0:v._redirectEventId)===h?f._currentUser:(null===(b=f.redirectUser)||void 0===b?void 0:b._redirectEventId)===h?f.redirectUser:null})()}_persistUserIfCurrent(h){var f=this;return(0,_.Z)(function*(){if(h===f.currentUser)return f.queue((0,_.Z)(function*(){return f.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(f=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,f,v,b){if(this._deleted)return()=>{};const x="function"==typeof f?f:f.next.bind(f),j=this._isInitialized?Promise.resolve():this._initializationPromise;return Ne(j,this,"internal-error"),j.then(()=>x(this.currentUser)),"function"==typeof f?h.addObserver(f,v,b):h.addObserver(f)}directlySetCurrentUser(h){var f=this;return(0,_.Z)(function*(){f.currentUser&&f.currentUser!==h&&(f._currentUser._stopProactiveRefresh(),h&&f.isProactiveRefreshEnabled&&h._startProactiveRefresh()),f.currentUser=h,h?yield f.assertedPersistence.setCurrentUser(h):yield f.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Ti(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,_.Z)(function*(){const f={"X-Client-Version":h.clientVersion};return h.app.options.appId&&(f["X-Firebase-gmpid"]=h.app.options.appId),f})()}}function Mn(m){return(0,O.m9)(m)}class Es{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(f=>this.observer=f)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Uc(m){const h=m.indexOf(":");return h<0?"":m.substr(0,h+1)}function Th(m){if(!m)return null;const h=Number(m);return isNaN(h)?null:h}class Ta{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return lr("not implemented")}_getIdTokenResponse(h){return lr("not implemented")}_linkToIdToken(h,f){return lr("not implemented")}_getReauthenticationResolver(h){return lr("not implemented")}}function Ah(m,h){return jc.apply(this,arguments)}function jc(){return(jc=(0,_.Z)(function*(m,h){return rn(m,"POST","/v1/accounts:resetPassword",ut(m,h))})).apply(this,arguments)}function Sh(m,h){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,_.Z)(function*(m,h){return rn(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Wp(m,h){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,_.Z)(function*(m,h){return rn(m,"POST","/v1/accounts:update",ut(m,h))})).apply(this,arguments)}function Gc(){return(Gc=(0,_.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithPassword",ut(m,h))})).apply(this,arguments)}function Sl(m,h){return $c.apply(this,arguments)}function $c(){return($c=(0,_.Z)(function*(m,h){return rn(m,"POST","/v1/accounts:sendOobCode",ut(m,h))})).apply(this,arguments)}function qp(m,h){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,_.Z)(function*(m,h){return Sl(m,h)})).apply(this,arguments)}function zp(m,h){return xl.apply(this,arguments)}function xl(){return(xl=(0,_.Z)(function*(m,h){return Sl(m,h)})).apply(this,arguments)}function Sa(m,h){return qc.apply(this,arguments)}function qc(){return(qc=(0,_.Z)(function*(m,h){return Sl(m,h)})).apply(this,arguments)}function Ml(m,h){return zc.apply(this,arguments)}function zc(){return(zc=(0,_.Z)(function*(m,h){return Sl(m,h)})).apply(this,arguments)}function pu(){return(pu=(0,_.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithEmailLink",ut(m,h))})).apply(this,arguments)}function mo(){return(mo=(0,_.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithEmailLink",ut(m,h))})).apply(this,arguments)}class Ma extends Ta{constructor(h,f,v,b=null){super("password",v),this._email=h,this._password=f,this._tenantId=b}static _fromEmailAndPassword(h,f){return new Ma(h,f,"password")}static _fromEmailAndCode(h,f,v=null){return new Ma(h,f,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(h){var f=this;return(0,_.Z)(function*(){switch(f.signInMethod){case"password":return function $o(m,h){return Gc.apply(this,arguments)}(h,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function go(m,h){return pu.apply(this,arguments)}(h,{email:f._email,oobCode:f._password});default:Zt(h,"internal-error")}})()}_linkToIdToken(h,f){var v=this;return(0,_.Z)(function*(){switch(v.signInMethod){case"password":return Sh(h,{idToken:f,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function xa(m,h){return mo.apply(this,arguments)}(h,{idToken:f,email:v._email,oobCode:v._password});default:Zt(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function js(m,h){return gu.apply(this,arguments)}function gu(){return(gu=(0,_.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithIdp",ut(m,h))})).apply(this,arguments)}class vr extends Ta{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new vr(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):Zt("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:b}=f,x=ce(f,["providerId","signInMethod"]);if(!v||!b)return null;const j=new vr(v,b);return j.idToken=x.idToken||void 0,j.accessToken=x.accessToken||void 0,j.secret=x.secret,j.nonce=x.nonce,j.pendingToken=x.pendingToken||null,j}_getIdTokenResponse(h){return js(h,this.buildRequest())}_linkToIdToken(h,f){const v=this.buildRequest();return v.idToken=f,js(h,v)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,js(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,O.xO)(f)}return h}}function Si(m,h){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,_.Z)(function*(m,h){return rn(m,"POST","/v1/accounts:sendVerificationCode",ut(m,h))})).apply(this,arguments)}function Na(){return(Na=(0,_.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithPhoneNumber",ut(m,h))})).apply(this,arguments)}function mu(){return(mu=(0,_.Z)(function*(m,h){const f=yield H(m,"POST","/v1/accounts:signInWithPhoneNumber",ut(m,h));if(f.temporaryProof)throw Ge(m,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Yc={USER_NOT_FOUND:"user-not-found"};function xh(){return(xh=(0,_.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithPhoneNumber",ut(m,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Yc)})).apply(this,arguments)}class $t extends Ta{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new $t({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new $t({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function qr(m,h){return Na.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function Zc(m,h){return mu.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Qc(m,h){return xh.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:v,verificationCode:b}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:v,code:b}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:v,phoneNumber:b,temporaryProof:x}=h;return v||f||b||x?new $t({verificationId:f,verificationCode:v,phoneNumber:b,temporaryProof:x}):null}}class on{constructor(h){var f,v,b,x,j,te;const we=(0,O.zd)((0,O.pd)(h)),Te=null!==(f=we.apiKey)&&void 0!==f?f:null,Ye=null!==(v=we.oobCode)&&void 0!==v?v:null,Xe=function Hs(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(b=we.mode)&&void 0!==b?b:null);Ne(Te&&Ye&&Xe,"argument-error"),this.apiKey=Te,this.operation=Xe,this.code=Ye,this.continueUrl=null!==(x=we.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(j=we.languageCode)&&void 0!==j?j:null,this.tenantId=null!==(te=we.tenantId)&&void 0!==te?te:null}static parseLink(h){const f=function Jc(m){const h=(0,O.zd)((0,O.pd)(m)).link,f=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(m)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||f||h||m}(h);try{return new on(f)}catch(v){return null}}}let Wo=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(f,v){return Ma._fromEmailAndPassword(f,v)}static credentialWithLink(f,v){const b=on.parseLink(v);return Ne(b,"argument-error"),Ma._fromEmailAndCode(f,b.code,b.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class $n{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Nn extends $n{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class ws extends Nn{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return Ne("providerId"in f&&"signInMethod"in f,"argument-error"),vr._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return Ne(h.idToken||h.accessToken,"argument-error"),vr._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return ws.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return ws.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:v,oauthTokenSecret:b,pendingToken:x,nonce:j,providerId:te}=h;if(!v&&!b&&!f&&!x||!te)return null;try{return new ws(te)._credential({idToken:f,accessToken:v,nonce:j,pendingToken:x})}catch(we){return null}}}let qo=(()=>{class m extends Nn{constructor(){super("facebook.com")}static credential(f){return vr._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch(v){return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),Yi=(()=>{class m extends Nn{constructor(){super("google.com"),this.addScope("profile")}static credential(f,v){return vr._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:v})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:v,oauthAccessToken:b}=f;if(!v&&!b)return null;try{return m.credential(v,b)}catch(x){return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Sr=(()=>{class m extends Nn{constructor(){super("github.com")}static credential(f){return vr._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch(v){return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class Qi extends Ta{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return js(h,this.buildRequest())}_linkToIdToken(h,f){const v=this.buildRequest();return v.idToken=f,js(h,v)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,js(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:b,pendingToken:x}=f;return v&&b&&x&&v===b?new Qi(v,x):null}static _create(h,f){return new Qi(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xr extends $n{constructor(h){Ne(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return xr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return xr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const f=Qi.fromJSON(h);return Ne(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:f,providerId:v}=h;if(!f||!v)return null;try{return Qi._create(v,f)}catch(b){return null}}}let Gs=(()=>{class m extends Nn{constructor(){super("twitter.com")}static credential(f,v){return vr._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:v})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:v,oauthTokenSecret:b}=f;if(!v||!b)return null;try{return m.credential(v,b)}catch(x){return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function zo(m,h){return ft.apply(this,arguments)}function ft(){return(ft=(0,_.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signUp",ut(m,h))})).apply(this,arguments)}class er{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,v,b=!1){return(0,_.Z)(function*(){const x=yield yr._fromIdTokenResponse(h,v,b),j=Ra(v);return new er({user:x,providerId:j,_tokenResponse:v,operationType:f})})()}static _forOperation(h,f,v){return(0,_.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const b=Ra(v);return new er({user:h,providerId:b,_tokenResponse:v,operationType:f})})()}}function Ra(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function Ko(){return(Ko=(0,_.Z)(function*(m){var h;const f=Mn(m);if(yield f._initializationPromise,null===(h=f.currentUser)||void 0===h?void 0:h.isAnonymous)return new er({user:f.currentUser,providerId:null,operationType:"signIn"});const v=yield zo(f,{returnSecureToken:!0}),b=yield er._fromIdTokenResponse(f,"signIn",v,!0);return yield f._updateCurrentUser(b.user),b})).apply(this,arguments)}class Zo extends O.ZR{constructor(h,f,v,b){var x;super(f.code,f.message),this.operationType=v,this.user=b,Object.setPrototypeOf(this,Zo.prototype),this.customData={appName:h.name,tenantId:null!==(x=h.tenantId)&&void 0!==x?x:void 0,_serverResponse:f.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,f,v,b){return new Zo(h,f,v,b)}}function Pl(m,h,f,v){return("reauthenticate"===h?f._getReauthenticationResolver(m):f._getIdTokenResponse(m)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?Zo._fromErrorAndOperation(m,x,h,v):x})}function _u(m){return new Set(m.map(({providerId:h})=>h).filter(h=>!!h))}function St(){return(St=(0,_.Z)(function*(m,h){const f=(0,O.m9)(m);yield _o(!0,f,h);const{providerUserInfo:v}=yield Ue(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),b=_u(v||[]);return f.providerData=f.providerData.filter(x=>b.has(x.providerId)),b.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function yu(m,h){return an.apply(this,arguments)}function an(){return(an=(0,_.Z)(function*(m,h,f=!1){const v=yield Un(m,h._linkToIdToken(m.auth,yield m.getIdToken()),f);return er._forOperation(m,"link",v)})).apply(this,arguments)}function _o(m,h,f){return $s.apply(this,arguments)}function $s(){return($s=(0,_.Z)(function*(m,h,f){yield Ci(h);const b=!1===m?"provider-already-linked":"no-such-provider";Ne(_u(h.providerData).has(f)===m,h.auth,b)})).apply(this,arguments)}function zr(m,h){return Is.apply(this,arguments)}function Is(){return(Is=(0,_.Z)(function*(m,h,f=!1){const{auth:v}=m,b="reauthenticate";try{const x=yield Un(m,Pl(v,b,h,m),f);Ne(x.idToken,v,"internal-error");const j=co(x.idToken);Ne(j,v,"internal-error");const{sub:te}=j;return Ne(m.uid===te,v,"user-mismatch"),er._forOperation(m,b,x)}catch(x){throw"auth/user-not-found"===(null==x?void 0:x.code)&&Zt(v,"user-mismatch"),x}})).apply(this,arguments)}function vu(m,h){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,_.Z)(function*(m,h,f=!1){const v="signIn",b=yield Pl(m,v,h),x=yield er._fromIdTokenResponse(m,v,b);return f||(yield m._updateCurrentUser(x.user)),x})).apply(this,arguments)}function wu(m,h){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,_.Z)(function*(m,h){return vu(Mn(m),h)})).apply(this,arguments)}function Oa(m,h){return qn.apply(this,arguments)}function qn(){return(qn=(0,_.Z)(function*(m,h){const f=(0,O.m9)(m);return yield _o(!1,f,h.providerId),yu(f,h)})).apply(this,arguments)}function xi(m,h){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,_.Z)(function*(m,h){return zr((0,O.m9)(m),h)})).apply(this,arguments)}function Cs(m,h){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,_.Z)(function*(m,h){return H(m,"POST","/v1/accounts:signInWithCustomToken",ut(m,h))})).apply(this,arguments)}function Qo(){return(Qo=(0,_.Z)(function*(m,h){const f=Mn(m),v=yield Cs(f,{token:h,returnSecureToken:!0}),b=yield er._fromIdTokenResponse(f,"signIn",v);return yield f._updateCurrentUser(b.user),b})).apply(this,arguments)}class Cu{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?ka._fromServerResponse(h,f):Zt(h,"internal-error")}}class ka extends Cu{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new ka(f)}}function Jo(m,h,f){var v;Ne((null===(v=f.url)||void 0===v?void 0:v.length)>0,m,"invalid-continue-uri"),Ne(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(Ne(f.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(Ne(f.android.packageName.length>0,m,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function La(){return(La=(0,_.Z)(function*(m,h,f){const v=(0,O.m9)(m),b={requestType:"PASSWORD_RESET",email:h};f&&Jo(v,b,f),yield zp(v,b)})).apply(this,arguments)}function Ol(){return(Ol=(0,_.Z)(function*(m,h,f){yield Ah((0,O.m9)(m),{oobCode:h,newPassword:f})})).apply(this,arguments)}function Xo(){return(Xo=(0,_.Z)(function*(m,h){yield Wp((0,O.m9)(m),{oobCode:h})})).apply(this,arguments)}function ed(m,h){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,_.Z)(function*(m,h){const f=(0,O.m9)(m),v=yield Ah(f,{oobCode:h}),b=v.requestType;switch(Ne(b,f,"internal-error"),b){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ne(v.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ne(v.mfaInfo,f,"internal-error");default:Ne(v.email,f,"internal-error")}let x=null;return v.mfaInfo&&(x=Cu._fromServerResponse(Mn(f),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:x},operation:b}})).apply(this,arguments)}function Ua(){return(Ua=(0,_.Z)(function*(m,h){const{data:f}=yield ed((0,O.m9)(m),h);return f.email})).apply(this,arguments)}function td(){return(td=(0,_.Z)(function*(m,h,f){const v=Mn(m),b=yield zo(v,{returnSecureToken:!0,email:h,password:f}),x=yield er._fromIdTokenResponse(v,"signIn",b);return yield v._updateCurrentUser(x.user),x})).apply(this,arguments)}function Rn(){return(Rn=(0,_.Z)(function*(m,h,f){const v=(0,O.m9)(m),b={requestType:"EMAIL_SIGNIN",email:h};Ne(f.handleCodeInApp,v,"argument-error"),f&&Jo(v,b,f),yield Sa(v,b)})).apply(this,arguments)}function ja(){return(ja=(0,_.Z)(function*(m,h,f){const v=(0,O.m9)(m),b=Wo.credentialWithLink(h,f||mr());return Ne(b._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),wu(v,b)})).apply(this,arguments)}function Nh(m,h){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,_.Z)(function*(m,h){return rn(m,"POST","/v1/accounts:createAuthUri",ut(m,h))})).apply(this,arguments)}function Ph(){return(Ph=(0,_.Z)(function*(m,h){const v={identifier:h,continueUri:_r()?mr():"http://localhost"},{signinMethods:b}=yield Nh((0,O.m9)(m),v);return b||[]})).apply(this,arguments)}function Ws(){return(Ws=(0,_.Z)(function*(m,h){const f=(0,O.m9)(m),b={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};h&&Jo(f.auth,b,h);const{email:x}=yield qp(f.auth,b);x!==m.email&&(yield m.reload())})).apply(this,arguments)}function Tu(){return(Tu=(0,_.Z)(function*(m,h,f){const v=(0,O.m9)(m),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:h};f&&Jo(v.auth,x,f);const{email:j}=yield Ml(v.auth,x);j!==m.email&&(yield m.reload())})).apply(this,arguments)}function Oh(m,h){return rd.apply(this,arguments)}function rd(){return(rd=(0,_.Z)(function*(m,h){return rn(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function vn(){return(vn=(0,_.Z)(function*(m,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const v=(0,O.m9)(m),x={idToken:yield v.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},j=yield Un(v,Oh(v.auth,x));v.displayName=j.displayName||null,v.photoURL=j.photoUrl||null;const te=v.providerData.find(({providerId:we})=>"password"===we);te&&(te.displayName=v.displayName,te.photoURL=v.photoURL),yield v._updateTokensIfNecessary(j)})).apply(this,arguments)}function Ha(m,h,f){return Au.apply(this,arguments)}function Au(){return(Au=(0,_.Z)(function*(m,h,f){const{auth:v}=m,x={idToken:yield m.getIdToken(),returnSecureToken:!0};h&&(x.email=h),f&&(x.password=f);const j=yield Un(m,Sh(v,x));yield m._updateTokensIfNecessary(j,!0)})).apply(this,arguments)}class Ga{constructor(h,f,v={}){this.isNewUser=h,this.providerId=f,this.profile=v}}class sd extends Ga{constructor(h,f,v,b){super(h,f,v),this.username=b}}class Yp extends Ga{constructor(h,f){super(h,"facebook.com",f)}}class Bl extends sd{constructor(h,f){super(h,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class dr extends Ga{constructor(h,f){super(h,"google.com",f)}}class Su extends sd{constructor(h,f,v){super(h,"twitter.com",f,v)}}function An(m){const{user:h,_tokenResponse:f}=m;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function id(m){var h,f;if(!m)return null;const{providerId:v}=m,b=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},x=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!v&&(null==m?void 0:m.idToken)){const j=null===(f=null===(h=co(m.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(j)return new Ga(x,"anonymous"!==j&&"custom"!==j?j:null)}if(!v)return null;switch(v){case"facebook.com":return new Yp(x,b);case"github.com":return new Bl(x,b);case"google.com":return new dr(x,b);case"twitter.com":return new Su(x,b,m.screenName||null);case"custom":case"anonymous":return new Ga(x,null);default:return new Ga(x,v,b)}}(f)}class wn{constructor(h,f){this.type=h,this.credential=f}static _fromIdtoken(h){return new wn("enroll",h)}static _fromMfaPendingCredential(h){return new wn("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,v;if(null==h?void 0:h.multiFactorSession){if(null===(f=h.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return wn._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return wn._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Kr{constructor(h,f,v){this.session=h,this.hints=f,this.signInResolver=v}static _fromError(h,f){const v=Mn(h),b=f.customData._serverResponse,x=(b.mfaInfo||[]).map(te=>Cu._fromServerResponse(v,te));Ne(b.mfaPendingCredential,v,"internal-error");const j=wn._fromMfaPendingCredential(b.mfaPendingCredential);return new Kr(j,x,function(){var te=(0,_.Z)(function*(we){const Te=yield we._process(v,j);delete b.mfaInfo,delete b.mfaPendingCredential;const Ye=Object.assign(Object.assign({},b),{idToken:Te.idToken,refreshToken:Te.refreshToken});switch(f.operationType){case"signIn":const Xe=yield er._fromIdTokenResponse(v,f.operationType,Ye);return yield v._updateCurrentUser(Xe.user),Xe;case"reauthenticate":return Ne(f.user,v,"internal-error"),er._forOperation(f.user,f.operationType,Ye);default:Zt(v,"internal-error")}});return function(we){return te.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,_.Z)(function*(){return f.signInResolver(h)})()}}function Wa(m,h){return rn(m,"POST","/v2/accounts/mfaEnrollment:start",ut(m,h))}class qa{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(v=>Cu._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new qa(h)}getSession(){var h=this;return(0,_.Z)(function*(){return wn._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,f){var v=this;return(0,_.Z)(function*(){const b=h,x=yield v.getSession(),j=yield Un(v.user,b._process(v.user.auth,x,f));return yield v.user._updateTokensIfNecessary(j),v.user.reload()})()}unenroll(h){var f=this;return(0,_.Z)(function*(){const v="string"==typeof h?h:h.uid,b=yield f.user.getIdToken(),x=yield Un(f.user,function xu(m,h){return rn(m,"POST","/v2/accounts/mfaEnrollment:withdraw",ut(m,h))}(f.user.auth,{idToken:b,mfaEnrollmentId:v}));f.enrolledFactors=f.enrolledFactors.filter(({uid:j})=>j!==v),yield f.user._updateTokensIfNecessary(x);try{yield f.user.reload()}catch(j){if("auth/user-token-expired"!==j.code)throw j}})()}}const qs=new WeakMap,ea="__sak";class un{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(ea,"1"),this.storage.removeItem(ea),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Er=(()=>{class m extends un{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,v)=>this.onStorageEvent(f,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ts(){const m=(0,O.z$)();return jo(m)||Ki(m)}()&&function bi(){try{return!(!window||window===window.top)}catch(m){return!1}}(),this.fallbackToPolling=Go(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const v of Object.keys(this.listeners)){const b=this.storage.getItem(v),x=this.localCache[v];b!==x&&f(v,x,b)}}onStorageEvent(f,v=!1){if(!f.key)return void this.forAllChangedKeys((te,we,Te)=>{this.notifyListeners(te,Te)});const b=f.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const te=this.storage.getItem(b);if(f.newValue!==te)null!==f.newValue?this.storage.setItem(b,f.newValue):this.storage.removeItem(b);else if(this.localCache[b]===f.newValue&&!v)return}const x=()=>{const te=this.storage.getItem(b);!v&&this.localCache[b]===te||this.notifyListeners(b,te)},j=this.storage.getItem(b);!function Vc(){return(0,O.w1)()&&10===document.documentMode}()||j===f.newValue||f.newValue===f.oldValue?x():setTimeout(x,10)}notifyListeners(f,v){this.localCache[f]=v;const b=this.listeners[f];if(b)for(const x of Array.from(b))x(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,v,b)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:v,newValue:b}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,v){var b=()=>super._set,x=this;return(0,_.Z)(function*(){yield b().call(x,f,v),x.localCache[f]=JSON.stringify(v)})()}_get(f){var v=()=>super._get,b=this;return(0,_.Z)(function*(){const x=yield v().call(b,f);return b.localCache[f]=JSON.stringify(x),x})()}_remove(f){var v=()=>super._remove,b=this;return(0,_.Z)(function*(){yield v().call(b,f),delete b.localCache[f]})()}}return m.type="LOCAL",m})(),ln=(()=>{class m extends un{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,v){}_removeListener(f,v){}}return m.type="SESSION",m})();let od=(()=>{class m{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const v=this.receivers.find(x=>x.isListeningto(f));if(v)return v;const b=new m(f);return this.receivers.push(b),b}isListeningto(f){return this.eventTarget===f}handleEvent(f){var v=this;return(0,_.Z)(function*(){const b=f,{eventId:x,eventType:j,data:te}=b.data,we=v.handlersMap[j];if(!(null==we?void 0:we.size))return;b.ports[0].postMessage({status:"ack",eventId:x,eventType:j});const Te=Array.from(we).map(function(){var Xe=(0,_.Z)(function*(Nt){return Nt(b.origin,te)});return function(Nt){return Xe.apply(this,arguments)}}()),Ye=yield function Ru(m){return Promise.all(m.map(function(){var h=(0,_.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(v){return{fulfilled:!1,reason:v}}});return function(f){return h.apply(this,arguments)}}()))}(Te);b.ports[0].postMessage({status:"done",eventId:x,eventType:j,response:Ye})})()}_subscribe(f,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(v)}_unsubscribe(f,v){this.handlersMap[f]&&v&&this.handlersMap[f].delete(v),(!v||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function zs(m="",h=10){let f="";for(let v=0;v<h;v++)f+=Math.floor(10*Math.random());return m+f}class Eo{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,f,v=50){var b=this;return(0,_.Z)(function*(){const x="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let j,te;return new Promise((we,Te)=>{const Ye=zs("",20);x.port1.start();const Xe=setTimeout(()=>{Te(new Error("unsupported_event"))},v);te={messageChannel:x,onMessage(Nt){const zn=Nt;if(zn.data.eventId===Ye)switch(zn.data.status){case"ack":clearTimeout(Xe),j=setTimeout(()=>{Te(new Error("timeout"))},3e3);break;case"done":clearTimeout(j),we(zn.data.response);break;default:clearTimeout(Xe),clearTimeout(j),Te(new Error("invalid_response"))}}},b.handlers.add(te),x.port1.addEventListener("message",te.onMessage),b.target.postMessage({eventType:h,eventId:Ye,data:f},[x.port2])}).finally(()=>{te&&b.removeMessageHandler(te)})})()}}function Sn(){return window}function ta(){return void 0!==Sn().WorkerGlobalScope&&"function"==typeof Sn().importScripts}function Ji(){return(Ji=(0,_.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(m){return null}})).apply(this,arguments)}const wo="firebaseLocalStorageDb",Oi="firebaseLocalStorage",ad="fbase_key";class nn{constructor(h){this.request=h}toPromise(){return new Promise((h,f)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function xn(m,h){return m.transaction([Oi],h?"readwrite":"readonly").objectStore(Oi)}function $l(){const m=indexedDB.open(wo,1);return new Promise((h,f)=>{m.addEventListener("error",()=>{f(m.error)}),m.addEventListener("upgradeneeded",()=>{const v=m.result;try{v.createObjectStore(Oi,{keyPath:ad})}catch(b){f(b)}}),m.addEventListener("success",(0,_.Z)(function*(){const v=m.result;v.objectStoreNames.contains(Oi)?h(v):(v.close(),yield function na(){const m=indexedDB.deleteDatabase(wo);return new nn(m).toPromise()}(),h(yield $l()))}))})}function As(m,h,f){return wr.apply(this,arguments)}function wr(){return(wr=(0,_.Z)(function*(m,h,f){const v=xn(m,!0).put({[ad]:h,value:f});return new nn(v).toPromise()})).apply(this,arguments)}function Ka(){return(Ka=(0,_.Z)(function*(m,h){const f=xn(m,!1).get(h),v=yield new nn(f).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Io(m,h){const f=xn(m,!0).delete(h);return new nn(f).toPromise()}const es=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,_.Z)(function*(){return f.db||(f.db=yield $l()),f.db})()}_withRetries(f){var v=this;return(0,_.Z)(function*(){let b=0;for(;;)try{const x=yield v._openDb();return yield f(x)}catch(x){if(b++>3)throw x;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,_.Z)(function*(){return ta()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,_.Z)(function*(){f.receiver=od._getInstance(function Gl(){return ta()?self:null}()),f.receiver._subscribe("keyChanged",function(){var v=(0,_.Z)(function*(b,x){return{keyProcessed:(yield f._poll()).includes(x.key)}});return function(b,x){return v.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var v=(0,_.Z)(function*(b,x){return["keyChanged"]});return function(b,x){return v.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,_.Z)(function*(){var v,b;if(f.activeServiceWorker=yield function Mr(){return Ji.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Eo(f.activeServiceWorker);const x=yield f.sender._send("ping",{},800);!x||(null===(v=x[0])||void 0===v?void 0:v.fulfilled)&&(null===(b=x[0])||void 0===b?void 0:b.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var v=this;return(0,_.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Zr(){var m;return(null===(m=null==navigator?void 0:navigator.serviceWorker)||void 0===m?void 0:m.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:f},v.serviceWorkerReceiverAvailable?800:50)}catch(b){}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const f=yield $l();return yield As(f,ea,"1"),yield Io(f,ea),!0}catch(f){}return!1})()}_withPendingWrite(f){var v=this;return(0,_.Z)(function*(){v.pendingWrites++;try{yield f()}finally{v.pendingWrites--}})()}_set(f,v){var b=this;return(0,_.Z)(function*(){return b._withPendingWrite((0,_.Z)(function*(){return yield b._withRetries(x=>As(x,f,v)),b.localCache[f]=v,b.notifyServiceWorker(f)}))})()}_get(f){var v=this;return(0,_.Z)(function*(){const b=yield v._withRetries(x=>function H_(m,h){return Ka.apply(this,arguments)}(x,f));return v.localCache[f]=b,b})()}_remove(f){var v=this;return(0,_.Z)(function*(){return v._withPendingWrite((0,_.Z)(function*(){return yield v._withRetries(b=>Io(b,f)),delete v.localCache[f],v.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,_.Z)(function*(){const v=yield f._withRetries(j=>{const te=xn(j,!1).getAll();return new nn(te).toPromise()});if(!v)return[];if(0!==f.pendingWrites)return[];const b=[],x=new Set;for(const{fbase_key:j,value:te}of v)x.add(j),JSON.stringify(f.localCache[j])!==JSON.stringify(te)&&(f.notifyListeners(j,te),b.push(j));for(const j of Object.keys(f.localCache))f.localCache[j]&&!x.has(j)&&(f.notifyListeners(j,null),b.push(j));return b})()}notifyListeners(f,v){this.localCache[f]=v;const b=this.listeners[f];if(b)for(const x of Array.from(b))x(v)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function Pu(m,h){return rn(m,"POST","/v2/accounts/mfaSignIn:start",ut(m,h))}function Qt(){return(Qt=(0,_.Z)(function*(m){return(yield rn(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Za(m){return new Promise((h,f)=>{const v=document.createElement("script");v.setAttribute("src",m),v.onload=h,v.onerror=b=>{const x=Bt("internal-error");x.customData=b,f(x)},v.type="text/javascript",v.charset="UTF-8",function ql(){var m,h;return null!==(h=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==h?h:document}().appendChild(v)})}function ra(m){return`__${m}${Math.floor(1e6*Math.random())}`}const Ya=1e12;class ld{constructor(h){this.auth=h,this.counter=Ya,this._widgets=new Map}render(h,f){const v=this.counter;return this._widgets.set(v,new zl(h,this.auth.name,f||{})),this.counter++,v}reset(h){var f;const v=h||Ya;null===(f=this._widgets.get(v))||void 0===f||f.delete(),this._widgets.delete(v)}getResponse(h){var f;return(null===(f=this._widgets.get(h||Ya))||void 0===f?void 0:f.getResponse())||""}execute(h){var f=this;return(0,_.Z)(function*(){var v;return null===(v=f._widgets.get(h||Ya))||void 0===v||v.execute(),""})()}}class zl{constructor(h,f,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const b="string"==typeof h?document.getElementById(h):h;Ne(b,"argument-error",{appName:f}),this.container=b,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Co(m){const h=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<m;v++)h.push(f.charAt(Math.floor(Math.random()*f.length)));return h.join("")}(50);const{callback:h,"expired-callback":f}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const nr=ra("rcb"),xs=new Rt(3e4,6e4);class cd{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Sn().grecaptcha}load(h,f=""){return Ne(function Ys(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(f),h,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(Sn().grecaptcha):new Promise((v,b)=>{const x=Sn().setTimeout(()=>{b(Bt(h,"network-request-failed"))},xs.get());Sn()[nr]=()=>{Sn().clearTimeout(x),delete Sn()[nr];const te=Sn().grecaptcha;if(!te)return void b(Bt(h,"internal-error"));const we=te.render;te.render=(Te,Ye)=>{const Xe=we(Te,Ye);return this.counter++,Xe},this.hostLanguage=f,v(te)},Za(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:nr,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(x),b(Bt(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!Sn().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ia{load(h){return(0,_.Z)(function*(){return new ld(h)})()}clearedOneInstance(){}}const Qa="recaptcha",Lh={theme:"light",type:"image"};class Vh{constructor(h,f=Object.assign({},Lh),v){this.parameters=f,this.type=Qa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mn(v),this.isInvisible="invisible"===this.parameters.size,Ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const b="string"==typeof h?document.getElementById(h):h;Ne(b,this.auth,"argument-error"),this.container=b,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ia:new cd,this.validateStartingState()}verify(){var h=this;return(0,_.Z)(function*(){h.assertNotDestroyed();const f=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(f)||new Promise(x=>{const j=te=>{!te||(h.tokenChangeListeners.delete(j),x(te))};h.tokenChangeListeners.add(j),h.isInvisible&&v.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){Ne(!this.parameters.sitekey,this.auth,"argument-error"),Ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return f=>{if(this.tokenChangeListeners.forEach(v=>v(f)),"function"==typeof h)h(f);else if("string"==typeof h){const v=Sn()[h];"function"==typeof v&&v(f)}}}assertNotDestroyed(){Ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,_.Z)(function*(){if(yield h.init(),!h.widgetId){let f=h.container;if(!h.isInvisible){const v=document.createElement("div");f.appendChild(v),f=v}h.widgetId=h.getAssertedRecaptcha().render(f,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,_.Z)(function*(){Ne(_r()&&!ta(),h.auth,"internal-error"),yield function Bh(){let m=null;return new Promise(h=>{"complete"!==document.readyState?(m=()=>h(),window.addEventListener("load",m)):h()}).catch(h=>{throw m&&window.removeEventListener("load",m),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const f=yield function Yr(m){return Qt.apply(this,arguments)}(h.auth);Ne(f,h.auth,"internal-error"),h.parameters.sitekey=f})()}getAssertedRecaptcha(){return Ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ja{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=$t._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function ki(){return(ki=(0,_.Z)(function*(m,h,f){const v=Mn(m),b=yield Fu(v,h,(0,O.m9)(f));return new Ja(b,x=>wu(v,x))})).apply(this,arguments)}function Qs(){return(Qs=(0,_.Z)(function*(m,h,f){const v=(0,O.m9)(m);yield _o(!1,v,"phone");const b=yield Fu(v.auth,h,(0,O.m9)(f));return new Ja(b,x=>Oa(v,x))})).apply(this,arguments)}function Nr(){return(Nr=(0,_.Z)(function*(m,h,f){const v=(0,O.m9)(m),b=yield Fu(v.auth,h,(0,O.m9)(f));return new Ja(b,x=>xi(v,x))})).apply(this,arguments)}function Fu(m,h,f){return ts.apply(this,arguments)}function ts(){return(ts=(0,_.Z)(function*(m,h,f){var v;const b=yield f.verify();try{let x;if(Ne("string"==typeof b,m,"argument-error"),Ne(f.type===Qa,m,"argument-error"),x="string"==typeof h?{phoneNumber:h}:h,"session"in x){const j=x.session;if("phoneNumber"in x)return Ne("enroll"===j.type,m,"internal-error"),(yield Wa(m,{idToken:j.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:b}})).phoneSessionInfo.sessionInfo;{Ne("signin"===j.type,m,"internal-error");const te=(null===(v=x.multiFactorHint)||void 0===v?void 0:v.uid)||x.multiFactorUid;return Ne(te,m,"missing-multi-factor-info"),(yield Pu(m,{mfaPendingCredential:j.credential,mfaEnrollmentId:te,phoneSignInInfo:{recaptchaToken:b}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:j}=yield Si(m,{phoneNumber:x.phoneNumber,recaptchaToken:b});return j}}finally{f._reset()}})).apply(this,arguments)}function Xa(){return(Xa=(0,_.Z)(function*(m,h){yield yu((0,O.m9)(m),h)})).apply(this,arguments)}let Js=(()=>{class m{constructor(f){this.providerId=m.PROVIDER_ID,this.auth=Mn(f)}verifyPhoneNumber(f,v){return Fu(this.auth,f,(0,O.m9)(v))}static credential(f,v){return $t._fromVerification(f,v)}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:v,temporaryProof:b}=f;return v&&b?$t._fromTokenResponse(v,b):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function Qr(m,h){return h?kt(h):(Ne(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class Lu extends Ta{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return js(h,this._buildIdpRequest())}_linkToIdToken(h,f){return js(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return js(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function Jp(m){return vu(m.auth,new Lu(m),m.bypassAuthState)}function D(m){const{auth:h,user:f}=m;return Ne(f,h,"internal-error"),zr(f,new Lu(m),m.bypassAuthState)}function T(m){return R.apply(this,arguments)}function R(){return(R=(0,_.Z)(function*(m){const{auth:h,user:f}=m;return Ne(f,h,"internal-error"),yu(f,new Lu(m),m.bypassAuthState)})).apply(this,arguments)}class V{constructor(h,f,v,b,x=!1){this.auth=h,this.resolver=v,this.user=b,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,_.Z)(function*(v,b){h.pendingPromise={resolve:v,reject:b};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(x){h.reject(x)}});return function(v,b){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,_.Z)(function*(){const{urlResponse:v,sessionId:b,postBody:x,tenantId:j,error:te,type:we}=h;if(te)return void f.reject(te);const Te={auth:f.auth,requestUri:v,sessionId:b,tenantId:j||void 0,postBody:x||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(we)(Te))}catch(Ye){f.reject(Ye)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Jp;case"linkViaPopup":case"linkViaRedirect":return T;case"reauthViaPopup":case"reauthViaRedirect":return D;default:Zt(this.auth,"internal-error")}}resolve(h){it(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){it(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const z=new Rt(2e3,1e4);function Me(){return(Me=(0,_.Z)(function*(m,h,f){const v=Mn(m);Gr(m,h,$n);const b=Qr(v,f);return new Pn(v,"signInViaPopup",h,b).executeNotNull()})).apply(this,arguments)}function Ve(){return(Ve=(0,_.Z)(function*(m,h,f){const v=(0,O.m9)(m);Gr(v.auth,h,$n);const b=Qr(v.auth,f);return new Pn(v.auth,"reauthViaPopup",h,b,v).executeNotNull()})).apply(this,arguments)}function Wt(){return(Wt=(0,_.Z)(function*(m,h,f){const v=(0,O.m9)(m);Gr(v.auth,h,$n);const b=Qr(v.auth,f);return new Pn(v.auth,"linkViaPopup",h,b,v).executeNotNull()})).apply(this,arguments)}let Pn=(()=>{class m extends V{constructor(f,v,b,x,j){super(f,v,x,j),this.provider=b,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var f=this;return(0,_.Z)(function*(){const v=yield f.execute();return Ne(v,f.auth,"internal-error"),v})()}onExecution(){var f=this;return(0,_.Z)(function*(){it(1===f.filter.length,"Popup operations only handle one event");const v=zs();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],v),f.authWindow.associatedEvent=v,f.resolver._originValidation(f.auth).catch(b=>{f.reject(b)}),f.resolver._isIframeWebStorageSupported(f.auth,b=>{b||f.reject(Bt(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Bt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const f=()=>{var v,b;this.pollId=(null===(b=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===b?void 0:b.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Bt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,z.get())};f()}}return m.currentPopupAction=null,m})();const En=new Map;class sa extends V{constructor(h,f,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,_.Z)(function*(){let v=En.get(f.auth._key());if(!v){try{const x=(yield function oa(m,h){return Xs.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;v=()=>Promise.resolve(x)}catch(b){v=()=>Promise.reject(b)}En.set(f.auth._key(),v)}return f.bypassAuthState||En.set(f.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,v=this;return(0,_.Z)(function*(){if("signInViaRedirect"===h.type)return f().call(v,h);if("unknown"!==h.type){if(h.eventId){const b=yield v.auth._redirectUserForId(h.eventId);if(b)return v.user=b,f().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function Xs(){return(Xs=(0,_.Z)(function*(m,h){const f=Bu(h),v=Vu(m);if(!(yield v._isAvailable()))return!1;const b="true"===(yield v._get(f));return yield v._remove(f),b})).apply(this,arguments)}function Rr(m,h){return ns.apply(this,arguments)}function ns(){return(ns=(0,_.Z)(function*(m,h){return Vu(m)._set(Bu(h),"true")})).apply(this,arguments)}function Vu(m){return kt(m._redirectPersistence)}function Bu(m){return Lt("pendingRedirect",m.config.apiKey,m.name)}function Uh(){return(Uh=(0,_.Z)(function*(m,h,f){const v=Mn(m);Gr(m,h,$n);const b=Qr(v,f);return yield Rr(b,v),b._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function jh(){return(jh=(0,_.Z)(function*(m,h,f){const v=(0,O.m9)(m);Gr(v.auth,h,$n);const b=Qr(v.auth,f);yield Rr(b,v.auth);const x=yield Uu(v);return b._openRedirect(v.auth,h,"reauthViaRedirect",x)})).apply(this,arguments)}function Yl(){return(Yl=(0,_.Z)(function*(m,h,f){const v=(0,O.m9)(m);Gr(v.auth,h,$n);const b=Qr(v.auth,f);yield _o(!1,v,h.providerId),yield Rr(b,v.auth);const x=yield Uu(v);return b._openRedirect(v.auth,h,"linkViaRedirect",x)})).apply(this,arguments)}function Gh(){return(Gh=(0,_.Z)(function*(m,h){return yield Mn(m)._initializationPromise,Ql(m,h,!1)})).apply(this,arguments)}function Ql(m,h){return $h.apply(this,arguments)}function $h(){return($h=(0,_.Z)(function*(m,h,f=!1){const v=Mn(m),b=Qr(v,h),j=yield new sa(v,b,f).execute();return j&&!f&&(delete j.user._redirectEventId,yield v._persistUserIfCurrent(j.user),yield v._setRedirectUser(null,h)),j})).apply(this,arguments)}function Uu(m){return ju.apply(this,arguments)}function ju(){return(ju=(0,_.Z)(function*(m){const h=zs(`${m.uid}:::`);return m._redirectEventId=h,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),h})).apply(this,arguments)}class fd{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(f=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function md(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gd(m);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var v;if(h.error&&!gd(h)){const b=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";f.onError(Bt(this.auth,b))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const v=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pd(h))}saveEventToCache(h){this.cachedEventUids.add(pd(h)),this.lastProcessedEventTime=Date.now()}}function pd(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(h=>h).join("-")}function gd({type:m,error:h}){return"unknown"===m&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Wh(m){return _d.apply(this,arguments)}function _d(){return(_d=(0,_.Z)(function*(m,h={}){return rn(m,"GET","/v1/projects",h)})).apply(this,arguments)}const Jt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jt=/^https?/;function si(){return(si=(0,_.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:h}=yield Wh(m);for(const f of h)try{if(hn(f))return}catch(v){}Zt(m,"unauthorized-domain")})).apply(this,arguments)}function hn(m){const h=mr(),{protocol:f,hostname:v}=new URL(h);if(m.startsWith("chrome-extension://")){const j=new URL(m);return""===j.hostname&&""===v?"chrome-extension:"===f&&m.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&j.hostname===v}if(!jt.test(f))return!1;if(Jt.test(m))return v===m;const b=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+b+"|"+b+")$","i").test(v)}const eg=new Rt(3e4,6e4);function $_(){const m=Sn().___jsl;if(null==m?void 0:m.H)for(const h of Object.keys(m.H))if(m.H[h].r=m.H[h].r||[],m.H[h].L=m.H[h].L||[],m.H[h].r=[...m.H[h].L],m.CP)for(let f=0;f<m.CP.length;f++)m.CP[f]=null}let vd=null;function In(m){return vd=vd||function yd(m){return new Promise((h,f)=>{var v,b,x;function j(){$_(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{$_(),f(Bt(m,"network-request-failed"))},timeout:eg.get()})}if(null===(b=null===(v=Sn().gapi)||void 0===v?void 0:v.iframes)||void 0===b?void 0:b.Iframe)h(gapi.iframes.getContext());else{if(!(null===(x=Sn().gapi)||void 0===x?void 0:x.load)){const te=ra("iframefcb");return Sn()[te]=()=>{gapi.load?j():f(Bt(m,"network-request-failed"))},Za(`https://apis.google.com/js/api.js?onload=${te}`).catch(we=>f(we))}j()}}).catch(h=>{throw vd=null,h})}(m),vd}const xt=new Rt(5e3,15e3),qh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JE(m){const h=m.config;Ne(h.authDomain,m,"auth-domain-config-required");const f=h.emulator?st(h,"emulator/auth/iframe"):`https://${m.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:m.name,v:se.SDK_VERSION},b=rs.get(m.config.apiHost);b&&(v.eid=b);const x=m._getFrameworks();return x.length&&(v.fw=x.join(",")),`${f}?${(0,O.xO)(v).slice(1)}`}function Hu(){return Hu=(0,_.Z)(function*(m){const h=yield In(m),f=Sn().gapi;return Ne(f,m,"internal-error"),h.open({where:document.body,url:JE(m),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qh,dontclear:!0},v=>new Promise(function(){var b=(0,_.Z)(function*(x,j){yield v.restyle({setHideOnLeave:!1});const te=Bt(m,"network-request-failed"),we=Sn().setTimeout(()=>{j(te)},xt.get());function Te(){Sn().clearTimeout(we),x(v)}v.ping(Te).then(Te,()=>{j(te)})});return function(x,j){return b.apply(this,arguments)}}()))}),Hu.apply(this,arguments)}const zh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Kh{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function $u(m,h,f,v,b,x){Ne(m.config.authDomain,m,"auth-domain-config-required"),Ne(m.config.apiKey,m,"invalid-api-key");const j={apiKey:m.config.apiKey,appName:m.name,authType:f,redirectUrl:v,v:se.SDK_VERSION,eventId:b};if(h instanceof $n){h.setDefaultLanguage(m.languageCode),j.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(j.customParameters=JSON.stringify(h.getCustomParameters()));for(const[we,Te]of Object.entries(x||{}))j[we]=Te}if(h instanceof Nn){const we=h.getScopes().filter(Te=>""!==Te);we.length>0&&(j.scopes=we.join(","))}m.tenantId&&(j.tid=m.tenantId);const te=j;for(const we of Object.keys(te))void 0===te[we]&&delete te[we];return`${function bo({config:m}){return m.emulator?st(m,"emulator/auth/handler"):`https://${m.authDomain}/__/auth/handler`}(m)}?${(0,O.xO)(te).slice(1)}`}const Mt="webStorageSupport";class is extends class ng{constructor(h){this.factorId=h}_process(h,f,v){switch(f.type){case"enroll":return this._finalizeEnroll(h,f.credential,v);case"signin":return this._finalizeSignIn(h,f.credential);default:return lr("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new is(h)}_finalizeEnroll(h,f,v){return function vo(m,h){return rn(m,"POST","/v2/accounts/mfaEnrollment:finalize",ut(m,h))}(h,{idToken:f,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,f){return function Wl(m,h){return rn(m,"POST","/v2/accounts/mfaSignIn:finalize",ut(m,h))}(h,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ed=(()=>{class m{constructor(){}static assertion(f){return is._fromCredential(f)}}return m.FACTOR_ID="phone",m})();var ss="@firebase/auth";class Ir{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var f=this;return(0,_.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const f=this.auth.onIdTokenChanged(v=>{var b;h((null===(b=v)||void 0===b?void 0:b.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,f),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const f=this.internalListeners.get(h);!f||(this.internalListeners.delete(h),f(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pn(){return window}function qu(){return(qu=(0,_.Z)(function*(m,h,f){var v;const{BuildInfo:b}=pn();it(h.sessionId,"AuthEvent did not contain a session ID");const x=yield _n(h.sessionId),j={};return Ki()?j.ibi=b.packageName:zi()?j.apn=b.packageName:Zt(m,"operation-not-supported-in-this-environment"),b.displayName&&(j.appDisplayName=b.displayName),j.sessionId=x,$u(m,f,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,j)})).apply(this,arguments)}function wd(){return(wd=(0,_.Z)(function*(m){const{BuildInfo:h}=pn(),f={};Ki()?f.iosBundleId=h.packageName:zi()?f.androidPackageName=h.packageName:Zt(m,"operation-not-supported-in-this-environment"),yield Wh(m,f)})).apply(this,arguments)}function Jh(){return(Jh=(0,_.Z)(function*(m,h,f){const{cordova:v}=pn();let b=()=>{};try{yield new Promise((x,j)=>{let te=null;function we(){var Xe;x();const Nt=null===(Xe=v.plugins.browsertab)||void 0===Xe?void 0:Xe.close;"function"==typeof Nt&&Nt(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function Te(){te||(te=window.setTimeout(()=>{j(Bt(m,"redirect-cancelled-by-user"))},2e3))}function Ye(){"visible"===(null==document?void 0:document.visibilityState)&&Te()}h.addPassiveListener(we),document.addEventListener("resume",Te,!1),zi()&&document.addEventListener("visibilitychange",Ye,!1),b=()=>{h.removePassiveListener(we),document.removeEventListener("resume",Te,!1),document.removeEventListener("visibilitychange",Ye,!1),te&&window.clearTimeout(te)}})}finally{b()}})).apply(this,arguments)}function _n(m){return ag.apply(this,arguments)}function ag(){return(ag=(0,_.Z)(function*(m){const h=Xl(m),f=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(f)).map(b=>b.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Xl(m){if(it(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(m);const h=new ArrayBuffer(m.length),f=new Uint8Array(h);for(let v=0;v<m.length;v++)f[v]=m.charCodeAt(v);return f}!function Jl(m){(0,se._registerComponent)(new le.wA("auth",(h,{options:f})=>{const v=h.getProvider("app").getImmediate(),{apiKey:b,authDomain:x}=v.options;return(j=>{Ne(b&&!b.includes(":"),"invalid-api-key",{appName:j.name}),Ne(!(null==x?void 0:x.includes(":")),"argument-error",{appName:j.name});const te={apiKey:b,authDomain:x,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ti(m)},we=new Bc(j,te);return function Bs(m,h){const f=(null==h?void 0:h.persistence)||[],v=(Array.isArray(f)?f:[f]).map(kt);(null==h?void 0:h.errorMap)&&m._updateErrorMap(h.errorMap),m._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(we,f),we})(v)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,f,v)=>{h.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new le.wA("auth-internal",h=>{const f=Mn(h.getProvider("auth").getImmediate());return new Ir(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(ss,"0.19.9",function K_(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(m)),(0,se.registerVersion)(ss,"0.19.9","esm2017")}("Browser");class ec extends fd{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(h)),super.onEvent(h)}initialized(){var h=this;return(0,_.Z)(function*(){yield h.initPromise})()}}function On(m){return yt.apply(this,arguments)}function yt(){return(yt=(0,_.Z)(function*(m){const h=yield ef()._get(gn(m));return h&&(yield ef()._remove(gn(m))),h})).apply(this,arguments)}function tc(){const m=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const v=Math.floor(Math.random()*h.length);m.push(h.charAt(v))}return m.join("")}function ef(){return kt(Er)}function gn(m){return Lt("authEvent",m.config.apiKey,m.name)}function zu(m){if(!(null==m?void 0:m.includes("?")))return{};const[h,...f]=m.split("?");return(0,O.zd)(f.join("?"))}function nc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Bt("no-auth-event")}}function To(){var m;return(null===(m=null==self?void 0:self.location)||void 0===m?void 0:m.protocol)||null}function Ku(m=(0,O.z$)()){return!("file:"!==To()&&"ionic:"!==To()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zu(){try{const m=self.localStorage,h=zs();if(m)return m.setItem(h,"1"),m.removeItem(h),!function X_(m=(0,O.z$)()){return function rf(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function rc(m=(0,O.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,O.hl)()}catch(m){return sf()&&(0,O.hl)()}return!1}function sf(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function of(){return(function Ao(){return"http:"===To()||"https:"===To()}()||(0,O.ru)()||Ku())&&!function J_(){return(0,O.b$)()||(0,O.UG)()}()&&Zu()&&!sf()}function hg(){return Ku()&&"undefined"!=typeof document}function Cd(){return(Cd=(0,_.Z)(function*(){return!!hg()&&new Promise(m=>{const h=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),m(!0)})})})).apply(this,arguments)}const Fi={LOCAL:"local",NONE:"none",SESSION:"session"},aa=Ne,ua="persistence";function ic(m){return fg.apply(this,arguments)}function fg(){return(fg=(0,_.Z)(function*(m){yield m._initializationPromise;const h=Yu(),f=Lt(ua,m.config.apiKey,m.name);h&&h.setItem(f,m._getPersistence())})).apply(this,arguments)}function Yu(){var m;try{return(null===(m=function uf(){return"undefined"!=typeof window?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch(h){return null}}const os=Ne;class as{constructor(){this.browserResolver=kt(class Yh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ln,this._completeRedirectFn=Ql}_openPopup(h,f,v,b){var x=this;return(0,_.Z)(function*(){var j;it(null===(j=x.eventManagers[h._key()])||void 0===j?void 0:j.manager,"_initialize() not called before _openPopup()");const te=$u(h,f,v,mr(),b);return function z_(m,h,f,v=500,b=600){const x=Math.max((window.screen.availHeight-b)/2,0).toString(),j=Math.max((window.screen.availWidth-v)/2,0).toString();let te="";const we=Object.assign(Object.assign({},zh),{width:v.toString(),height:b.toString(),top:x,left:j}),Te=(0,O.z$)().toLowerCase();f&&(te=po(Te)?"_blank":f),Ct(Te)&&(h=h||"http://localhost",we.scrollbars="yes");const Ye=Object.entries(we).reduce((Nt,[zn,Cr])=>`${Nt}${zn}=${Cr},`,"");if(function sn(m=(0,O.z$)()){var h;return Ki(m)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Te)&&"_self"!==te)return function XE(m,h){const f=document.createElement("a");f.href=m,f.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(v)}(h||"",te),new Kh(null);const Xe=window.open(h||"",te,Ye);Ne(Xe,m,"popup-blocked");try{Xe.focus()}catch(Nt){}return new Kh(Xe)}(h,te,zs())})()}_openRedirect(h,f,v,b){var x=this;return(0,_.Z)(function*(){return yield x._originValidation(h),function za(m){Sn().location.href=m}($u(h,f,v,mr(),b)),new Promise(()=>{})})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:b,promise:x}=this.eventManagers[f];return b?Promise.resolve(b):(it(x,"If manager is not set, promise should be"),x)}const v=this.initAndGetManager(h);return this.eventManagers[f]={promise:v},v.catch(()=>{delete this.eventManagers[f]}),v}initAndGetManager(h){var f=this;return(0,_.Z)(function*(){const v=yield function q_(m){return Hu.apply(this,arguments)}(h),b=new fd(h);return v.register("authEvent",x=>(Ne(null==x?void 0:x.authEvent,h,"invalid-auth-event"),{status:b.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:b},f.iframes[h._key()]=v,b})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(Mt,{type:Mt},b=>{var x;const j=null===(x=null==b?void 0:b[0])||void 0===x?void 0:x[Mt];void 0!==j&&f(!!j),Zt(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function vt(m){return si.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return Go()||jo()||Ki()}}),this.cordovaResolver=kt(class nf{constructor(){this._redirectPersistence=ln,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ql}_initialize(h){var f=this;return(0,_.Z)(function*(){const v=h._key();let b=f.eventManagers.get(v);return b||(b=new ec(h),f.eventManagers.set(v,b),f.attachCallbackListeners(h,b)),b})()}_openPopup(h){Zt(h,"operation-not-supported-in-this-environment")}_openRedirect(h,f,v,b){var x=this;return(0,_.Z)(function*(){!function Y_(m){var h,f,v,b,x,j,te,we,Te,Ye;const Xe=pn();Ne("function"==typeof(null===(h=null==Xe?void 0:Xe.universalLinks)||void 0===h?void 0:h.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ne(void 0!==(null===(f=null==Xe?void 0:Xe.BuildInfo)||void 0===f?void 0:f.packageName),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ne("function"==typeof(null===(x=null===(b=null===(v=null==Xe?void 0:Xe.cordova)||void 0===v?void 0:v.plugins)||void 0===b?void 0:b.browsertab)||void 0===x?void 0:x.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ne("function"==typeof(null===(we=null===(te=null===(j=null==Xe?void 0:Xe.cordova)||void 0===j?void 0:j.plugins)||void 0===te?void 0:te.browsertab)||void 0===we?void 0:we.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ne("function"==typeof(null===(Ye=null===(Te=null==Xe?void 0:Xe.cordova)||void 0===Te?void 0:Te.InAppBrowser)||void 0===Ye?void 0:Ye.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const j=yield x._initialize(h);yield j.initialized(),j.resetRedirect(),function Do(){En.clear()}(),yield x._originValidation(h);const te=function ru(m,h,f=null){return{type:h,eventId:f,urlResponse:null,sessionId:tc(),postBody:null,tenantId:m.tenantId,error:Bt(m,"no-auth-event")}}(h,v,b);yield function eo(m,h){return ef()._set(gn(m),h)}(h,te);const we=yield function sg(m,h,f){return qu.apply(this,arguments)}(h,te,f),Te=yield function og(m){const{cordova:h}=pn();return new Promise(f=>{h.plugins.browsertab.isAvailable(v=>{let b=null;v?h.plugins.browsertab.openUrl(m):b=h.InAppBrowser.open(m,function Wr(m=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),f(b)})})}(we);return function Z_(m,h,f){return Jh.apply(this,arguments)}(h,j,Te)})()}_isIframeWebStorageSupported(h,f){throw new Error("Method not implemented.")}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function nu(m){return wd.apply(this,arguments)}(h)),this.originValidationPromises[f]}attachCallbackListeners(h,f){const{universalLinks:v,handleOpenURL:b,BuildInfo:x}=pn(),j=setTimeout((0,_.Z)(function*(){yield On(h),f.onEvent(nc())}),500),te=function(){var Ye=(0,_.Z)(function*(Xe){clearTimeout(j);const Nt=yield On(h);let zn=null;Nt&&(null==Xe?void 0:Xe.url)&&(zn=function Xh(m,h){var f,v;const b=function ug(m){const h=zu(m),f=h.link?decodeURIComponent(h.link):void 0,v=zu(f).link,b=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return zu(b).link||b||v||f||m}(h);if(b.includes("/__/auth/callback")){const x=zu(b),j=x.firebaseError?function tf(m){try{return JSON.parse(m)}catch(h){return null}}(decodeURIComponent(x.firebaseError)):null,te=null===(v=null===(f=null==j?void 0:j.code)||void 0===f?void 0:f.split("auth/"))||void 0===v?void 0:v[1],we=te?Bt(te):null;return we?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:we,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:b,postBody:null}}return null}(Nt,Xe.url)),f.onEvent(zn||nc())});return function(Nt){return Ye.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,te);const we=b,Te=`${x.packageName.toLowerCase()}://`;pn().handleOpenURL=function(){var Ye=(0,_.Z)(function*(Xe){if(Xe.toLowerCase().startsWith(Te)&&te({url:Xe}),"function"==typeof we)try{we(Xe)}catch(Nt){console.error(Nt)}});return function(Xe){return Ye.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ln,this._completeRedirectFn=Ql}_initialize(h){var f=this;return(0,_.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,f,v,b){var x=this;return(0,_.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(h,f,v,b)})()}_openRedirect(h,f,v,b){var x=this;return(0,_.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(h,f,v,b)})()}_isIframeWebStorageSupported(h,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,f)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return hg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return os(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,_.Z)(function*(){if(h.underlyingResolver)return;const f=yield function af(){return Cd.apply(this,arguments)}();h.underlyingResolver=f?h.cordovaResolver:h.browserResolver})()}}function Dd(m){return m.unwrap()}function lf(m){return cf(m)}function cf(m){const{_tokenResponse:h}=m instanceof O.ZR?m.customData:m;if(!h)return null;if(!(m instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Js.credentialFromResult(m);const f=h.providerId;if(!f||"password"===f)return null;let v;switch(f){case"google.com":v=Yi;break;case"facebook.com":v=qo;break;case"github.com":v=Sr;break;case"twitter.com":v=Gs;break;default:const{oauthIdToken:b,oauthAccessToken:x,oauthTokenSecret:j,pendingToken:te,nonce:we}=h;return x||j||b||te?te?f.startsWith("saml.")?Qi._create(f,te):vr._fromParams({providerId:f,signInMethod:f,pendingToken:te,idToken:b,accessToken:x}):new ws(f).credential({idToken:b,accessToken:x,rawNonce:we}):null}return m instanceof O.ZR?v.credentialFromError(m):v.credentialFromResult(m)}function ei(m,h){return h.catch(f=>{throw f instanceof O.ZR&&function oc(m,h){var f;const v=null===(f=h.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new bd(m,function Hl(m,h){var f;const v=(0,O.m9)(m),b=h;return Ne(h.customData.operationType,v,"argument-error"),Ne(null===(f=b.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,v,"argument-error"),Kr._fromError(v,b)}(m,h));else if(v){const b=cf(h),x=h;b&&(x.credential=b,x.tenantId=v.tenantId||void 0,x.email=v.email||void 0,x.phoneNumber=v.phoneNumber||void 0)}}(m,f),f}).then(f=>{const b=f.user;return{operationType:f.operationType,credential:lf(f),additionalUserInfo:An(f),user:to.getOrCreate(b)}})}function Or(m,h){return su.apply(this,arguments)}function su(){return(su=(0,_.Z)(function*(m,h){const f=yield h;return{verificationId:f.verificationId,confirm:v=>ei(m,f.confirm(v))}})).apply(this,arguments)}class bd{constructor(h,f){this.resolver=f,this.auth=function ey(m){return m.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ei(Dd(this.auth),this.resolver.resolveSignIn(h))}}class to{constructor(h){this._delegate=h,this.multiFactor=function Mu(m){const h=(0,O.m9)(m);return qs.has(h)||qs.set(h,qa._fromUser(h)),qs.get(h)}(h)}static getOrCreate(h){return to.USER_MAP.has(h)||to.USER_MAP.set(h,new to(h)),to.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var f=this;return(0,_.Z)(function*(){return ei(f.auth,Oa(f._delegate,h))})()}linkWithPhoneNumber(h,f){var v=this;return(0,_.Z)(function*(){return Or(v.auth,function Kl(m,h,f){return Qs.apply(this,arguments)}(v._delegate,h,f))})()}linkWithPopup(h){var f=this;return(0,_.Z)(function*(){return ei(f.auth,function gt(m,h,f){return Wt.apply(this,arguments)}(f._delegate,h,as))})()}linkWithRedirect(h){var f=this;return(0,_.Z)(function*(){return yield ic(Mn(f.auth)),function Hh(m,h,f){return function Zl(m,h,f){return Yl.apply(this,arguments)}(m,h,f)}(f._delegate,h,as)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var f=this;return(0,_.Z)(function*(){return ei(f.auth,xi(f._delegate,h))})()}reauthenticateWithPhoneNumber(h,f){return Or(this.auth,function ku(m,h,f){return Nr.apply(this,arguments)}(this._delegate,h,f))}reauthenticateWithPopup(h){return ei(this.auth,function qe(m,h,f){return Ve.apply(this,arguments)}(this._delegate,h,as))}reauthenticateWithRedirect(h){var f=this;return(0,_.Z)(function*(){return yield ic(Mn(f.auth)),function QE(m,h,f){return function G_(m,h,f){return jh.apply(this,arguments)}(m,h,f)}(f._delegate,h,as)})()}sendEmailVerification(h){return function Vl(m,h){return Ws.apply(this,arguments)}(this._delegate,h)}unlink(h){var f=this;return(0,_.Z)(function*(){return yield function xe(m,h){return St.apply(this,arguments)}(f._delegate,h),f})()}updateEmail(h){return function kh(m,h){return Ha((0,O.m9)(m),h,null)}(this._delegate,h)}updatePassword(h){return function Zp(m,h){return Ha((0,O.m9)(m),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Qp(m,h){return Xa.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Ds(m,h){return vn.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,f){return function bu(m,h,f){return Tu.apply(this,arguments)}(this._delegate,h,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}to.USER_MAP=new WeakMap;const Li=Ne;let la=(()=>{class m{constructor(f,v){if(this.app=f,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:b}=f.options;Li(b,"invalid-api-key",{appName:f.name}),Li(b,"invalid-api-key",{appName:f.name});const x="undefined"!=typeof window?as:void 0;this._delegate=v.initialize({options:{persistence:Qu(b,f.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(ur),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?to.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,v){!function Zi(m,h,f){const v=Mn(m);Ne(v._canInitEmulator,v,"emulator-config-failed"),Ne(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const b=!!(null==f?void 0:f.disableWarnings),x=Uc(h),{host:j,port:te}=function $p(m){const h=Uc(m),f=/(\/\/)?([^?#/]+)/.exec(m.substr(h.length));if(!f)return{host:"",port:null};const v=f[2].split("@").pop()||"",b=/^(\[[^\]]+\])(:|$)/.exec(v);if(b){const x=b[1];return{host:x,port:Th(v.substr(x.length+1))}}{const[x,j]=v.split(":");return{host:x,port:Th(j)}}}(h);v.config.emulator={url:`${x}//${j}${null===te?"":`:${te}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:j,port:te,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:b})}),b||function Ai(){function m(){const h=document.createElement("p"),f=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,f,v)}applyActionCode(f){return function kl(m,h){return Xo.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return ed(this._delegate,f)}confirmPasswordReset(f,v){return function Va(m,h,f){return Ol.apply(this,arguments)}(this._delegate,f,v)}createUserWithEmailAndPassword(f,v){var b=this;return(0,_.Z)(function*(){return ei(b._delegate,function Du(m,h,f){return td.apply(this,arguments)}(b._delegate,f,v))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function nd(m,h){return Ph.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function yn(m,h){const f=on.parseLink(h);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,_.Z)(function*(){Li(of(),f._delegate,"operation-not-supported-in-this-environment");const v=yield function eu(m,h){return Gh.apply(this,arguments)}(f._delegate,as);return v?ei(f._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Q_(m,h){Mn(m)._logFramework(h)}(this._delegate,f)}onAuthStateChanged(f,v,b){const{next:x,error:j,complete:te}=So(f,v,b);return this._delegate.onAuthStateChanged(x,j,te)}onIdTokenChanged(f,v,b){const{next:x,error:j,complete:te}=So(f,v,b);return this._delegate.onIdTokenChanged(x,j,te)}sendSignInLinkToEmail(f,v){return function tr(m,h,f){return Rn.apply(this,arguments)}(this._delegate,f,v)}sendPasswordResetEmail(f,v){return function Fa(m,h,f){return La.apply(this,arguments)}(this._delegate,f,v||void 0)}setPersistence(f){var v=this;return(0,_.Z)(function*(){let b;switch(function Ms(m,h){aa(Object.values(Fi).includes(h),m,"invalid-persistence-type"),(0,O.b$)()?aa(h!==Fi.SESSION,m,"unsupported-persistence-type"):(0,O.UG)()?aa(h===Fi.NONE,m,"unsupported-persistence-type"):sf()?aa(h===Fi.NONE||h===Fi.LOCAL&&(0,O.hl)(),m,"unsupported-persistence-type"):aa(h===Fi.NONE||Zu(),m,"unsupported-persistence-type")}(v._delegate,f),f){case Fi.SESSION:b=ln;break;case Fi.LOCAL:b=(yield kt(es)._isAvailable())?es:Er;break;case Fi.NONE:b=Ar;break;default:return Zt("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(b)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return ei(this._delegate,function Pa(m){return Ko.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return ei(this._delegate,wu(this._delegate,f))}signInWithCustomToken(f){return ei(this._delegate,function Xc(m,h){return Qo.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,v){return ei(this._delegate,function Kp(m,h,f){return wu((0,O.m9)(m),Wo.credential(h,f))}(this._delegate,f,v))}signInWithEmailLink(f,v){return ei(this._delegate,function Ll(m,h,f){return ja.apply(this,arguments)}(this._delegate,f,v))}signInWithPhoneNumber(f,v){return Or(this._delegate,function Ou(m,h,f){return ki.apply(this,arguments)}(this._delegate,f,v))}signInWithPopup(f){var v=this;return(0,_.Z)(function*(){return Li(of(),v._delegate,"operation-not-supported-in-this-environment"),ei(v._delegate,function ne(m,h,f){return Me.apply(this,arguments)}(v._delegate,f,as))})()}signInWithRedirect(f){var v=this;return(0,_.Z)(function*(){return Li(of(),v._delegate,"operation-not-supported-in-this-environment"),yield ic(v._delegate),function dd(m,h,f){return function hd(m,h,f){return Uh.apply(this,arguments)}(m,h,f)}(v._delegate,f,as)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Fl(m,h){return Ua.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=Fi,m})();function So(m,h,f){let v=m;"function"!=typeof m&&({next:v,error:h,complete:f}=m);const b=v;return{next:j=>b(j&&to.getOrCreate(j)),error:h,complete:f}}function Qu(m,h){const f=function sc(m,h){const f=Yu();if(!f)return[];const v=Lt(ua,m,h);switch(f.getItem(v)){case Fi.NONE:return[Ar];case Fi.LOCAL:return[es,ln];case Fi.SESSION:return[ln];default:return[]}}(m,h);if("undefined"!=typeof self&&!f.includes(es)&&f.push(es),"undefined"!=typeof window)for(const v of[Er,ln])f.includes(v)||f.push(v);return f.includes(Ar)||f.push(Ar),f}class us{constructor(){this.providerId="phone",this._delegate=new Js(Dd(J.Z.auth()))}static credential(h,f){return Js.credential(h,f)}verifyPhoneNumber(h,f){return this._delegate.verifyPhoneNumber(h,f)}unwrap(){return this._delegate}}us.PHONE_SIGN_IN_METHOD=Js.PHONE_SIGN_IN_METHOD,us.PROVIDER_ID=Js.PROVIDER_ID;const ty=Ne;class ny{constructor(h,f,v=J.Z.app()){var b;ty(null===(b=v.options)||void 0===b?void 0:b.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Vh(h,f,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ry(m){m.INTERNAL.registerComponent(new le.wA("auth-compat",h=>{const f=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new la(f,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Wo,FacebookAuthProvider:qo,GithubAuthProvider:Sr,GoogleAuthProvider:Yi,OAuthProvider:ws,SAMLAuthProvider:xr,PhoneAuthProvider:us,PhoneMultiFactorGenerator:Ed,RecaptchaVerifier:ny,TwitterAuthProvider:Gs,Auth:la,AuthCredential:Ta,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.2.9")}(J.Z)},2940:function(at,Se){!function(L){"use strict";function _(K){return Array.prototype.slice.call(K)}function J(K){return new Promise(function(re,he){K.onsuccess=function(){re(K.result)},K.onerror=function(){he(K.error)}})}function O(K,re,he){var De,_e=new Promise(function($e,Ae){J(De=K[re].apply(K,he)).then($e,Ae)});return _e.request=De,_e}function se(K,re,he){var De=O(K,re,he);return De.then(function(_e){if(_e)return new $(_e,De.request)})}function ie(K,re,he){he.forEach(function(De){Object.defineProperty(K.prototype,De,{get:function(){return this[re][De]},set:function(_e){this[re][De]=_e}})})}function ge(K,re,he,De){De.forEach(function(_e){_e in he.prototype&&(K.prototype[_e]=function(){return O(this[re],_e,arguments)})})}function ae(K,re,he,De){De.forEach(function(_e){_e in he.prototype&&(K.prototype[_e]=function(){return this[re][_e].apply(this[re],arguments)})})}function ce(K,re,he,De){De.forEach(function(_e){_e in he.prototype&&(K.prototype[_e]=function(){return se(this[re],_e,arguments)})})}function Ee(K){this._index=K}function $(K,re){this._cursor=K,this._request=re}function G(K){this._store=K}function X(K){this._tx=K,this.complete=new Promise(function(re,he){K.oncomplete=function(){re()},K.onerror=function(){he(K.error)},K.onabort=function(){he(K.error)}})}function ze(K,re,he){this._db=K,this.oldVersion=re,this.transaction=new X(he)}function Oe(K){this._db=K}ie(Ee,"_index",["name","keyPath","multiEntry","unique"]),ge(Ee,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ce(Ee,"_index",IDBIndex,["openCursor","openKeyCursor"]),ie($,"_cursor",["direction","key","primaryKey","value"]),ge($,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(K){K in IDBCursor.prototype&&($.prototype[K]=function(){var re=this,he=arguments;return Promise.resolve().then(function(){return re._cursor[K].apply(re._cursor,he),J(re._request).then(function(De){if(De)return new $(De,re._request)})})})}),G.prototype.createIndex=function(){return new Ee(this._store.createIndex.apply(this._store,arguments))},G.prototype.index=function(){return new Ee(this._store.index.apply(this._store,arguments))},ie(G,"_store",["name","keyPath","indexNames","autoIncrement"]),ge(G,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ce(G,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ae(G,"_store",IDBObjectStore,["deleteIndex"]),X.prototype.objectStore=function(){return new G(this._tx.objectStore.apply(this._tx,arguments))},ie(X,"_tx",["objectStoreNames","mode"]),ae(X,"_tx",IDBTransaction,["abort"]),ze.prototype.createObjectStore=function(){return new G(this._db.createObjectStore.apply(this._db,arguments))},ie(ze,"_db",["name","version","objectStoreNames"]),ae(ze,"_db",IDBDatabase,["deleteObjectStore","close"]),Oe.prototype.transaction=function(){return new X(this._db.transaction.apply(this._db,arguments))},ie(Oe,"_db",["name","version","objectStoreNames"]),ae(Oe,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(K){[G,Ee].forEach(function(re){K in re.prototype&&(re.prototype[K.replace("open","iterate")]=function(){var he=_(arguments),De=he[he.length-1],_e=this._store||this._index,$e=_e[K].apply(_e,he.slice(0,-1));$e.onsuccess=function(){De($e.result)}})})}),[Ee,G].forEach(function(K){K.prototype.getAll||(K.prototype.getAll=function(re,he){var De=this,_e=[];return new Promise(function($e){De.iterateCursor(re,function(Ae){Ae?(_e.push(Ae.value),void 0===he||_e.length!=he?Ae.continue():$e(_e)):$e(_e)})})})}),L.openDb=function Le(K,re,he){var De=O(indexedDB,"open",[K,re]),_e=De.request;return _e&&(_e.onupgradeneeded=function($e){he&&he(new ze(_e.result,$e.oldVersion,_e.transaction))}),De.then(function($e){return new Oe($e)})},L.deleteDb=function He(K){return O(indexedDB,"deleteDatabase",[K])},Object.defineProperty(L,"__esModule",{value:!0})}(Se)},8306:(at,Se,L)=>{"use strict";L.d(Se,{y:()=>$});var _=L(930),J=L(727),O=L(8822),se=L(4671);var ae=L(2416),ce=L(576),Ee=L(2806);let $=(()=>{class Oe{constructor(He){He&&(this._subscribe=He)}lift(He){const K=new Oe;return K.source=this,K.operator=He,K}subscribe(He,K,re){const he=function ze(Oe){return Oe&&Oe instanceof _.Lv||function X(Oe){return Oe&&(0,ce.m)(Oe.next)&&(0,ce.m)(Oe.error)&&(0,ce.m)(Oe.complete)}(Oe)&&(0,J.Nn)(Oe)}(He)?He:new _.Hp(He,K,re);return(0,Ee.x)(()=>{const{operator:De,source:_e}=this;he.add(De?De.call(he,_e):_e?this._subscribe(he):this._trySubscribe(he))}),he}_trySubscribe(He){try{return this._subscribe(He)}catch(K){He.error(K)}}forEach(He,K){return new(K=G(K))((re,he)=>{let De;De=this.subscribe(_e=>{try{He(_e)}catch($e){he($e),null==De||De.unsubscribe()}},he,re)})}_subscribe(He){var K;return null===(K=this.source)||void 0===K?void 0:K.subscribe(He)}[O.L](){return this}pipe(...He){return function ge(Oe){return 0===Oe.length?se.y:1===Oe.length?Oe[0]:function(He){return Oe.reduce((K,re)=>re(K),He)}}(He)(this)}toPromise(He){return new(He=G(He))((K,re)=>{let he;this.subscribe(De=>he=De,De=>re(De),()=>K(he))})}}return Oe.create=Le=>new Oe(Le),Oe})();function G(Oe){var Le;return null!==(Le=null!=Oe?Oe:ae.v.Promise)&&void 0!==Le?Le:Promise}},7579:(at,Se,L)=>{"use strict";L.d(Se,{x:()=>ae});var _=L(8306),J=L(727);const se=(0,L(3888).d)(Ee=>function(){Ee(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=L(8737),ge=L(2806);let ae=(()=>{class Ee extends _.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const X=new ce(this,this);return X.operator=G,X}_throwIfClosed(){if(this.closed)throw new se}next(G){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const X=this.observers.slice();for(const ze of X)ze.next(G)}})}error(G){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:X}=this;for(;X.length;)X.shift().error(G)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:X,isStopped:ze,observers:Oe}=this;return X||ze?J.Lc:(Oe.push(G),new J.w0(()=>(0,ie.P)(Oe,G)))}_checkFinalizedStatuses(G){const{hasError:X,thrownError:ze,isStopped:Oe}=this;X?G.error(ze):Oe&&G.complete()}asObservable(){const G=new _.y;return G.source=this,G}}return Ee.create=($,G)=>new ce($,G),Ee})();class ce extends ae{constructor($,G){super(),this.destination=$,this.source=G}next($){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===X||X.call(G,$)}error($){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===X||X.call(G,$)}complete(){var $,G;null===(G=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===G||G.call($)}_subscribe($){var G,X;return null!==(X=null===(G=this.source)||void 0===G?void 0:G.subscribe($))&&void 0!==X?X:J.Lc}}},930:(at,Se,L)=>{"use strict";L.d(Se,{Hp:()=>ze,Lv:()=>X});var _=L(576),J=L(727),O=L(2416),se=L(7849),ie=L(5032);const ge=Ee("C",void 0,void 0);function Ee(re,he,De){return{kind:re,value:he,error:De}}var $=L(3410),G=L(2806);class X extends J.w0{constructor(he){super(),this.isStopped=!1,he?(this.destination=he,(0,J.Nn)(he)&&he.add(this)):this.destination=K}static create(he,De,_e){return new ze(he,De,_e)}next(he){this.isStopped?He(function ce(re){return Ee("N",re,void 0)}(he),this):this._next(he)}error(he){this.isStopped?He(function ae(re){return Ee("E",void 0,re)}(he),this):(this.isStopped=!0,this._error(he))}complete(){this.isStopped?He(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(he){this.destination.next(he)}_error(he){try{this.destination.error(he)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class ze extends X{constructor(he,De,_e){let $e;if(super(),(0,_.m)(he))$e=he;else if(he){let Ae;({next:$e,error:De,complete:_e}=he),this&&O.v.useDeprecatedNextContext?(Ae=Object.create(he),Ae.unsubscribe=()=>this.unsubscribe()):Ae=he,$e=null==$e?void 0:$e.bind(Ae),De=null==De?void 0:De.bind(Ae),_e=null==_e?void 0:_e.bind(Ae)}this.destination={next:$e?Oe($e):ie.Z,error:Oe(null!=De?De:Le),complete:_e?Oe(_e):ie.Z}}}function Oe(re,he){return(...De)=>{try{re(...De)}catch(_e){O.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(_e):(0,se.h)(_e)}}}function Le(re){throw re}function He(re,he){const{onStoppedNotification:De}=O.v;De&&$.z.setTimeout(()=>De(re,he))}const K={closed:!0,next:ie.Z,error:Le,complete:ie.Z}},727:(at,Se,L)=>{"use strict";L.d(Se,{Lc:()=>ge,w0:()=>ie,Nn:()=>ae});var _=L(576);const O=(0,L(3888).d)(Ee=>function(G){Ee(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((X,ze)=>`${ze+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var se=L(8737);class ie{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Oe of G)Oe.remove(this);else G.remove(this);const{initialTeardown:X}=this;if((0,_.m)(X))try{X()}catch(Oe){$=Oe instanceof O?Oe.errors:[Oe]}const{_teardowns:ze}=this;if(ze){this._teardowns=null;for(const Oe of ze)try{ce(Oe)}catch(Le){$=null!=$?$:[],Le instanceof O?$=[...$,...Le.errors]:$.push(Le)}}if($)throw new O($)}}add($){var G;if($&&$!==this)if(this.closed)ce($);else{if($ instanceof ie){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._teardowns=null!==(G=this._teardowns)&&void 0!==G?G:[]).push($)}}_hasParent($){const{_parentage:G}=this;return G===$||Array.isArray(G)&&G.includes($)}_addParent($){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push($),G):G?[G,$]:$}_removeParent($){const{_parentage:G}=this;G===$?this._parentage=null:Array.isArray(G)&&(0,se.P)(G,$)}remove($){const{_teardowns:G}=this;G&&(0,se.P)(G,$),$ instanceof ie&&$._removeParent(this)}}ie.EMPTY=(()=>{const Ee=new ie;return Ee.closed=!0,Ee})();const ge=ie.EMPTY;function ae(Ee){return Ee instanceof ie||Ee&&"closed"in Ee&&(0,_.m)(Ee.remove)&&(0,_.m)(Ee.add)&&(0,_.m)(Ee.unsubscribe)}function ce(Ee){(0,_.m)(Ee)?Ee():Ee.unsubscribe()}},2416:(at,Se,L)=>{"use strict";L.d(Se,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,Se,L)=>{"use strict";L.d(Se,{E:()=>J});const J=new(L(8306).y)(ie=>ie.complete())},8996:(at,Se,L)=>{"use strict";L.d(Se,{D:()=>$e});var _=L(8421),J=L(5363),O=L(9468),ge=L(8306),ce=L(2202),Ee=L(576),$=L(9672);function X(Ae,ot){if(!Ae)throw new Error("Iterable cannot be null");return new ge.y(Qe=>{(0,$.f)(Qe,ot,()=>{const mt=Ae[Symbol.asyncIterator]();(0,$.f)(Qe,ot,()=>{mt.next().then(Q=>{Q.done?Qe.complete():Qe.next(Q.value)})},0,!0)})})}var ze=L(3670),Oe=L(8239),Le=L(1144),He=L(6495),K=L(2206),re=L(4532),he=L(3260);function $e(Ae,ot){return ot?function _e(Ae,ot){if(null!=Ae){if((0,ze.c)(Ae))return function se(Ae,ot){return(0,_.Xf)(Ae).pipe((0,O.R)(ot),(0,J.Q)(ot))}(Ae,ot);if((0,Le.z)(Ae))return function ae(Ae,ot){return new ge.y(Qe=>{let mt=0;return ot.schedule(function(){mt===Ae.length?Qe.complete():(Qe.next(Ae[mt++]),Qe.closed||this.schedule())})})}(Ae,ot);if((0,Oe.t)(Ae))return function ie(Ae,ot){return(0,_.Xf)(Ae).pipe((0,O.R)(ot),(0,J.Q)(ot))}(Ae,ot);if((0,K.D)(Ae))return X(Ae,ot);if((0,He.T)(Ae))return function G(Ae,ot){return new ge.y(Qe=>{let mt;return(0,$.f)(Qe,ot,()=>{mt=Ae[ce.h](),(0,$.f)(Qe,ot,()=>{let Q,oe;try{({value:Q,done:oe}=mt.next())}catch(ye){return void Qe.error(ye)}oe?Qe.complete():Qe.next(Q)},0,!0)}),()=>(0,Ee.m)(null==mt?void 0:mt.return)&&mt.return()})}(Ae,ot);if((0,he.L)(Ae))return function De(Ae,ot){return X((0,he.Q)(Ae),ot)}(Ae,ot)}throw(0,re.z)(Ae)}(Ae,ot):(0,_.Xf)(Ae)}},8421:(at,Se,L)=>{"use strict";L.d(Se,{Xf:()=>ze});var _=L(5987),J=L(1144),O=L(8239),se=L(8306),ie=L(3670),ge=L(2206),ae=L(4532),ce=L(6495),Ee=L(3260),$=L(576),G=L(7849),X=L(8822);function ze(_e){if(_e instanceof se.y)return _e;if(null!=_e){if((0,ie.c)(_e))return function Oe(_e){return new se.y($e=>{const Ae=_e[X.L]();if((0,$.m)(Ae.subscribe))return Ae.subscribe($e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(_e);if((0,J.z)(_e))return function Le(_e){return new se.y($e=>{for(let Ae=0;Ae<_e.length&&!$e.closed;Ae++)$e.next(_e[Ae]);$e.complete()})}(_e);if((0,O.t)(_e))return function He(_e){return new se.y($e=>{_e.then(Ae=>{$e.closed||($e.next(Ae),$e.complete())},Ae=>$e.error(Ae)).then(null,G.h)})}(_e);if((0,ge.D)(_e))return re(_e);if((0,ce.T)(_e))return function K(_e){return new se.y($e=>{for(const Ae of _e)if($e.next(Ae),$e.closed)return;$e.complete()})}(_e);if((0,Ee.L)(_e))return function he(_e){return re((0,Ee.Q)(_e))}(_e)}throw(0,ae.z)(_e)}function re(_e){return new se.y($e=>{(function De(_e,$e){var Ae,ot,Qe,mt;return(0,_.mG)(this,void 0,void 0,function*(){try{for(Ae=(0,_.KL)(_e);!(ot=yield Ae.next()).done;)if($e.next(ot.value),$e.closed)return}catch(Q){Qe={error:Q}}finally{try{ot&&!ot.done&&(mt=Ae.return)&&(yield mt.call(Ae))}finally{if(Qe)throw Qe.error}}$e.complete()})})(_e,$e).catch(Ae=>$e.error(Ae))})}},6451:(at,Se,L)=>{"use strict";L.d(Se,{T:()=>ge});var _=L(6131),J=L(8421),O=L(515),se=L(7669),ie=L(8996);function ge(...ae){const ce=(0,se.yG)(ae),Ee=(0,se._6)(ae,1/0),$=ae;return $.length?1===$.length?(0,J.Xf)($[0]):(0,_.J)(Ee)((0,ie.D)($,ce)):O.E}},5403:(at,Se,L)=>{"use strict";L.d(Se,{Q:()=>J});var _=L(930);class J extends _.Lv{constructor(se,ie,ge,ae,ce){super(se),this.onFinalize=ce,this._next=ie?function(Ee){try{ie(Ee)}catch($){se.error($)}}:super._next,this._error=ae?function(Ee){try{ae(Ee)}catch($){se.error($)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(Ee){se.error(Ee)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;const{closed:ie}=this;super.unsubscribe(),!ie&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}},4004:(at,Se,L)=>{"use strict";L.d(Se,{U:()=>O});var _=L(4482),J=L(5403);function O(se,ie){return(0,_.e)((ge,ae)=>{let ce=0;ge.subscribe(new J.Q(ae,Ee=>{ae.next(se.call(ie,Ee,ce++))}))})}},6131:(at,Se,L)=>{"use strict";L.d(Se,{J:()=>$});var _=L(4004),J=L(8421),O=L(4482),se=L(9672),ie=L(5403),ae=L(576);function ce(G,X,ze=1/0){return(0,ae.m)(X)?ce((Oe,Le)=>(0,_.U)((He,K)=>X(Oe,He,Le,K))((0,J.Xf)(G(Oe,Le))),ze):("number"==typeof X&&(ze=X),(0,O.e)((Oe,Le)=>function ge(G,X,ze,Oe,Le,He,K,re){const he=[];let De=0,_e=0,$e=!1;const Ae=()=>{$e&&!he.length&&!De&&X.complete()},ot=mt=>De<Oe?Qe(mt):he.push(mt),Qe=mt=>{He&&X.next(mt),De++;let Q=!1;(0,J.Xf)(ze(mt,_e++)).subscribe(new ie.Q(X,oe=>{null==Le||Le(oe),He?ot(oe):X.next(oe)},()=>{Q=!0},void 0,()=>{if(Q)try{for(De--;he.length&&De<Oe;){const oe=he.shift();K?(0,se.f)(X,K,()=>Qe(oe)):Qe(oe)}Ae()}catch(oe){X.error(oe)}}))};return G.subscribe(new ie.Q(X,ot,()=>{$e=!0,Ae()})),()=>{null==re||re()}}(Oe,Le,G,ze)))}var Ee=L(4671);function $(G=1/0){return ce(Ee.y,G)}},5363:(at,Se,L)=>{"use strict";L.d(Se,{Q:()=>se});var _=L(9672),J=L(4482),O=L(5403);function se(ie,ge=0){return(0,J.e)((ae,ce)=>{ae.subscribe(new O.Q(ce,Ee=>(0,_.f)(ce,ie,()=>ce.next(Ee),ge),()=>(0,_.f)(ce,ie,()=>ce.complete(),ge),Ee=>(0,_.f)(ce,ie,()=>ce.error(Ee),ge)))})}},3099:(at,Se,L)=>{"use strict";L.d(Se,{B:()=>ge});var _=L(8996),J=L(5698),O=L(7579),se=L(930),ie=L(4482);function ge(ce={}){const{connector:Ee=(()=>new O.x),resetOnError:$=!0,resetOnComplete:G=!0,resetOnRefCountZero:X=!0}=ce;return ze=>{let Oe=null,Le=null,He=null,K=0,re=!1,he=!1;const De=()=>{null==Le||Le.unsubscribe(),Le=null},_e=()=>{De(),Oe=He=null,re=he=!1},$e=()=>{const Ae=Oe;_e(),null==Ae||Ae.unsubscribe()};return(0,ie.e)((Ae,ot)=>{K++,!he&&!re&&De();const Qe=He=null!=He?He:Ee();ot.add(()=>{K--,0===K&&!he&&!re&&(Le=ae($e,X))}),Qe.subscribe(ot),Oe||(Oe=new se.Hp({next:mt=>Qe.next(mt),error:mt=>{he=!0,De(),Le=ae(_e,$,mt),Qe.error(mt)},complete:()=>{re=!0,De(),Le=ae(_e,G),Qe.complete()}}),(0,_.D)(Ae).subscribe(Oe))})(ze)}}function ae(ce,Ee,...$){return!0===Ee?(ce(),null):!1===Ee?null:Ee(...$).pipe((0,J.q)(1)).subscribe(()=>ce())}},9468:(at,Se,L)=>{"use strict";L.d(Se,{R:()=>J});var _=L(4482);function J(O,se=0){return(0,_.e)((ie,ge)=>{ge.add(O.schedule(()=>ie.subscribe(ge),se))})}},5698:(at,Se,L)=>{"use strict";L.d(Se,{q:()=>se});var _=L(515),J=L(4482),O=L(5403);function se(ie){return ie<=0?()=>_.E:(0,J.e)((ge,ae)=>{let ce=0;ge.subscribe(new O.Q(ae,Ee=>{++ce<=ie&&(ae.next(Ee),ie<=ce&&ae.complete())}))})}},4408:(at,Se,L)=>{"use strict";L.d(Se,{o:()=>ie});var _=L(727);class J extends _.w0{constructor(ae,ce){super()}schedule(ae,ce=0){return this}}const O={setInterval(...ge){const{delegate:ae}=O;return((null==ae?void 0:ae.setInterval)||setInterval)(...ge)},clearInterval(ge){const{delegate:ae}=O;return((null==ae?void 0:ae.clearInterval)||clearInterval)(ge)},delegate:void 0};var se=L(8737);class ie extends J{constructor(ae,ce){super(ae,ce),this.scheduler=ae,this.work=ce,this.pending=!1}schedule(ae,ce=0){if(this.closed)return this;this.state=ae;const Ee=this.id,$=this.scheduler;return null!=Ee&&(this.id=this.recycleAsyncId($,Ee,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId($,this.id,ce),this}requestAsyncId(ae,ce,Ee=0){return O.setInterval(ae.flush.bind(ae,this),Ee)}recycleAsyncId(ae,ce,Ee=0){if(null!=Ee&&this.delay===Ee&&!1===this.pending)return ce;O.clearInterval(ce)}execute(ae,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ee=this._execute(ae,ce);if(Ee)return Ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,ce){let $,Ee=!1;try{this.work(ae)}catch(G){Ee=!0,$=G||new Error("Scheduled action threw falsy error")}if(Ee)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ae,scheduler:ce}=this,{actions:Ee}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(Ee,this),null!=ae&&(this.id=this.recycleAsyncId(ce,ae,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,Se,L)=>{"use strict";L.d(Se,{v:()=>O});var _=L(6063);class J{constructor(ie,ge=J.now){this.schedulerActionCtor=ie,this.now=ge}schedule(ie,ge=0,ae){return new this.schedulerActionCtor(this,ie).schedule(ae,ge)}}J.now=_.l.now;class O extends J{constructor(ie,ge=J.now){super(ie,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ie){const{actions:ge}=this;if(this._active)return void ge.push(ie);let ae;this._active=!0;do{if(ae=ie.execute(ie.state,ie.delay))break}while(ie=ge.shift());if(this._active=!1,ae){for(;ie=ge.shift();)ie.unsubscribe();throw ae}}}},4986:(at,Se,L)=>{"use strict";L.d(Se,{z:()=>O});var _=L(4408);const O=new(L(7565).v)(_.o)},6063:(at,Se,L)=>{"use strict";L.d(Se,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(at,Se,L)=>{"use strict";L.d(Se,{z:()=>_});const _={setTimeout(...J){const{delegate:O}=_;return((null==O?void 0:O.setTimeout)||setTimeout)(...J)},clearTimeout(J){const{delegate:O}=_;return((null==O?void 0:O.clearTimeout)||clearTimeout)(J)},delegate:void 0}},2202:(at,Se,L)=>{"use strict";L.d(Se,{h:()=>J});const J=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,Se,L)=>{"use strict";L.d(Se,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(at,Se,L)=>{"use strict";L.d(Se,{_6:()=>ge,jO:()=>se,yG:()=>ie});var _=L(576);function O(ae){return ae[ae.length-1]}function se(ae){return(0,_.m)(O(ae))?ae.pop():void 0}function ie(ae){return function J(ae){return ae&&(0,_.m)(ae.schedule)}(O(ae))?ae.pop():void 0}function ge(ae,ce){return"number"==typeof O(ae)?ae.pop():ce}},8737:(at,Se,L)=>{"use strict";function _(J,O){if(J){const se=J.indexOf(O);0<=se&&J.splice(se,1)}}L.d(Se,{P:()=>_})},3888:(at,Se,L)=>{"use strict";function _(J){const se=J(ie=>{Error.call(ie),ie.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}L.d(Se,{d:()=>_})},2806:(at,Se,L)=>{"use strict";L.d(Se,{x:()=>O,O:()=>se});var _=L(2416);let J=null;function O(ie){if(_.v.useDeprecatedSynchronousErrorHandling){const ge=!J;if(ge&&(J={errorThrown:!1,error:null}),ie(),ge){const{errorThrown:ae,error:ce}=J;if(J=null,ae)throw ce}}else ie()}function se(ie){_.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=ie)}},9672:(at,Se,L)=>{"use strict";function _(J,O,se,ie=0,ge=!1){const ae=O.schedule(function(){se(),ge?J.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(J.add(ae),!ge)return ae}L.d(Se,{f:()=>_})},4671:(at,Se,L)=>{"use strict";function _(J){return J}L.d(Se,{y:()=>_})},1144:(at,Se,L)=>{"use strict";L.d(Se,{z:()=>_});const _=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(at,Se,L)=>{"use strict";L.d(Se,{D:()=>J});var _=L(576);function J(O){return Symbol.asyncIterator&&(0,_.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(at,Se,L)=>{"use strict";function _(J){return"function"==typeof J}L.d(Se,{m:()=>_})},3670:(at,Se,L)=>{"use strict";L.d(Se,{c:()=>O});var _=L(8822),J=L(576);function O(se){return(0,J.m)(se[_.L])}},6495:(at,Se,L)=>{"use strict";L.d(Se,{T:()=>O});var _=L(2202),J=L(576);function O(se){return(0,J.m)(null==se?void 0:se[_.h])}},8239:(at,Se,L)=>{"use strict";L.d(Se,{t:()=>J});var _=L(576);function J(O){return(0,_.m)(null==O?void 0:O.then)}},3260:(at,Se,L)=>{"use strict";L.d(Se,{Q:()=>O,L:()=>se});var _=L(5987),J=L(576);function O(ie){return(0,_.FC)(this,arguments,function*(){const ae=ie.getReader();try{for(;;){const{value:ce,done:Ee}=yield(0,_.qq)(ae.read());if(Ee)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(ce)}}finally{ae.releaseLock()}})}function se(ie){return(0,J.m)(null==ie?void 0:ie.getReader)}},4482:(at,Se,L)=>{"use strict";L.d(Se,{e:()=>O});var _=L(576);function O(se){return ie=>{if(function J(se){return(0,_.m)(null==se?void 0:se.lift)}(ie))return ie.lift(function(ge){try{return se(ge,this)}catch(ae){this.error(ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(at,Se,L)=>{"use strict";function _(){}L.d(Se,{Z:()=>_})},7849:(at,Se,L)=>{"use strict";L.d(Se,{h:()=>O});var _=L(2416),J=L(3410);function O(se){J.z.setTimeout(()=>{const{onUnhandledError:ie}=_.v;if(!ie)throw se;ie(se)})}},4532:(at,Se,L)=>{"use strict";function _(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Se,{z:()=>_})},5987:(at,Se,L)=>{"use strict";function ce(Q,oe,ye,Ce){return new(ye||(ye=Promise))(function(le,Tt){function Ft(ht){try{rt(Ce.next(ht))}catch(Yn){Tt(Yn)}}function gr(ht){try{rt(Ce.throw(ht))}catch(Yn){Tt(Yn)}}function rt(ht){ht.done?le(ht.value):function ke(le){return le instanceof ye?le:new ye(function(Tt){Tt(le)})}(ht.value).then(Ft,gr)}rt((Ce=Ce.apply(Q,oe||[])).next())})}function K(Q){return this instanceof K?(this.v=Q,this):new K(Q)}function re(Q,oe,ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,Ce=ye.apply(Q,oe||[]),le=[];return ke={},Tt("next"),Tt("throw"),Tt("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function Tt(Gt){Ce[Gt]&&(ke[Gt]=function(ur){return new Promise(function(en,Hr){le.push([Gt,ur,en,Hr])>1||Ft(Gt,ur)})})}function Ft(Gt,ur){try{!function gr(Gt){Gt.value instanceof K?Promise.resolve(Gt.value.v).then(rt,ht):Yn(le[0][2],Gt)}(Ce[Gt](ur))}catch(en){Yn(le[0][3],en)}}function rt(Gt){Ft("next",Gt)}function ht(Gt){Ft("throw",Gt)}function Yn(Gt,ur){Gt(ur),le.shift(),le.length&&Ft(le[0][0],le[0][1])}}function De(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,oe=Q[Symbol.asyncIterator];return oe?oe.call(Q):(Q=function X(Q){var oe="function"==typeof Symbol&&Symbol.iterator,ye=oe&&Q[oe],Ce=0;if(ye)return ye.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&Ce>=Q.length&&(Q=void 0),{value:Q&&Q[Ce++],done:!Q}}};throw new TypeError(oe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),ye={},Ce("next"),Ce("throw"),Ce("return"),ye[Symbol.asyncIterator]=function(){return this},ye);function Ce(le){ye[le]=Q[le]&&function(Tt){return new Promise(function(Ft,gr){!function ke(le,Tt,Ft,gr){Promise.resolve(gr).then(function(rt){le({value:rt,done:Ft})},Tt)}(Ft,gr,(Tt=Q[le](Tt)).done,Tt.value)})}}}L.d(Se,{mG:()=>ce,qq:()=>K,FC:()=>re,KL:()=>De})},5e3:(at,Se,L)=>{"use strict";L.d(Se,{AFp:()=>oh,ip1:()=>Zv,CZH:()=>ir,hGG:()=>hh,sBO:()=>Xm,_Vd:()=>Ic,EJc:()=>Km,SBq:()=>Dc,qLn:()=>Ao,vpe:()=>_a,OlP:()=>nn,zs3:()=>Vi,ZZ4:()=>Nc,aQg:()=>vl,soG:()=>ah,h0i:()=>rh,R0b:()=>ji,FiY:()=>gt,Lbi:()=>rp,g9A:()=>aC,Qsj:()=>zf,FYo:()=>Dm,JOm:()=>os,Rgc:()=>Qf,dDg:()=>dC,q4F:()=>Tm,GfV:()=>wI,s_b:()=>km,ifc:()=>Rt,eFA:()=>uh,G48:()=>pC,Gpc:()=>G,X6Q:()=>up,_c5:()=>DA,VLi:()=>dA,zSh:()=>Rd,wAp:()=>_t,vHH:()=>Le,cg1:()=>pm,kL8:()=>Zd,dqk:()=>ut,sIi:()=>Rf,CqO:()=>ai,QGY:()=>Yy,F4k:()=>fw,RDi:()=>Yc,AaK:()=>ce,qOj:()=>Hy,TTD:()=>xa,_Bn:()=>mI,xp6:()=>mf,uIk:()=>$y,ekj:()=>tm,Xpm:()=>Ue,lG2:()=>fu,Yz7:()=>en,cJS:()=>vi,oAB:()=>Qn,Yjl:()=>co,Y36:()=>zg,_UZ:()=>Kg,qZA:()=>Wd,TgZ:()=>ks,EpF:()=>hw,n5z:()=>Sn,LFG:()=>D,$8M:()=>ta,NdJ:()=>qd,oxw:()=>Yg,Q6J:()=>zy,CHM:()=>yu,LSH:()=>qu,YNc:()=>X0,_uU:()=>cv,hij:()=>Uf});var _=L(7579),J=L(727),O=L(8306),se=L(6451),ie=L(3099);function ge(i){for(let s in i)if(i[s]===ge)return s;throw Error("Could not find renamed property on target object.")}function ae(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function Ee(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const $=ge({__forward_ref__:ge});function G(i){return i.__forward_ref__=G,i.toString=function(){return ce(this())},i}function X(i){return ze(i)?i():i}function ze(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===G}class Le extends Error{constructor(s,a){super(function He(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function K(i){return"string"==typeof i?i:null==i?"":String(i)}function re(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():K(i)}function $e(i,s){const a=s?` in ${s}`:"";throw new Le(-201,`No provider for ${re(i)} found${a}`)}function rt(i,s){null==i&&function ht(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function en(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function vi(i){return{providers:i.providers||[],imports:i.imports||[]}}function Dn(i){return Ei(i,Gr)||Ei(i,Ne)}function Ei(i,s){return i.hasOwnProperty(s)?i[s]:null}function uo(i){return i&&(i.hasOwnProperty(ys)||i.hasOwnProperty(lr))?i[ys]:null}const Gr=ge({\u0275prov:ge}),ys=ge({\u0275inj:ge}),Ne=ge({ngInjectableDef:ge}),lr=ge({ngInjectorDef:ge});var it=(()=>((it=it||{})[it.Default=0]="Default",it[it.Host=1]="Host",it[it.Self=2]="Self",it[it.SkipSelf=4]="SkipSelf",it[it.Optional=8]="Optional",it))();let wi;function Bn(i){const s=wi;return wi=i,s}function Bs(i,s,a){const l=Dn(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&it.Optional?null:void 0!==s?s:void $e(ce(i),"Injector")}function _r(i){return{toString:i}.toString()}var fn=(()=>((fn=fn||{})[fn.OnPush=0]="OnPush",fn[fn.Default=1]="Default",fn))(),Rt=(()=>{return(i=Rt||(Rt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Rt;var i})();const st="undefined"!=typeof globalThis&&globalThis,pt="undefined"!=typeof window&&window,lo="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ut=st||"undefined"!=typeof global&&global||pt||lo,Ii={},B=[],H=ge({\u0275cmp:ge}),W=ge({\u0275dir:ge}),ve=ge({\u0275pipe:ge}),ee=ge({\u0275mod:ge}),Ge=ge({\u0275fac:ge}),Ie=ge({__NG_ELEMENT_ID__:ge});let me=0;function Ue(i){return _r(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===fn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||B,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Rt.Emulated,id:"c",styles:i.styles||B,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,p=i.features,y=i.pipes;return l.id+=me++,l.inputs=Uo(i.inputs,a),l.outputs=Uo(i.outputs),p&&p.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(It):null,l.pipeDefs=y?()=>("function"==typeof y?y():y).map(ct):null,l})}function It(i){return Jn(i)||function Un(i){return i[W]||null}(i)}function ct(i){return function qi(i){return i[ve]||null}(i)}const tn={};function Qn(i){return _r(()=>{const s={type:i.type,bootstrap:i.bootstrap||B,declarations:i.declarations||B,imports:i.imports||B,exports:i.exports||B,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(tn[i.id]=i.type),s})}function Uo(i,s){if(null==i)return Ii;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=l,s&&(s[d]=p)}return a}const fu=Ue;function co(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Jn(i){return i[H]||null}function Xn(i,s){const a=i[ee]||null;if(!a&&!0===s)throw new Error(`Type ${ce(i)} does not have '\u0275mod' property.`);return a}function bi(i){return Array.isArray(i)&&"object"==typeof i[1]}function Ti(i){return Array.isArray(i)&&!0===i[1]}function Bc(i){return 0!=(8&i.flags)}function Mn(i){return 2==(2&i.flags)}function Es(i){return 1==(1&i.flags)}function Zi(i){return null!==i.template}function Uc(i){return 0!=(512&i[2])}function go(i,s){return i.hasOwnProperty(Ge)?i[Ge]:null}class pu{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function xa(){return mo}function mo(i){return i.type.prototype.ngOnChanges&&(i.setInput=js),Ma}function Ma(){const i=Kc(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===Ii)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function js(i,s,a,l){const d=Kc(i)||function vr(i,s){return i[gu]=s}(i,{previous:Ii,current:null}),p=d.current||(d.current={}),y=d.previous,w=this.declaredInputs[a],C=y[w];p[w]=new pu(C&&C.currentValue,s,y===Ii),i[l]=s}xa.ngInherit=!0;const gu="__ngSimpleChanges__";function Kc(i){return i[gu]||null}let mu;function Yc(i){mu=i}function $t(i){return!!i.listen}const Hs={createRenderer:(i,s)=>function Qc(){return void 0!==mu?mu:"undefined"!=typeof document?document:void 0}()};function on(i){for(;Array.isArray(i);)i=i[0];return i}function $n(i,s){return on(s[i])}function Nn(i,s){return on(s[i.index])}function qo(i,s){return i.data[s]}function Sr(i,s){const a=s[i];return bi(a)?a:a[0]}function Qi(i){return 128==(128&i[2])}function xr(i,s){return null==s?null:i[s]}function Gs(i){i[18]=0}function zo(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const ft={lFrame:Ba(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Zo(){return ft.bindingsEnabled}function xe(){return ft.lFrame.lView}function St(){return ft.lFrame.tView}function yu(i){return ft.lFrame.contextLView=i,i[8]}function an(){let i=_o();for(;null!==i&&64===i.type;)i=i.parent;return i}function _o(){return ft.lFrame.currentTNode}function zr(i,s){const a=ft.lFrame;a.currentTNode=i,a.isParent=s}function Is(){return ft.lFrame.isParent}function Yo(){return ft.isInCheckNoChangesMode}function Oa(i){ft.isInCheckNoChangesMode=i}function Cs(){return ft.lFrame.bindingIndex++}function Cu(i,s){const a=ft.lFrame;a.bindingIndex=a.bindingRootIndex=i,Jo(s)}function Jo(i){ft.lFrame.currentDirectiveIndex=i}function Va(i){ft.lFrame.currentQueryIndex=i}function Ol(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function kl(i,s,a){if(a&it.SkipSelf){let d=s,p=i;for(;!(d=d.parent,null!==d||a&it.Host||(d=Ol(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;s=d,i=p}const l=ft.lFrame=ed();return l.currentTNode=s,l.lView=i,!0}function Xo(i){const s=ed(),a=i[1];ft.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function ed(){const i=ft.lFrame,s=null===i?null:i.child;return null===s?Ba(i):s}function Ba(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Fl(){const i=ft.lFrame;return ft.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Ua=Fl;function Du(){const i=Fl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function tr(){return ft.lFrame.selectedIndex}function Rn(i){ft.lFrame.selectedIndex=i}function yn(){const i=ft.lFrame;return qo(i.tView,i.selectedIndex)}function Vl(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:N}=p;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),C&&(i.viewHooks||(i.viewHooks=[])).push(-a,C),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=N&&(i.destroyHooks||(i.destroyHooks=[])).push(a,N)}}function Ws(i,s,a){Oh(i,s,3,a)}function bu(i,s,a,l){(3&i[2])===a&&Oh(i,s,a,l)}function Tu(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Oh(i,s,a,l){const p=null!=l?l:-1,y=s.length-1;let w=0;for(let C=void 0!==l?65535&i[18]:0;C<y;C++)if("number"==typeof s[C+1]){if(w=s[C],null!=l&&w>=l)break}else s[C]<0&&(i[18]+=65536),(w<p||-1==p)&&(rd(i,a,s,C),i[18]=(4294901760&i[18])+C+2),C++}function rd(i,s,a,l){const d=a[l]<0,p=a[l+1],w=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class vn{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Bl(i,s,a){const l=$t(i);let d=0;for(;d<a.length;){const p=a[d];if("number"==typeof p){if(0!==p)break;d++;const y=a[d++],w=a[d++],C=a[d++];l?i.setAttribute(s,w,C,y):s.setAttributeNS(y,w,C)}else{const y=p,w=a[++d];Su(y)?l&&i.setProperty(s,y,w):l?i.setAttribute(s,y,w):s.setAttribute(y,w),d++}}return d}function dr(i){return 3===i||4===i||6===i}function Su(i){return 64===i.charCodeAt(0)}function An(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const d=s[l];"number"==typeof d?a=d:0===a||$a(i,a,d,null,-1===a||2===a?s[++l]:null)}}return i}function $a(i,s,a,l,d){let p=0,y=i.length;if(-1===s)y=-1;else for(;p<i.length;){const w=i[p++];if("number"==typeof w){if(w===s){y=-1;break}if(w>s){y=p-1;break}}}for(;p<i.length;){const w=i[p];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(i[p+1]=d));if(l===i[p+1])return void(i[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==y&&(i.splice(y,0,s),p=y+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==d&&i.splice(p++,0,d)}function bs(i){return-1!==i}function Ni(i){return 32767&i}function dn(i,s){let a=function Ul(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let jl=!0;function yo(i){const s=jl;return jl=i,s}let Hl=0;function vo(i,s){const a=qa(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,xu(l.data,i),xu(s,null),xu(l.blueprint,null));const d=qs(i,s),p=i.injectorIndex;if(bs(d)){const y=Ni(d),w=dn(d,s),C=w[1].data;for(let A=0;A<8;A++)s[p+A]=w[y+A]|C[y+A]}return s[p+8]=d,p}function xu(i,s){i.push(0,0,0,0,0,0,0,0,s)}function qa(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function qs(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=s;for(;null!==d;){const p=d[1],y=p.type;if(l=2===y?p.declTNode:1===y?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Mu(i,s,a){!function Wa(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Ie)&&(l=a[Ie]),null==l&&(l=a[Ie]=Hl++);const d=255&l;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function un(i,s,a){if(a&it.Optional)return i;$e(s,"NodeInjector")}function Ts(i,s,a,l){if(a&it.Optional&&void 0===l&&(l=null),0==(a&(it.Self|it.Host))){const d=i[9],p=Bn(void 0);try{return d?d.get(s,l,a&it.Optional):Bs(s,l,a&it.Optional)}finally{Bn(p)}}return un(l,s,a)}function Nu(i,s,a,l=it.Default,d){if(null!==i){const p=function Ru(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Ie)?i[Ie]:void 0;return"number"==typeof s?s>=0?255&s:de:s}(a);if("function"==typeof p){if(!kl(s,i,l))return l&it.Host?un(d,a,l):Ts(s,a,l,d);try{const y=p(l);if(null!=y||l&it.Optional)return y;$e(a)}finally{Ua()}}else if("number"==typeof p){let y=null,w=qa(i,s),C=-1,A=l&it.Host?s[16][6]:null;for((-1===w||l&it.SkipSelf)&&(C=-1===w?qs(i,s):s[w+8],-1!==C&&zs(l,!1)?(y=s[1],w=Ni(C),s=dn(C,s)):w=-1);-1!==w;){const N=s[1];if(od(p,w,N.data)){const k=Er(w,s,a,y,l,A);if(k!==Pi)return k}C=s[w+8],-1!==C&&zs(l,s[1].data[w+8]===A)&&od(p,w,s)?(y=N,w=Ni(C),s=dn(C,s)):w=-1}}}return Ts(s,a,l,d)}const Pi={};function de(){return new Eo(an(),xe())}function Er(i,s,a,l,d,p){const y=s[1],w=y.data[i+8],N=function P(i,s,a,l,d){const p=i.providerIndexes,y=s.data,w=1048575&p,C=i.directiveStart,N=p>>20,U=d?w+N:i.directiveEnd;for(let Z=l?w:w+N;Z<U;Z++){const pe=y[Z];if(Z<C&&a===pe||Z>=C&&pe.type===a)return Z}if(d){const Z=y[C];if(Z&&Zi(Z)&&Z.type===a)return C}return null}(w,y,a,null==l?Mn(w)&&jl:l!=y&&0!=(3&w.type),d&it.Host&&p===w);return null!==N?ln(s,y,N,w):Pi}function ln(i,s,a,l){let d=i[a];const p=s.data;if(function kh(i){return i instanceof vn}(d)){const y=d;y.resolving&&function he(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Le(-200,`Circular dependency in DI detected for ${i}${a}`)}(re(p[a]));const w=yo(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?Bn(y.injectImpl):null;kl(i,l,it.Default);try{d=i[a]=y.factory(void 0,p,i,l),s.firstCreatePass&&a>=l.directiveStart&&function Ph(i,s,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=s.type.prototype;if(l){const y=mo(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==C&&Bn(C),yo(w),y.resolving=!1,Ua()}}return d}function od(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function zs(i,s){return!(i&it.Self||i&it.Host&&s)}class Eo{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Nu(this._tNode,this._lView,s,l,a)}}function Sn(i){return _r(()=>{const s=i.prototype.constructor,a=s[Ge]||za(s),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const p=d[Ge]||za(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function za(i){return ze(i)?()=>{const s=za(X(i));return s&&s()}:go(i)}function ta(i){return function ea(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const p=a[d];if(dr(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(p===s)return a[d+1];d+=2}}}return null}(an(),i)}const Ji="__parameters__";function Xi(i,s,a){return _r(()=>{const l=function wo(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(s);function d(...p){if(this instanceof d)return l.apply(this,p),this;const y=new d(...p);return w.annotation=y,w;function w(C,A,N){const k=C.hasOwnProperty(Ji)?C[Ji]:Object.defineProperty(C,Ji,{value:[]})[Ji];for(;k.length<=N;)k.push(null);return(k[N]=k[N]||[]).push(y),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class nn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=en({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}function Qt(i,s){i.forEach(a=>Array.isArray(a)?Qt(a,s):s(a))}function ql(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Za(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function nr(i,s,a){let l=Zs(i,s);return l>=0?i[1|l]=a:(l=~l,function Ya(i,s,a,l){let d=i.length;if(d==s)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function xs(i,s){const a=Zs(i,s);if(a>=0)return i[1|a]}function Zs(i,s){return function Ys(i,s,a){let l=0,d=i.length>>a;for(;d!==l;){const p=l+(d-l>>1),y=i[p<<a];if(s===y)return p<<a;y>s?d=p:l=p+1}return~(d<<a)}(i,s,1)}const Qs={},ku="__NG_DI_FLAG__",Nr="ngTempTokenPath",ts=/\n/gm,Xa="__source",Js=ge({provide:String,useValue:ge});let Qr;function Lu(i){const s=Qr;return Qr=i,s}function Jp(i,s=it.Default){if(void 0===Qr)throw new Le(203,"");return null===Qr?Bs(i,void 0,s):Qr.get(i,s&it.Optional?null:void 0,s)}function D(i,s=it.Default){return(function kt(){return wi}()||Jp)(X(i),s)}function V(i){const s=[];for(let a=0;a<i.length;a++){const l=X(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Le(900,"");let d,p=it.Default;for(let y=0;y<l.length;y++){const w=l[y],C=ne(w);"number"==typeof C?-1===C?d=w.token:p|=C:d=w}s.push(D(d,p))}else s.push(D(l))}return s}function z(i,s){return i[ku]=s,i.prototype[ku]=s,i}function ne(i){return i[ku]}const Ve=z(Xi("Inject",i=>({token:i})),-1),gt=z(Xi("Optional"),8),Pn=z(Xi("SkipSelf"),4);class gd{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function vt(i){return i instanceof gd?i.changingThisBreaksApplicationSecurity:i}const rs=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,q_=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var pn=(()=>((pn=pn||{})[pn.NONE=0]="NONE",pn[pn.HTML=1]="HTML",pn[pn.STYLE=2]="STYLE",pn[pn.SCRIPT=3]="SCRIPT",pn[pn.URL=4]="URL",pn[pn.RESOURCE_URL=5]="RESOURCE_URL",pn))();function qu(i){const s=function Xl(){const i=xe();return i&&i[12]}();return s?s.sanitize(pn.URL,i)||"":function si(i,s){const a=function hn(i){return i instanceof gd&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?vt(i):function Hu(i){return(i=String(i)).match(rs)||i.match(q_)?i:"unsafe:"+i}(K(i))}const eo="__ngContext__";function On(i,s){i[eo]=s}function Xh(i){const s=function yt(i){return i[eo]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Id(i){return i.ngOriginalError}function To(i,...s){i.error(...s)}class Ao{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function dg(i){return i&&i.ngErrorLogger||To}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Id(s);for(;a&&Id(a);)a=Id(a);return a||null}}const Cd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ut))();function Ms(i){return i instanceof Function?i():i}var os=(()=>((os=os||{})[os.Important=1]="Important",os[os.DashCase=2]="DashCase",os))();function Dd(i,s){return undefined(i,s)}function oc(i){const s=i[3];return Ti(s)?s[3]:s}function Or(i){return bd(i[13])}function su(i){return bd(i[4])}function bd(i){for(;null!==i&&!Ti(i);)i=i[4];return i}function Li(i,s,a,l,d){if(null!=l){let p,y=!1;Ti(l)?p=l:bi(l)&&(y=!0,l=l[0]);const w=on(l);0===i&&null!==a?null==d?Xe(s,a,w):Ye(s,a,w,d||null,!0):1===i&&null!==a?Ye(s,a,w,d||null,!0):2===i?function Td(i,s,a){const l=Cr(i,s);l&&function zn(i,s,a,l){$t(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,w,y):3===i&&s.destroyNode(w),null!=p&&function AD(i,s,a,l,d){const p=a[7];p!==on(a)&&Li(s,i,l,p,d);for(let w=10;w<a.length;w++){const C=a[w];pf(C[1],C,i,s,l,p)}}(s,i,p,a,d)}}function us(i,s,a){return $t(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function f(i,s){const a=i[9],l=a.indexOf(s),d=s[3];1024&s[2]&&(s[2]&=-1025,zo(d,-1)),a.splice(l,1)}function v(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&f(d,l),s>0&&(i[a-1][4]=l[4]);const p=Za(i,10+s);!function ty(i,s){pf(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const y=p[19];null!==y&&y.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function b(i,s){if(!(256&s[2])){const a=s[11];$t(a)&&a.destroyNode&&pf(i,s,a,3,null,null),function ry(i){let s=i[13];if(!s)return x(i[1],i);for(;s;){let a=null;if(bi(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)bi(s)&&x(s[1],s),s=s[3];null===s&&(s=i),bi(s)&&x(s[1],s),a=s&&s[4]}s=a}}(s)}}function x(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function te(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=s[a[l]];if(!(d instanceof vn)){const p=a[l+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const w=d[p[y]],C=p[y+1];try{C.call(w)}finally{}}else try{p.call(d)}finally{}}}}(i,s),function j(i,s){const a=i.cleanup,l=s[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const y=a[p+1],w="function"==typeof y?y(s):on(s[y]),C=l[d=a[p+2]],A=a[p+3];"boolean"==typeof A?w.removeEventListener(a[p],C,A):A>=0?l[d=A]():l[d=-A].unsubscribe(),p+=2}else{const y=l[d=a[p+1]];a[p].call(y)}if(null!==l){for(let p=d+1;p<l.length;p++)l[p]();s[7]=null}}(i,s),1===s[1].type&&$t(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Ti(s[3])){a!==s[3]&&f(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function we(i,s,a){return function Te(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===Rt.None||d===Rt.Emulated)return null}return Nn(l,a)}(i,s.parent,a)}function Ye(i,s,a,l,d){$t(i)?i.insertBefore(s,a,l,d):s.insertBefore(a,l,d)}function Xe(i,s,a){$t(i)?i.appendChild(s,a):s.appendChild(a)}function Nt(i,s,a,l,d){null!==l?Ye(i,s,a,l,d):Xe(i,s,a)}function Cr(i,s){return $t(i)?i.parentNode(s):s.parentNode}let ca=function lc(i,s,a){return 40&i.type?Nn(i,a):null};function cc(i,s,a,l){const d=we(i,l,s),p=s[11],w=function Ns(i,s,a){return ca(i,s,a)}(l.parent||s[6],l,s);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)Nt(p,d,a[C],w,!1);else Nt(p,d,a,w,!1)}function el(i,s){if(null!==s){const a=s.type;if(3&a)return Nn(s,i);if(4&a)return hf(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return el(i,l);{const d=i[s.index];return Ti(d)?hf(-1,d):on(d)}}if(32&a)return Dd(s,i)()||on(i[s.index]);{const l=df(i,s);return null!==l?Array.isArray(l)?l[0]:el(oc(i[16]),l):el(i,s.next)}}return null}function df(i,s){return null!==s?i[16][6].projection[s.projection]:null}function hf(i,s){const a=10+i+1;if(a<s.length){const l=s[a],d=l[1].firstChild;if(null!==d)return el(l,d)}return s[7]}function ff(i,s,a,l,d,p,y){for(;null!=a;){const w=l[a.index],C=a.type;if(y&&0===s&&(w&&On(on(w),l),a.flags|=4),64!=(64&a.flags))if(8&C)ff(i,s,a.child,l,d,p,!1),Li(s,i,d,w,p);else if(32&C){const A=Dd(a,l);let N;for(;N=A();)Li(s,i,d,N,p);Li(s,i,d,w,p)}else 16&C?iy(i,s,l,a,d,p):Li(s,i,d,w,p);a=y?a.projectionNext:a.next}}function pf(i,s,a,l,d,p){ff(a,l,i.firstChild,s,d,p,!1)}function iy(i,s,a,l,d,p){const y=a[16],C=y[6].projection[l.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)Li(s,i,d,C[A],p);else ff(i,s,C,y[3],d,p,!0)}function n0(i,s,a){$t(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function sy(i,s,a){$t(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function r0(i,s,a){let l=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=s.length;if(d+p===l||i.charCodeAt(d+p)<=32)return d}a=d+1}}const gf="ng-template";function oy(i,s,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==r0(d.toLowerCase(),s,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function ay(i){return 4===i.type&&i.value!==gf}function pg(i,s,a){return s===(4!==i.type||a?i.value:gf)}function xD(i,s,a){let l=4;const d=i.attrs||[],p=function ND(i){for(let s=0;s<i.length;s++)if(dr(i[s]))return s;return i.length}(d);let y=!1;for(let w=0;w<s.length;w++){const C=s[w];if("number"!=typeof C){if(!y)if(4&l){if(l=2|1&l,""!==C&&!pg(i,C,a)||""===C&&1===s.length){if(Rs(l))return!1;y=!0}}else{const A=8&l?C:s[++w];if(8&l&&null!==i.attrs){if(!oy(i.attrs,A,a)){if(Rs(l))return!1;y=!0}continue}const k=s0(8&l?"class":C,d,ay(i),a);if(-1===k){if(Rs(l))return!1;y=!0;continue}if(""!==A){let U;U=k>p?"":d[k+1].toLowerCase();const Z=8&l?U:null;if(Z&&-1!==r0(Z,A,0)||2&l&&A!==U){if(Rs(l))return!1;y=!0}}}}else{if(!y&&!Rs(l)&&!Rs(C))return!1;if(y&&Rs(C))continue;y=!1,l=C|1&l}}return Rs(l)||y}function Rs(i){return 0==(1&i)}function s0(i,s,a,l){if(null===s)return-1;let d=0;if(l||!a){let p=!1;for(;d<s.length;){const y=s[d];if(y===i)return d;if(3===y||6===y)p=!0;else{if(1===y||2===y){let w=s[++d];for(;"string"==typeof w;)w=s[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=p?1:2}return-1}return function o0(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function uy(i,s,a=!1){for(let l=0;l<s.length;l++)if(xD(i,s[l],a))return!0;return!1}function a0(i,s){return i?":not("+s.trim()+")":s}function RD(i){let s=i[0],a=1,l=2,d="",p=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const w=i[++a];d+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!Rs(y)&&(s+=a0(p,d),d=""),l=y,p=p||!Rs(l);a++}return""!==d&&(s+=a0(p,d)),s}const Dt={};function mf(i){gg(St(),xe(),tr()+i,Yo())}function gg(i,s,a,l){if(!l)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&Ws(s,p,a)}else{const p=i.preOrderHooks;null!==p&&bu(s,p,0,a)}Rn(a)}function mg(i,s){return i<<17|s<<2}function no(i){return i>>17&32767}function dy(i){return 2|i}function ou(i){return(131068&i)>>2}function hy(i,s){return-131069&i|s<<2}function fy(i){return 1|i}function vf(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],p=a[l+1];if(-1!==p){const y=i.data[p];Va(d),y.contentQueries(2,s[p],p)}}}function fc(i,s,a,l,d,p,y,w,C,A){const N=s.blueprint.slice();return N[0]=d,N[2]=140|l,Gs(N),N[3]=N[15]=i,N[8]=a,N[10]=y||i&&i[10],N[11]=w||i&&i[11],N[12]=C||i&&i[12]||null,N[9]=A||i&&i[9]||null,N[6]=p,N[16]=2==s.type?i[16]:N,N}function rl(i,s,a,l,d){let p=i.data[s];if(null===p)p=function Dy(i,s,a,l,d){const p=_o(),y=Is(),C=i.data[s]=function pc(i,s,a,l,d,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,a,s,l,d);return null===i.firstChild&&(i.firstChild=C),null!==p&&(y?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}(i,s,a,l,d),function Xc(){return ft.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=d;const y=function $s(){const i=ft.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return zr(p,!0),p}function ha(i,s,a,l){if(0===a)return-1;const d=s.length;for(let p=0;p<a;p++)s.push(l),i.blueprint.push(l),i.data.push(null);return d}function Ef(i,s,a){Xo(s);try{const l=i.viewQuery;null!==l&&Af(1,l,a);const d=i.template;null!==d&&bg(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&vf(i,s),i.staticViewQueries&&Af(2,i.viewQuery,a);const p=i.components;null!==p&&function Cy(i,s){for(let a=0;a<s.length;a++)JD(i,s[a])}(s,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Du()}}function Sd(i,s,a,l){const d=s[2];if(256==(256&d))return;Xo(s);const p=Yo();try{Gs(s),function Iu(i){return ft.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&bg(i,s,a,2,l);const y=3==(3&d);if(!p)if(y){const A=i.preOrderCheckHooks;null!==A&&Ws(s,A,null)}else{const A=i.preOrderHooks;null!==A&&bu(s,A,0,null),Tu(s,0)}if(function QD(i){for(let s=Or(i);null!==s;s=su(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const d=a[l],p=d[3];0==(1024&d[2])&&zo(p,1),d[2]|=1024}}}(s),function b0(i){for(let s=Or(i);null!==s;s=su(s))for(let a=10;a<s.length;a++){const l=s[a],d=l[1];Qi(l)&&Sd(d,l,d.template,l[8])}}(s),null!==i.contentQueries&&vf(i,s),!p)if(y){const A=i.contentCheckHooks;null!==A&&Ws(s,A)}else{const A=i.contentHooks;null!==A&&bu(s,A,1),Tu(s,1)}!function f0(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Rn(~d);else{const p=d,y=a[++l],w=a[++l];Cu(y,p),w(2,s[p])}}}finally{Rn(-1)}}(i,s);const w=i.components;null!==w&&function Dg(i,s){for(let a=0;a<s.length;a++)T0(i,s[a])}(s,w);const C=i.viewQuery;if(null!==C&&Af(2,C,l),!p)if(y){const A=i.viewCheckHooks;null!==A&&Ws(s,A)}else{const A=i.viewHooks;null!==A&&bu(s,A,2),Tu(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),p||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,zo(s[3],-1))}finally{Du()}}function $D(i,s,a,l){const d=s[10],p=!Yo(),y=function Wn(i){return 4==(4&i[2])}(s);try{p&&!y&&d.begin&&d.begin(),y&&Ef(i,s,l),Sd(i,s,a,l)}finally{p&&!y&&d.end&&d.end()}}function bg(i,s,a,l,d){const p=tr(),y=2&l;try{Rn(-1),y&&s.length>20&&gg(i,s,20,Yo()),a(l,d)}finally{Rn(p)}}function by(i,s,a){!Zo()||(function KD(i,s,a,l){const d=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||vo(a,s),On(l,s);const y=a.initialInputs;for(let w=d;w<p;w++){const C=i.data[w],A=Zi(C);A&&ZD(s,a,C);const N=ln(s,i,w,a);On(N,s),null!==y&&YD(0,w-d,N,C,0,y),A&&(Sr(a.index,s)[8]=N)}}(i,s,a,Nn(a,s)),128==(128&a.flags)&&function Df(i,s,a){const l=a.directiveStart,d=a.directiveEnd,y=a.index,w=function ka(){return ft.lFrame.currentDirectiveIndex}();try{Rn(y);for(let C=l;C<d;C++){const A=i.data[C],N=s[C];Jo(C),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&xo(A,N)}}finally{Rn(-1),Jo(w)}}(i,s,a))}function Ag(i,s,a=Nn){const l=s.localNames;if(null!==l){let d=s.index+1;for(let p=0;p<l.length;p+=2){const y=l[p+1],w=-1===y?a(s,i):i[y];i[d++]=w}}}function p0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Sg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Sg(i,s,a,l,d,p,y,w,C,A){const N=20+l,k=N+d,U=function g0(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Dt);return a}(N,k),Z="function"==typeof A?A():A;return U[1]={type:i,blueprint:U,template:a,queries:null,viewQuery:w,declTNode:s,data:U.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:Z,incompleteFirstPass:!1}}function Ng(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,d):a[l]=[s,d]}return a}function If(i,s,a,l){let d=!1;if(Zo()){const p=function bf(i,s,a){const l=i.directiveRegistry;let d=null;if(l)for(let p=0;p<l.length;p++){const y=l[p];uy(a,y.selectors,!1)&&(d||(d=[]),Mu(vo(a,s),i,y.type),Zi(y)?(I0(i,a),d.unshift(y)):d.push(y))}return d}(i,s,a),y=null===l?null:{"":-1};if(null!==p){d=!0,xd(a,i.data.length,p.length);for(let N=0;N<p.length;N++){const k=p[N];k.providersResolver&&k.providersResolver(k)}let w=!1,C=!1,A=ha(i,s,p.length,null);for(let N=0;N<p.length;N++){const k=p[N];a.mergedAttrs=An(a.mergedAttrs,k.hostAttrs),Md(i,a,s,A,k),Ty(A,k,y),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const U=k.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!C&&(U.ngOnChanges||U.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),C=!0),A++}!function _0(i,s){const l=s.directiveEnd,d=i.data,p=s.attrs,y=[];let w=null,C=null;for(let A=s.directiveStart;A<l;A++){const N=d[A],k=N.inputs,U=null===p||ay(s)?null:Og(k,p);y.push(U),w=Ng(k,A,w),C=Ng(N.outputs,A,C)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=w,s.outputs=C}(i,a)}y&&function C0(i,s,a){if(s){const l=i.localNames=[];for(let d=0;d<s.length;d+=2){const p=a[s[d+1]];if(null==p)throw new Le(-301,`Export of name '${s[d+1]}' not found!`);l.push(s[d],p)}}}(a,l,y)}return a.mergedAttrs=An(a.mergedAttrs,a.attrs),d}function Cf(i,s,a,l,d,p){const y=p.hostBindings;if(y){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const C=~s.index;(function w0(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=C&&w.push(C),w.push(l,d,y)}}function xo(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function I0(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Ty(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Zi(s)&&(a[""]=i)}}function xd(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Md(i,s,a,l,d){i.data[l]=d;const p=d.factory||(d.factory=go(d.type)),y=new vn(p,Zi(d),null);i.blueprint[l]=y,a[l]=y,Cf(i,s,0,l,ha(i,a,d.hostVars,Dt),d)}function ZD(i,s,a){const l=Nn(s,i),d=p0(a),p=i[10],y=Tf(i,fc(i,d,null,a.onPush?64:16,l,s,p,p.createRenderer(l,a),null,null));i[s.index]=y}function rr(i,s,a,l,d,p){const y=Nn(i,s);!function Pg(i,s,a,l,d,p,y){if(null==p)$t(i)?i.removeAttribute(s,d,a):s.removeAttribute(d);else{const w=null==y?K(p):y(p,l||"",d);$t(i)?i.setAttribute(s,d,w,a):a?s.setAttributeNS(a,d,w):s.setAttribute(d,w)}}(s[11],y,p,i.value,a,l,d)}function YD(i,s,a,l,d,p){const y=p[s];if(null!==y){const w=l.setInput;for(let C=0;C<y.length;){const A=y[C++],N=y[C++],k=y[C++];null!==w?l.setInput(a,k,A,N):a[N]=k}}}function Og(i,s){let a=null,l=0;for(;l<s.length;){const d=s[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[l+1])),l+=2}else l+=2;else l+=4}return a}function Ps(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function T0(i,s){const a=Sr(s,i);if(Qi(a)){const l=a[1];80&a[2]?Sd(l,a,l.template,a[8]):a[5]>0&&Ay(a)}}function Ay(i){for(let l=Or(i);null!==l;l=su(l))for(let d=10;d<l.length;d++){const p=l[d];if(1024&p[2]){const y=p[1];Sd(y,p,y.template,p[8])}else p[5]>0&&Ay(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=Sr(a[l],i);Qi(d)&&d[5]>0&&Ay(d)}}function JD(i,s){const a=Sr(s,i),l=a[1];(function XD(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Ef(l,a,a[8])}function Tf(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function gc(i){for(;i;){i[2]|=64;const s=oc(i);if(Uc(i)&&!s)return i;i=s}return null}function Sy(i,s,a){const l=s[10];l.begin&&l.begin();try{Sd(i,s,i.template,a)}catch(d){throw M0(s,d),d}finally{l.end&&l.end()}}function Fg(i){!function kg(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Xh(a),d=l[1];$D(d,l,d.template,a)}}(i[8])}function Af(i,s,a){Va(0),s(i,a)}const tb=(()=>Promise.resolve(null))();function S0(i){return i[7]||(i[7]=[])}function xy(i){return i.cleanup||(i.cleanup=[])}function M0(i,s){const a=i[9],l=a?a.get(Ao,null):null;l&&l.handleError(s)}function N0(i,s,a,l,d){for(let p=0;p<a.length;){const y=a[p++],w=a[p++],C=s[y],A=i.data[y];null!==A.setInput?A.setInput(C,d,l,w):C[w]=d}}function Mo(i,s,a){const l=$n(s,i);!function So(i,s,a){$t(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function Sf(i,s,a){let l=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==s)for(let y=0;y<s.length;y++){const w=s[y];"number"==typeof w?p=w:1==p?d=Ee(d,w):2==p&&(l=Ee(l,w+": "+s[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const My=new nn("INJECTOR",-1);class Vg{get(s,a=Qs){if(a===Qs){const l=new Error(`NullInjectorError: No provider for ${ce(s)}!`);throw l.name="NullInjectorError",l}return a}}const Rd=new nn("Set Injector scope."),xf={},Pd={};let Ny;function Ry(){return void 0===Ny&&(Ny=new Vg),Ny}function Py(i,s=null,a=null,l){const d=Oy(i,s,a,l);return d._resolveInjectorDefTypes(),d}function Oy(i,s=null,a=null,l){return new Bg(i,a,s||Ry(),l)}class Bg{constructor(s,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&Qt(a,w=>this.processProvider(w,s,a)),Qt([s],w=>this.processInjectorType(w,[],p)),this.records.set(My,il(void 0,this));const y=this.records.get(Rd);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof s?null:ce(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Qs,l=it.Default){this.assertNotDestroyed();const d=Lu(this),p=Bn(void 0);try{if(!(l&it.SkipSelf)){let w=this.records.get(s);if(void 0===w){const C=function sl(i){return"function"==typeof i||"object"==typeof i&&i instanceof nn}(s)&&Dn(s);w=C&&this.injectableDefInScope(C)?il(Mf(s),xf):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&it.Self?Ry():this.parent).get(s,a=l&it.Optional&&a===Qs?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Nr]=y[Nr]||[]).unshift(ce(s)),d)throw y;return function Me(i,s,a,l){const d=i[Nr];throw s[Xa]&&d.unshift(s[Xa]),i.message=function qe(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=ce(s);if(Array.isArray(s))d=s.map(ce).join(" -> ");else if("object"==typeof s){let p=[];for(let y in s)if(s.hasOwnProperty(y)){let w=s[y];p.push(y+":"+("string"==typeof w?JSON.stringify(w):ce(w)))}d=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(ts,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[Nr]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{Bn(p),Lu(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,d)=>s.push(ce(d))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Le(205,"")}processInjectorType(s,a,l){if(!(s=X(s)))return!1;let d=uo(s);const p=null==d&&s.ngModule||void 0,y=void 0===p?s:p,w=-1!==l.indexOf(y);if(void 0!==p&&(d=uo(p)),null==d)return!1;if(null!=d.imports&&!w){let N;l.push(y);try{Qt(d.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===N&&(N=[]),N.push(k))})}finally{}if(void 0!==N)for(let k=0;k<N.length;k++){const{ngModule:U,providers:Z}=N[k];Qt(Z,pe=>this.processProvider(pe,U,Z||B))}}this.injectorDefTypes.add(y);const C=go(y)||(()=>new y);this.records.set(y,il(C,xf));const A=d.providers;if(null!=A&&!w){const N=s;Qt(A,k=>this.processProvider(k,N,A))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,l){let d=_c(s=X(s))?s:X(s&&s.provide);const p=function rb(i,s,a){return P0(i)?il(void 0,i.useValue):il(R0(i),xf)}(s);if(_c(s)||!0!==s.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=il(void 0,xf,!0),y.factory=()=>V(y.multi),this.records.set(d,y)),d=s,y.multi.push(s)}this.records.set(d,p)}hydrate(s,a){return a.value===xf&&(a.value=Pd,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Ug(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=X(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Mf(i){const s=Dn(i),a=null!==s?s.factory:go(i);if(null!==a)return a;if(i instanceof nn)throw new Le(204,"");if(i instanceof Function)return function ky(i){const s=i.length;if(s>0)throw function ra(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Le(204,"");const a=function Zt(i){const s=i&&(i[Gr]||i[Ne]);if(s){const a=function Bt(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Le(204,"")}function R0(i,s,a){let l;if(_c(i)){const d=X(i);return go(d)||Mf(d)}if(P0(i))l=()=>X(i.useValue);else if(function k0(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...V(i.deps||[]));else if(function O0(i){return!(!i||!i.useExisting)}(i))l=()=>D(X(i.useExisting));else{const d=X(i&&(i.useClass||i.provide));if(!function ls(i){return!!i.deps}(i))return go(d)||Mf(d);l=()=>new d(...V(i.deps))}return l}function il(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function P0(i){return null!==i&&"object"==typeof i&&Js in i}function _c(i){return"function"==typeof i}let Vi=(()=>{class i{static create(a,l){var d;if(Array.isArray(a))return Py({name:""},l,a,"");{const p=null!==(d=a.name)&&void 0!==d?d:"";return Py({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=Qs,i.NULL=new Vg,i.\u0275prov=en({token:i,providedIn:"any",factory:()=>D(My)}),i.__NG_ELEMENT_ID__=-1,i})();function G0(i,s){Vl(Xh(i)[1],an())}function Hy(i){let s=function $0(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let d;if(Zi(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Le(903,"");d=s.\u0275dir}if(d){if(a){l.push(d);const y=i;y.inputs=Gy(i.inputs),y.declaredInputs=Gy(i.declaredInputs),y.outputs=Gy(i.outputs);const w=d.hostBindings;w&&hb(i,w);const C=d.viewQuery,A=d.contentQueries;if(C&&cb(i,C),A&&db(i,A),ae(i.inputs,d.inputs),ae(i.declaredInputs,d.declaredInputs),ae(i.outputs,d.outputs),Zi(d)&&d.data.animation){const N=i.data;N.animation=(N.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let y=0;y<p.length;y++){const w=p[y];w&&w.ngInherit&&w(i),w===Hy&&(a=!1)}}s=Object.getPrototypeOf(s)}!function lb(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=s+=d.hostVars,d.hostAttrs=An(d.hostAttrs,a=An(a,d.hostAttrs))}}(l)}function Gy(i){return i===Ii?{}:i===B?[]:i}function cb(i,s){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{s(l,d),a(l,d)}:s}function db(i,s){const a=i.contentQueries;i.contentQueries=a?(l,d,p)=>{s(l,d,p),a(l,d,p)}:s}function hb(i,s){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{s(l,d),a(l,d)}:s}let Gg=null;function Od(){if(!Gg){const i=ut.Symbol;if(i&&i.iterator)Gg=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Gg=l)}}}return Gg}function Rf(i){return!!Os(i)&&(Array.isArray(i)||!(i instanceof Map)&&Od()in i)}function Os(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ti(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function $y(i,s,a,l){const d=xe();return ti(d,Cs(),s)&&(St(),rr(yn(),d,i,s,a,l)),$y}function X0(i,s,a,l,d,p,y,w){const C=xe(),A=St(),N=i+20,k=A.firstCreatePass?function J0(i,s,a,l,d,p,y,w,C){const A=s.consts,N=rl(s,i,4,y||null,xr(A,w));If(s,a,N,xr(A,C)),Vl(s,N);const k=N.tViews=Sg(2,N,l,d,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,N),k.queries=s.queries.embeddedTView(N)),N}(N,A,C,s,a,l,d,p,y):A.data[N];zr(k,!1);const U=C[11].createComment("");cc(A,C,U,k),On(U,C),Tf(C,C[N]=Ps(U,C,U,k)),Es(k)&&by(A,C,k),null!=y&&Ag(C,k,w)}function zg(i,s=it.Default){const a=xe();return null===a?D(i,s):Nu(an(),a,X(i),s)}function zy(i,s,a){const l=xe();return ti(l,Cs(),s)&&function oi(i,s,a,l,d,p,y,w){const C=Nn(s,a);let N,A=s.inputs;!w&&null!=A&&(N=A[l])?(N0(i,a,N,l,d),Mn(s)&&function y0(i,s){const a=Sr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function WD(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=y?y(d,s.value||"",l):d,$t(p)?p.setProperty(C,l,d):Su(l)||(C.setProperty?C.setProperty(l,d):C[l]=d))}(St(),yn(),l,i,s,l[11],a,!1),zy}function Ky(i,s,a,l,d){const y=d?"class":"style";N0(i,a,s.inputs[y],y,l)}function ks(i,s,a,l){const d=xe(),p=St(),y=20+i,w=d[11],C=d[y]=us(w,s,function nd(){return ft.lFrame.currentNamespace}()),A=p.firstCreatePass?function kr(i,s,a,l,d,p,y){const w=s.consts,A=rl(s,i,2,d,xr(w,p));return If(s,a,A,xr(w,y)),null!==A.attrs&&Sf(A,A.attrs,!1),null!==A.mergedAttrs&&Sf(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(y,p,d,0,s,a,l):p.data[y];zr(A,!0);const N=A.mergedAttrs;null!==N&&Bl(w,C,N);const k=A.classes;null!==k&&sy(w,C,k);const U=A.styles;null!==U&&n0(w,C,U),64!=(64&A.flags)&&cc(p,d,C,A),0===function Ra(){return ft.lFrame.elementDepthCount}()&&On(C,d),function Pa(){ft.lFrame.elementDepthCount++}(),Es(A)&&(by(p,d,A),function Tg(i,s,a){if(Bc(s)){const d=s.directiveEnd;for(let p=s.directiveStart;p<d;p++){const y=i.data[p];y.contentQueries&&y.contentQueries(1,a[p],p)}}}(p,A,d)),null!==l&&Ag(d,A)}function Wd(){let i=an();Is()?function vu(){ft.lFrame.isParent=!1}():(i=i.parent,zr(i,!1));const s=i;!function Ko(){ft.lFrame.elementDepthCount--}();const a=St();a.firstCreatePass&&(Vl(a,i),Bc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function id(i){return 0!=(16&i.flags)}(s)&&Ky(a,s,xe(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Ga(i){return 0!=(32&i.flags)}(s)&&Ky(a,s,xe(),s.stylesWithoutHost,!1)}function Kg(i,s,a,l){ks(i,s,a,l),Wd()}function hw(){return xe()}function Yy(i){return!!i&&"function"==typeof i.then}function fw(i){return!!i&&"function"==typeof i.subscribe}const ai=fw;function qd(i,s,a,l){const d=xe(),p=St(),y=an();return function Zg(i,s,a,l,d,p,y,w){const C=Es(l),N=i.firstCreatePass&&xy(i),k=s[8],U=S0(s);let Z=!0;if(3&l.type||w){const je=Nn(l,s),et=w?w(je):je,be=U.length,dt=w?Pt=>w(on(Pt[l.index])):l.index;if($t(a)){let Pt=null;if(!w&&C&&(Pt=function Fb(i,s,a,l){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const y=d[p];if(y===a&&d[p+1]===l){const w=s[7],C=d[p+2];return w.length>C?w[C]:null}"string"==typeof y&&(p+=2)}return null}(i,s,d,l.index)),null!==Pt)(Pt.__ngLastListenerFn__||Pt).__ngNextListenerFn__=p,Pt.__ngLastListenerFn__=p,Z=!1;else{p=Vf(l,s,k,p,!1);const qt=a.listen(et,d,p);U.push(p,qt),N&&N.push(d,dt,be,be+1)}}else p=Vf(l,s,k,p,!0),et.addEventListener(d,p,y),U.push(p),N&&N.push(d,dt,be,y)}else p=Vf(l,s,k,p,!1);const pe=l.outputs;let Fe;if(Z&&null!==pe&&(Fe=pe[d])){const je=Fe.length;if(je)for(let et=0;et<je;et+=2){const ps=s[Fe[et]][Fe[et+1]].subscribe(p),Hi=U.length;U.push(p,ps),N&&N.push(d,l.index,Hi,-(Hi+1))}}}(p,d,d[11],y,i,s,!!a,l),qd}function Lf(i,s,a,l){try{return!1!==a(l)}catch(d){return M0(i,d),!1}}function Vf(i,s,a,l,d){return function p(y){if(y===Function)return l;const w=2&i.flags?Sr(i.index,s):s;0==(32&s[2])&&gc(w);let C=Lf(s,0,l,y),A=p.__ngNextListenerFn__;for(;A;)C=Lf(s,0,A,y)&&C,A=A.__ngNextListenerFn__;return d&&!1===C&&(y.preventDefault(),y.returnValue=!1),C}}function Yg(i=1){return function td(i){return(ft.lFrame.contextLView=function Kp(i,s){for(;i>0;)s=s[15],i--;return s}(i,ft.lFrame.contextLView))[8]}(i)}function Qg(i,s,a,l,d){const p=i[a+1],y=null===s;let w=l?no(p):ou(p),C=!1;for(;0!==w&&(!1===C||y);){const N=i[w+1];Ew(i[w],s)&&(C=!0,i[w+1]=l?fy(N):dy(N)),w=l?no(N):ou(N)}C&&(i[a+1]=l?dy(p):fy(p))}function Ew(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Zs(i,s)>=0}function tm(i,s){return function No(i,s,a,l){const d=xe(),p=St(),y=function Mi(i){const s=ft.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);p.firstUpdatePass&&function Sw(i,s,a,l){const d=i.data;if(null===d[a+1]){const p=d[tr()],y=function Aw(i,s){return s>=i.expandoStartIndex}(i,a);(function lv(i,s){return 0!=(i.flags&(s?16:32))})(p,l)&&null===s&&!y&&(s=!1),s=function Gb(i,s,a,l){const d=function Fa(i){const s=ft.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=l?s.residualClasses:s.residualStyles;if(null===d)0===(l?s.classBindings:s.styleBindings)&&(a=cl(a=ov(null,i,s,a,l),s.attrs,l),p=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==d)if(a=ov(d,i,s,a,l),null===p){let C=function $b(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==ou(l))return i[no(l)]}(i,s,l);void 0!==C&&Array.isArray(C)&&(C=ov(null,i,s,C[1],l),C=cl(C,s.attrs,l),function Wb(i,s,a,l){i[no(a?s.classBindings:s.styleBindings)]=l}(i,s,l,C))}else p=function qb(i,s,a){let l;const d=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<d;p++)l=cl(l,i[p].hostAttrs,a);return cl(l,s.attrs,a)}(i,s,l)}return void 0!==p&&(l?s.residualClasses=p:s.residualStyles=p),a}(d,p,s,l),function tv(i,s,a,l,d,p){let y=p?s.classBindings:s.styleBindings,w=no(y),C=ou(y);i[l]=a;let N,A=!1;if(Array.isArray(a)){const k=a;N=k[1],(null===N||Zs(k,N)>0)&&(A=!0)}else N=a;if(d)if(0!==C){const U=no(i[w+1]);i[l+1]=mg(U,w),0!==U&&(i[U+1]=hy(i[U+1],l)),i[w+1]=function kD(i,s){return 131071&i|s<<17}(i[w+1],l)}else i[l+1]=mg(w,0),0!==w&&(i[w+1]=hy(i[w+1],l)),w=l;else i[l+1]=mg(C,0),0===w?w=l:i[C+1]=hy(i[C+1],l),C=l;A&&(i[l+1]=dy(i[l+1])),Qg(i,N,l,!0),Qg(i,N,l,!1),function vw(i,s,a,l,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&Zs(p,s)>=0&&(a[l+1]=fy(a[l+1]))}(s,N,i,l,p),y=mg(w,C),p?s.classBindings=y:s.styleBindings=y}(d,p,s,a,y,l)}}(p,i,y,l),s!==Dt&&ti(d,y,s)&&function Mw(i,s,a,l,d,p,y,w){if(!(3&s.type))return;const C=i.data,A=C[w+1];rm(function u0(i){return 1==(1&i)}(A)?Nw(C,s,a,d,ou(A),y):void 0)||(rm(p)||function _g(i){return 2==(2&i)}(A)&&(p=Nw(C,null,a,d,w,y)),function SD(i,s,a,l,d){const p=$t(i);if(s)d?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let y=-1===l.indexOf("-")?void 0:os.DashCase;if(null==d)p?i.removeStyle(a,l,y):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),y|=os.Important),p?i.setStyle(a,l,d,y):a.style.setProperty(l,d,w?"important":"")}}}(l,y,$n(tr(),a),d,p))}(p,p.data[tr()],d,d[11],i,d[y+1]=function Rw(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ce(vt(i)))),i}(s,a),l,y)}(i,s,null,!0),tm}function ov(i,s,a,l,d){let p=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(p=s[w],l=cl(l,p.hostAttrs,d),p!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function cl(i,s,a){const l=a?1:2;let d=-1;if(null!==s)for(let p=0;p<s.length;p++){const y=s[p];"number"==typeof y?d=y:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),nr(i,y,!!a||s[++p]))}return void 0===i?null:i}function Nw(i,s,a,l,d,p){const y=null===s;let w;for(;d>0;){const C=i[d],A=Array.isArray(C),N=A?C[1]:C,k=null===N;let U=a[d+1];U===Dt&&(U=k?B:void 0);let Z=k?xs(U,l):N===l?U:void 0;if(A&&!rm(Z)&&(Z=xs(C,l)),rm(Z)&&(w=Z,y))return w;const pe=i[d+1];d=y?no(pe):ou(pe)}if(null!==s){let C=p?s.residualClasses:s.residualStyles;null!=C&&(w=xs(C,l))}return w}function rm(i){return void 0!==i}function cv(i,s=""){const a=xe(),l=St(),d=i+20,p=l.firstCreatePass?rl(l,d,1,s,null):l.data[d],y=a[d]=function la(i,s){return $t(i)?i.createText(s):i.createTextNode(s)}(a[11],s);cc(l,a,y,p),zr(p,!1)}function Uf(i,s,a){const l=xe(),d=function Fd(i,s,a,l){return ti(i,Cs(),a)?s+K(a)+l:Dt}(l,i,s,a);return d!==Dt&&Mo(l,tr(),d),Uf}const Kd=void 0;var iT=["en",[["a","p"],["AM","PM"],Kd],[["AM","PM"],Kd,Kd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Kd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Kd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Kd,"{1} 'at' {0}",Kd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function rT(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Ec={};function pm(i){const s=function uT(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Vw(s);if(a)return a;const l=s.split("-")[0];if(a=Vw(l),a)return a;if("en"===l)return iT;throw new Error(`Missing locale data for the locale "${i}".`)}function Zd(i){return pm(i)[_t.PluralCase]}function Vw(i){return i in Ec||(Ec[i]=ut.ng&&ut.ng.common&&ut.ng.common.locales&&ut.ng.common.locales[i]),Ec[i]}var _t=(()=>((_t=_t||{})[_t.LocaleId=0]="LocaleId",_t[_t.DayPeriodsFormat=1]="DayPeriodsFormat",_t[_t.DayPeriodsStandalone=2]="DayPeriodsStandalone",_t[_t.DaysFormat=3]="DaysFormat",_t[_t.DaysStandalone=4]="DaysStandalone",_t[_t.MonthsFormat=5]="MonthsFormat",_t[_t.MonthsStandalone=6]="MonthsStandalone",_t[_t.Eras=7]="Eras",_t[_t.FirstDayOfWeek=8]="FirstDayOfWeek",_t[_t.WeekendRange=9]="WeekendRange",_t[_t.DateFormat=10]="DateFormat",_t[_t.TimeFormat=11]="TimeFormat",_t[_t.DateTimeFormat=12]="DateTimeFormat",_t[_t.NumberSymbols=13]="NumberSymbols",_t[_t.NumberFormats=14]="NumberFormats",_t[_t.CurrencyCode=15]="CurrencyCode",_t[_t.CurrencySymbol=16]="CurrencySymbol",_t[_t.CurrencyName=17]="CurrencyName",_t[_t.Currencies=18]="Currencies",_t[_t.Directionality=19]="Directionality",_t[_t.PluralCase=20]="PluralCase",_t[_t.ExtraData=21]="ExtraData",_t))();const jf="en-US";let jw=jf;function Qd(i,s,a,l,d){if(i=X(i),Array.isArray(i))for(let p=0;p<i.length;p++)Qd(i[p],s,a,l,d);else{const p=St(),y=xe();let w=_c(i)?i:X(i.provide),C=R0(i);const A=an(),N=1048575&A.providerIndexes,k=A.directiveStart,U=A.providerIndexes>>20;if(_c(i)||!i.multi){const Z=new vn(C,d,zg),pe=Jd(w,s,d?N:N+U,k);-1===pe?(Mu(vo(A,y),p,w),wc(p,i,s.length),s.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(Z),y.push(Z)):(a[pe]=Z,y[pe]=Z)}else{const Z=Jd(w,s,N+U,k),pe=Jd(w,s,N,N+U),Fe=Z>=0&&a[Z],je=pe>=0&&a[pe];if(d&&!je||!d&&!Fe){Mu(vo(A,y),p,w);const et=function NT(i,s,a,l,d){const p=new vn(i,a,zg);return p.multi=[],p.index=s,p.componentProviders=0,qf(p,d,l&&!a),p}(d?Dv:MT,a.length,d,l,C);!d&&je&&(a[pe].providerFactory=et),wc(p,i,s.length,0),s.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(et),y.push(et)}else wc(p,i,Z>-1?Z:pe,qf(a[d?pe:Z],C,!d&&l));!d&&l&&je&&a[pe].componentProviders++}}}function wc(i,s,a,l){const d=_c(s),p=function F0(i){return!!i.useClass}(s);if(d||p){const C=(p?X(s.useClass):s).prototype.ngOnDestroy;if(C){const A=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const N=A.indexOf(a);-1===N?A.push(a,[l,C]):A[N+1].push(l,C)}else A.push(a,C)}}}function qf(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Jd(i,s,a,l){for(let d=a;d<l;d++)if(s[d]===i)return d;return-1}function MT(i,s,a,l){return Xd(this.multi,[])}function Dv(i,s,a,l){const d=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=ln(a,a[1],this.providerFactory.index,l);p=w.slice(0,y),Xd(d,p);for(let C=y;C<w.length;C++)p.push(w[C])}else p=[],Xd(d,p);return p}function Xd(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function mI(i,s=[]){return a=>{a.providersResolver=(l,d)=>function xT(i,s,a){const l=St();if(l.firstCreatePass){const d=Zi(i);Qd(a,l.data,l.blueprint,d,!0),Qd(s,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,s)}}class yI{}class RT{resolveComponentFactory(s){throw function vI(i){const s=Error(`No component factory found for ${ce(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Ic=(()=>{class i{}return i.NULL=new RT,i})();function PT(){return Cc(an(),xe())}function Cc(i,s){return new Dc(Nn(i,s))}let Dc=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=PT,i})();class Dm{}let zf=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function eh(){const i=xe(),a=Sr(an().index,i);return function bm(i){return i[11]}(bi(a)?a:i)}(),i})(),Kf=(()=>{class i{}return i.\u0275prov=en({token:i,providedIn:"root",factory:()=>null}),i})();class wI{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Tm=new wI("13.1.3"),Am={};function th(i,s,a,l,d=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&l.push(on(p)),Ti(p))for(let w=10;w<p.length;w++){const C=p[w],A=C[1].firstChild;null!==A&&th(C[1],C,A,l)}const y=a.type;if(8&y)th(i,s,a.child,l);else if(32&y){const w=Dd(a,s);let C;for(;C=w();)l.push(C)}else if(16&y){const w=df(s,a);if(Array.isArray(w))l.push(...w);else{const C=oc(s[16]);th(C[1],C,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class nh{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return th(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Ti(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(v(s,l),Za(a,l))}this._attachedToViewContainer=!1}b(this._lView[1],this._lView)}onDestroy(s){!function wf(i,s,a,l){const d=S0(s);null===a?d.push(l):(d.push(a),i.firstCreatePass&&xy(i).push(l,d.length-1))}(this._lView[1],this._lView,null,s)}markForCheck(){gc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Sy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Lg(i,s,a){Oa(!0);try{Sy(i,s,a)}finally{Oa(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Le(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ac(i,s){pf(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Le(902,"");this._appRef=s}}class bv extends nh{constructor(s){super(s),this._view=s}detectChanges(){Fg(this._view)}checkNoChanges(){!function eb(i){Oa(!0);try{Fg(i)}finally{Oa(!1)}}(this._view)}get context(){return null}}class Tv extends Ic{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Jn(s);return new xm(a,this.ngModule)}}function Sm(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const II=new nn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Cd});class xm extends yI{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function PD(i){return i.map(RD).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Sm(this.componentDef.inputs)}get outputs(){return Sm(this.componentDef.outputs)}create(s,a,l,d){const p=(d=d||this.ngModule)?function CI(i,s){return{get:(a,l,d)=>{const p=i.get(a,Am,d);return p!==Am||l===Am?p:s.get(a,l,d)}}}(s,d.injector):s,y=p.get(Dm,Hs),w=p.get(Kf,null),C=y.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",N=l?function Mg(i,s,a){if($t(i))return i.selectRootElement(s,a===Rt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(C,l,this.componentDef.encapsulation):us(y.createRenderer(null,this.componentDef),A,function OT(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(A)),k=this.componentDef.onPush?576:528,U=function H0(i,s){return{components:[],scheduler:i||Cd,clean:tb,playerHandler:s||null,flags:0}}(),Z=Sg(0,null,null,1,0,null,null,null,null,null),pe=fc(null,Z,U,k,null,null,y,C,w,p);let Fe,je;Xo(pe);try{const et=function U0(i,s,a,l,d,p){const y=a[1];a[20]=i;const C=rl(y,20,2,"#host",null),A=C.mergedAttrs=s.hostAttrs;null!==A&&(Sf(C,A,!0),null!==i&&(Bl(d,i,A),null!==C.classes&&sy(d,i,C.classes),null!==C.styles&&n0(d,i,C.styles)));const N=l.createRenderer(i,s),k=fc(a,p0(s),null,s.onPush?64:16,a[20],C,l,N,p||null,null);return y.firstCreatePass&&(Mu(vo(C,a),y,s.type),I0(y,C),xd(C,a.length,1)),Tf(a,k),a[20]=k}(N,this.componentDef,pe,y,C);if(N)if(l)Bl(C,N,["ng-version",Tm.full]);else{const{attrs:be,classes:dt}=function OD(i){const s=[],a=[];let l=1,d=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===d?""!==p&&s.push(p,i[++l]):8===d&&a.push(p);else{if(!Rs(d))break;d=p}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);be&&Bl(C,N,be),dt&&dt.length>0&&sy(C,N,dt.join(" "))}if(je=qo(Z,20),void 0!==a){const be=je.projection=[];for(let dt=0;dt<this.ngContentSelectors.length;dt++){const Pt=a[dt];be.push(null!=Pt?Array.from(Pt):null)}}Fe=function j0(i,s,a,l,d){const p=a[1],y=function zD(i,s,a){const l=an();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Md(i,l,s,ha(i,s,1,null),a));const d=ln(s,i,l.directiveStart,l);On(d,s);const p=Nn(l,s);return p&&On(p,s),d}(p,a,s);if(l.components.push(y),i[8]=y,d&&d.forEach(C=>C(y,s)),s.contentQueries){const C=an();s.contentQueries(1,y,C.directiveStart)}const w=an();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Rn(w.index),Cf(a[1],w,0,w.directiveStart,w.directiveEnd,s),xo(s,y)),y}(et,this.componentDef,pe,U,[G0]),Ef(Z,pe,null)}finally{Du()}return new Nm(this.componentType,Fe,Cc(je,pe),pe,je)}}class Nm extends class _I{}{constructor(s,a,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new bv(d),this.componentType=s}get injector(){return new Eo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class rh{}const pl=new Map;class Sv extends rh{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Tv(this);const l=Xn(s);this._bootstrapComponents=Ms(l.bootstrap),this._r3Injector=Oy(s,a,[{provide:rh,useValue:this},{provide:Ic,useValue:this.componentFactoryResolver}],ce(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Vi.THROW_IF_NOT_FOUND,l=it.Default){return s===Vi||s===rh||s===My?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class xv extends class Zf{}{constructor(s){super(),this.moduleType=s,null!==Xn(s)&&function SM(i){const s=new Set;!function a(l){const d=Xn(l,!0),p=d.id;null!==p&&(function LT(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ce(s)} vs ${ce(s.name)}`)}(p,pl.get(p),l),pl.set(p,l));const y=Ms(d.imports);for(const w of y)s.has(w)||(s.add(w),a(w))}(i)}(s)}create(s){return new Sv(this.moduleType,s)}}function Om(i){return s=>{setTimeout(i,void 0,s)}}const _a=class WT extends _.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var d,p,y;let w=s,C=a||(()=>null),A=l;if(s&&"object"==typeof s){const k=s;w=null===(d=k.next)||void 0===d?void 0:d.bind(k),C=null===(p=k.error)||void 0===p?void 0:p.bind(k),A=null===(y=k.complete)||void 0===y?void 0:y.bind(k)}this.__isAsync&&(C=Om(C),w&&(w=Om(w)),A&&(A=Om(A)));const N=super.subscribe({next:w,error:C,complete:A});return s instanceof J.w0&&s.add(N),N}};Symbol;let Qf=(()=>{class i{}return i.__NG_ELEMENT_ID__=NM,i})();const PI=Qf,qT=class extends PI{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=fc(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),Ef(a,l,s),new nh(l)}};function NM(){return function ih(i,s){return 4&i.type?new qT(s,i,Cc(i,s)):null}(an(),xe())}let km=(()=>{class i{}return i.__NG_ELEMENT_ID__=OI,i})();function OI(){return function LI(i,s){let a;const l=s[i.index];if(Ti(l))a=l;else{let d;if(8&i.type)d=on(l);else{const p=s[11];d=p.createComment("");const y=Nn(i,s);Ye(p,Cr(p,y),d,function uc(i,s){return $t(i)?i.nextSibling(s):s.nextSibling}(p,y),!1)}s[i.index]=a=Ps(l,s,d,i),Tf(s,a)}return new sh(a,i,s)}(an(),xe())}const kI=km,sh=class extends kI{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return Cc(this._hostTNode,this._hostLView)}get injector(){return new Eo(this._hostTNode,this._hostLView)}get parentInjector(){const s=qs(this._hostTNode,this._hostLView);if(bs(s)){const a=dn(s,this._hostLView),l=Ni(s);return new Eo(a[1].data[l+8],a)}return new Eo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=FI(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const d=s.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(s,a,l,d,p){const y=s&&!function es(i){return"function"==typeof i}(s);let w;if(y)w=a;else{const k=a||{};w=k.index,l=k.injector,d=k.projectableNodes,p=k.ngModuleRef}const C=y?s:new xm(Jn(s)),A=l||this.parentInjector;if(!p&&null==C.ngModule&&A){const k=A.get(rh,null);k&&(p=k)}const N=C.create(A,d,void 0,p);return this.insert(N.hostView,w),N}insert(s,a){const l=s._lView,d=l[1];if(function Rl(i){return Ti(i[3])}(l)){const N=this.indexOf(s);if(-1!==N)this.detach(N);else{const k=l[3],U=new sh(k,k[6],k[3]);U.detach(U.indexOf(s))}}const p=this._adjustIndex(a),y=this._lContainer;!function m(i,s,a,l){const d=10+l,p=a.length;l>0&&(a[d-1][4]=s),l<p-10?(s[4]=a[d],ql(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function h(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=128}(d,l,y,p);const w=hf(p,y),C=l[11],A=Cr(C,y[7]);return null!==A&&function ny(i,s,a,l,d,p){l[0]=d,l[6]=s,pf(i,l,a,1,d,p)}(d,y[6],C,l,A,w),s.attachToViewContainerRef(),ql(Fm(y),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=FI(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=v(this._lContainer,a);l&&(Za(Fm(this._lContainer),a),b(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=v(this._lContainer,a);return l&&null!=Za(Fm(this._lContainer),a)?new nh(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function FI(i){return i[8]}function Fm(i){return i[8]||(i[8]=[])}function tp(...i){}const Zv=new nn("Application Initializer");let ir=(()=>{class i{constructor(a){this.appInits=a,this.resolve=tp,this.reject=tp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Yy(p))a.push(p);else if(ai(p)){const y=new Promise((w,C)=>{p.subscribe({complete:w,error:C})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(D(Zv,8))},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})();const oh=new nn("AppId"),np={provide:oh,useFactory:function sA(){return`${Yv()}${Yv()}${Yv()}`},deps:[]};function Yv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const aC=new nn("Platform Initializer"),rp=new nn("Platform ID"),zm=new nn("appBootstrapListener");let Qv=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})();const ah=new nn("LocaleId"),Km=new nn("DefaultCurrencyCode");class lC{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Jv=(()=>{class i{compileModuleSync(a){return new xv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=Ms(Xn(a).declarations).reduce((y,w)=>{const C=Jn(w);return C&&y.push(new xm(C)),y},[]);return new lC(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})();const lA=(()=>Promise.resolve(0))();function ip(i){"undefined"==typeof Zone?lA.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ji{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _a(!1),this.onMicrotaskEmpty=new _a(!1),this.onStable=new _a(!1),this.onError=new _a(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function eE(){let i=ut.requestAnimationFrame,s=ut.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function tE(i){const s=()=>{!function Zm(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(ut,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,nE(i),i.isCheckStableRunning=!0,br(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),nE(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,p,y,w)=>{try{return cC(i),a.invokeTask(d,p,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),rE(i)}},onInvoke:(a,l,d,p,y,w,C)=>{try{return cC(i),a.invoke(d,p,y,w,C)}finally{i.shouldCoalesceRunChangeDetection&&s(),rE(i)}},onHasTask:(a,l,d,p)=>{a.hasTask(d,p),l===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,nE(i),br(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ji.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ji.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,d){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+d,s,Lr,tp,tp);try{return p.runTask(y,a,l)}finally{p.cancelTask(y)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const Lr={};function br(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function nE(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function cC(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function rE(i){i._nesting--,br(i)}class cA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _a,this.onMicrotaskEmpty=new _a,this.onStable=new _a,this.onError=new _a}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,d){return s.apply(a,l)}}let dC=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ji.assertNotInAngularZone(),ip(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ip(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(D(ji))},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})(),Ym=(()=>{class i{constructor(){this._applications=new Map,sp.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return sp.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})();class iE{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function dA(i){sp=i}let so,sp=new iE;const Qm=new nn("AllowMultipleToken");function uh(i,s,a=[]){const l=`Platform: ${s}`,d=new nn(l);return(p=[])=>{let y=aE();if(!y||y.injector.get(Qm,!1))if(i)i(a.concat(p).concat({provide:d,useValue:!0}));else{const w=a.concat(p).concat({provide:d,useValue:!0},{provide:Rd,useValue:"platform"});!function pA(i){if(so&&!so.destroyed&&!so.injector.get(Qm,!1))throw new Le(400,"");so=i.get(op);const s=i.get(aC,null);s&&s.forEach(a=>a())}(Vi.create({providers:w,name:l}))}return function hC(i){const s=aE();if(!s)throw new Le(401,"");return s}()}}function aE(){return so&&!so.destroyed?so:null}let op=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function mA(i,s){let a;return a="noop"===i?new cA:("zone.js"===i?void 0:i)||new ji({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),C=[{provide:ji,useValue:w}];return w.run(()=>{const A=Vi.create({providers:C,parent:this.injector,name:a.moduleType.name}),N=a.create(A),k=N.injector.get(Ao,null);if(!k)throw new Le(402,"");return w.runOutsideAngular(()=>{const U=w.onError.subscribe({next:Z=>{k.handleError(Z)}});N.onDestroy(()=>{uE(this._modules,N),U.unsubscribe()})}),function _A(i,s,a){try{const l=a();return Yy(l)?l.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(k,w,()=>{const U=N.injector.get(ir);return U.runInitializers(),U.donePromise.then(()=>(function Hw(i){rt(i,"Expected localeId to be defined"),"string"==typeof i&&(jw=i.toLowerCase().replace(/_/g,"-"))}(N.injector.get(ah,jf)||jf),this._moduleDoBootstrap(N),N))})})}bootstrapModule(a,l=[]){const d=Ac({},l);return function hA(i,s,a){const l=new xv(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const l=a.injector.get(Jm);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Le(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Le(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(D(Vi))},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})();function Ac(i,s){return Array.isArray(s)?s.reduce(Ac,i):Object.assign(Object.assign({},i),s)}let Jm=(()=>{class i{constructor(a,l,d,p,y){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new O.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),C=new O.y(A=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{ji.assertNotInAngularZone(),ip(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{ji.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{N.unsubscribe(),k.unsubscribe()}});this.isStable=(0,se.T)(w,C.pipe((0,ie.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Le(405,"");let d;d=a instanceof yI?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const p=function oE(i){return i.isBoundToModule}(d)?void 0:this._injector.get(rh),w=d.create(Vi.NULL,[],l||d.selector,p),C=w.location.nativeElement,A=w.injector.get(dC,null),N=A&&w.injector.get(Ym);return A&&N&&N.registerApplication(C,A),w.onDestroy(()=>{this.detachView(w.hostView),uE(this.components,w),N&&N.unregisterApplication(C)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Le(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;uE(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(zm,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(D(ji),D(Vi),D(Ao),D(Ic),D(ir))},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})();function uE(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let ap=!0,lE=!1;function up(){return lE=!0,ap}function pC(){if(lE)throw new Error("Cannot enable prod mode after platform setup.");ap=!1}let Xm=(()=>{class i{}return i.__NG_ELEMENT_ID__=gC,i})();function gC(i){return function cE(i,s,a){if(Mn(i)&&!a){const l=Sr(i.index,s);return new nh(l,l)}return 47&i.type?new nh(s[16],s):null}(an(),xe(),16==(16&i))}class i_{constructor(){}supports(s){return Rf(s)}create(s){return new CC(s)}}const xc=(i,s)=>s;class CC{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||xc}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,d=0,p=null;for(;a||l;){const y=!l||a&&a.currentIndex<fp(l,d,p)?a:l,w=fp(y,d,p),C=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{p||(p=[]);const A=w-d,N=C-d;if(A!=N){for(let U=0;U<A;U++){const Z=U<p.length?p[U]:p[U]=0,pe=Z+U;N<=pe&&pe<A&&(p[U]=Z+1)}p[y.previousIndex]=N-A}}w!==C&&s(y,w,C)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Rf(s))throw new Le(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,p,y,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)p=s[w],y=this._trackByFn(w,p),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,p,y,w)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,y,w),l=!0),a=a._next}else d=0,function yb(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Od()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,w=>{y=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,w,y,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,d){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,d)):s=this._addAfter(new wA(a,l),p,d),s}_verifyReinsertion(s,a,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?s=this._reinsertAfter(p,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,p=s._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new ya),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ya),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class wA{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Mc{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class ya{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new Mc,this.map.set(a,l)),l.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function fp(i,s,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+s+d}class pp{constructor(){}supports(s){return s instanceof Map||Os(s)}create(){return new s_}}class s_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Os(s)))throw new Le(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const p=d._prev,y=d._next;return p&&(p._next=y),y&&(y._prev=p),d._next=null,d._prev=null,d}const l=new DC(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class DC{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Cn(){return new Nc([new i_])}let Nc=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Cn()),deps:[[i,new Pn,new gt]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Le(901,"")}}return i.\u0275prov=en({token:i,providedIn:"root",factory:Cn}),i})();function bC(){return new vl([new pp])}let vl=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||bC()),deps:[[i,new Pn,new gt]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Le(901,"")}}return i.\u0275prov=en({token:i,providedIn:"root",factory:bC}),i})();const gp=[new pp],TC=new Nc([new i_]),CA=new vl(gp),DA=uh(null,"core",[{provide:rp,useValue:"unknown"},{provide:op,deps:[Vi]},{provide:Ym,deps:[]},{provide:Qv,deps:[]}]),SC=[{provide:Jm,useClass:Jm,deps:[ji,Vi,Ao,Ic,ir]},{provide:II,deps:[ji],useFactory:function xC(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:ir,useClass:ir,deps:[[new gt,Zv]]},{provide:Jv,useClass:Jv,deps:[]},np,{provide:Nc,useFactory:function bA(){return TC},deps:[]},{provide:vl,useFactory:function mp(){return CA},deps:[]},{provide:ah,useFactory:function El(i){return i||function AC(){return"undefined"!=typeof $localize&&$localize.locale||jf}()},deps:[[new Ve(ah),new gt,new Pn]]},{provide:Km,useValue:"USD"}];let hh=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(D(Jm))},i.\u0275mod=Qn({type:i}),i.\u0275inj=vi({providers:SC}),i})()},3942:(at,Se,L)=>{"use strict";L.d(Se,{Z:()=>Le});var _=L(2090),J=L(4859),O=L(9681),se=L(1877);class ie{constructor(K,re){this._delegate=K,this.firebase=re,(0,O._addComponent)(K,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=K.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this._delegate.automaticDataCollectionEnabled=K}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(K=>{this._delegate.checkDestroyed(),K()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(K,re=O._DEFAULT_ENTRY_NAME){var he;this._delegate.checkDestroyed();const De=this._delegate.container.getProvider(K);return!De.isInitialized()&&"EXPLICIT"===(null===(he=De.getComponent())||void 0===he?void 0:he.instantiationMode)&&De.initialize(),De.getImmediate({identifier:re})}_removeServiceInstance(K,re=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(K).clearInstance(re)}_addComponent(K){(0,O._addComponent)(this._delegate,K)}_addOrOverwriteComponent(K){(0,O._addOrOverwriteComponent)(this._delegate,K)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ae=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function Ee(){const He=function ce(He){const K={},re={__esModule:!0,initializeApp:function _e(Qe,mt={}){const Q=O.initializeApp(Qe,mt);if((0,_.r3)(K,Q.name))return K[Q.name];const oe=new He(Q,re);return K[Q.name]=oe,oe},app:De,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ae(Qe){const mt=Qe.name,Q=mt.replace("-compat","");if(O._registerComponent(Qe)&&"PUBLIC"===Qe.type){const oe=(ye=De())=>{if("function"!=typeof ye[Q])throw ae.create("invalid-app-argument",{appName:mt});return ye[Q]()};void 0!==Qe.serviceProps&&(0,_.ZB)(oe,Qe.serviceProps),re[Q]=oe,He.prototype[Q]=function(...ye){return this._getService.bind(this,mt).apply(this,Qe.multipleInstances?ye:[])}}return"PUBLIC"===Qe.type?re[Q]:null},removeApp:function he(Qe){delete K[Qe]},useAsService:function ot(Qe,mt){return"serverAuth"===mt?null:mt},modularAPIs:O}};function De(Qe){if(!(0,_.r3)(K,Qe=Qe||O._DEFAULT_ENTRY_NAME))throw ae.create("no-app",{appName:Qe});return K[Qe]}return re.default=re,Object.defineProperty(re,"apps",{get:function $e(){return Object.keys(K).map(Qe=>K[Qe])}}),De.App=He,re}(ie);return He.INTERNAL=Object.assign(Object.assign({},He.INTERNAL),{createFirebaseNamespace:Ee,extendNamespace:function K(re){(0,_.ZB)(He,re)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),He}(),G=new se.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const He=self.firebase.SDK_VERSION;He&&He.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Le=$;!function Oe(He){(0,O.registerVersion)("@firebase/app-compat","0.1.19",He)}()},9681:(at,Se,L)=>{"use strict";L.r(Se),L.d(Se,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Gr,_DEFAULT_ENTRY_NAME:()=>rt,_addComponent:()=>ur,_addOrOverwriteComponent:()=>en,_apps:()=>Yn,_clearComponents:()=>Ei,_components:()=>Gt,_getProvider:()=>vi,_registerComponent:()=>Hr,_removeServiceInstance:()=>Dn,deleteApp:()=>it,getApp:()=>Ne,getApps:()=>lr,initializeApp:()=>ys,onLog:()=>Bn,registerVersion:()=>kt,setLogLevel:()=>Bs});var _=L(5861),J=L(4859),O=L(1877),se=L(2090),ie=L(2940);class ge{constructor(me){this.container=me}getPlatformInfoString(){return this.container.getProviders().map(Ue=>{if(function ae(Ie){const me=Ie.getComponent();return"VERSION"===(null==me?void 0:me.type)}(Ue)){const nt=Ue.getImmediate();return`${nt.library}/${nt.version}`}return null}).filter(Ue=>Ue).join(" ")}}const ce="@firebase/app",$=new O.Yd("@firebase/app"),rt="[DEFAULT]",ht={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Yn=new Map,Gt=new Map;function ur(Ie,me){try{Ie.container.addComponent(me)}catch(Ue){$.debug(`Component ${me.name} failed to register with FirebaseApp ${Ie.name}`,Ue)}}function en(Ie,me){Ie.container.addOrOverwriteComponent(me)}function Hr(Ie){const me=Ie.name;if(Gt.has(me))return $.debug(`There were multiple attempts to register component ${me}.`),!1;Gt.set(me,Ie);for(const Ue of Yn.values())ur(Ue,Ie);return!0}function vi(Ie,me){const Ue=Ie.container.getProvider("heartbeat").getImmediate({optional:!0});return Ue&&Ue.triggerHeartbeat(),Ie.container.getProvider(me)}function Dn(Ie,me,Ue=rt){vi(Ie,me).clearInstance(Ue)}function Ei(){Gt.clear()}const Bt=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class uo{constructor(me,Ue,nt){this._isDeleted=!1,this._options=Object.assign({},me),this._config=Object.assign({},Ue),this._name=Ue.name,this._automaticDataCollectionEnabled=Ue.automaticDataCollectionEnabled,this._container=nt,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this.checkDestroyed(),this._automaticDataCollectionEnabled=me}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(me){this._isDeleted=me}checkDestroyed(){if(this.isDeleted)throw Bt.create("app-deleted",{appName:this._name})}}const Gr="9.6.8";function ys(Ie,me={}){"object"!=typeof me&&(me={name:me});const Ue=Object.assign({name:rt,automaticDataCollectionEnabled:!1},me),nt=Ue.name;if("string"!=typeof nt||!nt)throw Bt.create("bad-app-name",{appName:String(nt)});const It=Yn.get(nt);if(It){if((0,se.vZ)(Ie,It.options)&&(0,se.vZ)(Ue,It.config))return It;throw Bt.create("duplicate-app",{appName:nt})}const ct=new J.H0(nt);for(const Qn of Gt.values())ct.addComponent(Qn);const tn=new uo(Ie,Ue,ct);return Yn.set(nt,tn),tn}function Ne(Ie=rt){const me=Yn.get(Ie);if(!me)throw Bt.create("no-app",{appName:Ie});return me}function lr(){return Array.from(Yn.values())}function it(Ie){return wi.apply(this,arguments)}function wi(){return(wi=(0,_.Z)(function*(Ie){const me=Ie.name;Yn.has(me)&&(Yn.delete(me),yield Promise.all(Ie.container.getProviders().map(Ue=>Ue.delete())),Ie.isDeleted=!0)})).apply(this,arguments)}function kt(Ie,me,Ue){var nt;let It=null!==(nt=ht[Ie])&&void 0!==nt?nt:Ie;Ue&&(It+=`-${Ue}`);const ct=It.match(/\s|\//),tn=me.match(/\s|\//);if(ct||tn){const Qn=[`Unable to register library "${It}" with version "${me}":`];return ct&&Qn.push(`library name "${It}" contains illegal characters (whitespace or "/")`),ct&&tn&&Qn.push("and"),tn&&Qn.push(`version name "${me}" contains illegal characters (whitespace or "/")`),void $.warn(Qn.join(" "))}Hr(new J.wA(`${It}-version`,()=>({library:It,version:me}),"VERSION"))}function Bn(Ie,me){if(null!==Ie&&"function"!=typeof Ie)throw Bt.create("invalid-log-argument");(0,O.Am)(Ie,me)}function Bs(Ie){(0,O.Ub)(Ie)}const fn="firebase-heartbeat-store";let ii=null;function Bo(){return ii||(ii=(0,ie.openDb)("firebase-heartbeat-database",1,Ie=>{0===Ie.oldVersion&&Ie.createObjectStore(fn)}).catch(Ie=>{throw Bt.create("storage-open",{originalErrorMessage:Ie.message})})),ii}function st(){return(st=(0,_.Z)(function*(Ie){try{return(yield Bo()).transaction(fn).objectStore(fn).get(rn(Ie))}catch(me){throw Bt.create("storage-get",{originalErrorMessage:me.message})}})).apply(this,arguments)}function pt(Ie,me){return lo.apply(this,arguments)}function lo(){return(lo=(0,_.Z)(function*(Ie,me){try{const nt=(yield Bo()).transaction(fn,"readwrite");return yield nt.objectStore(fn).put(me,rn(Ie)),nt.complete}catch(Ue){throw Bt.create("storage-set",{originalErrorMessage:Ue.message})}})).apply(this,arguments)}function ut(){return(ut=(0,_.Z)(function*(Ie){try{const Ue=(yield Bo()).transaction(fn,"readwrite");return yield Ue.objectStore(fn).delete(rn(Ie)),Ue.complete}catch(me){throw Bt.create("storage-delete",{originalErrorMessage:me.message})}})).apply(this,arguments)}function rn(Ie){return`${Ie.name}!${Ie.options.appId}`}class B{constructor(me){this.container=me,this._heartbeatsCache=null;const Ue=this.container.getProvider("app").getImmediate();this._storage=new ve(Ue),this._heartbeatsCachePromise=this._storage.read().then(nt=>(this._heartbeatsCache=nt,nt))}triggerHeartbeat(){var me=this;return(0,_.Z)(function*(){const nt=me.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),It=function H(){return(new Date).toISOString().substring(0,10)}();if(null===me._heartbeatsCache&&(me._heartbeatsCache=yield me._heartbeatsCachePromise),!me._heartbeatsCache.some(ct=>ct.date===It))return me._heartbeatsCache.push({date:It,userAgent:nt}),me._heartbeatsCache=me._heartbeatsCache.filter(ct=>{const tn=new Date(ct.date).valueOf();return Date.now()-tn<=2592e6}),me._storage.overwrite(me._heartbeatsCache)})()}getHeartbeatsHeader(){var me=this;return(0,_.Z)(function*(){if(null===me._heartbeatsCache&&(yield me._heartbeatsCachePromise),null===me._heartbeatsCache)return"";const{heartbeatsToSend:Ue,unsentEntries:nt}=function W(Ie,me=1024){const Ue=[];let nt=Ie.slice();for(const It of Ie){const ct=Ue.find(tn=>tn.userAgent===It.userAgent);if(ct){if(ct.dates.push(It.date),ee(Ue)>me){ct.dates.pop();break}}else if(Ue.push({userAgent:It.userAgent,dates:[It.date]}),ee(Ue)>me){Ue.pop();break}nt=nt.slice(1)}return{heartbeatsToSend:Ue,unsentEntries:nt}}(me._heartbeatsCache),It=(0,se.h$)(JSON.stringify({version:2,heartbeats:Ue}));return nt.length>0?(me._heartbeatsCache=nt,yield me._storage.overwrite(me._heartbeatsCache)):(me._heartbeatsCache=null,me._storage.deleteAll()),It})()}}class ve{constructor(me){this.app=me,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var me=this;return(0,_.Z)(function*(){if(yield me._canUseIndexedDBPromise){const nt=yield function Rt(Ie){return st.apply(this,arguments)}(me.app);return(null==nt?void 0:nt.heartbeats)||[]}return[]})()}overwrite(me){var Ue=this;return(0,_.Z)(function*(){if(yield Ue._canUseIndexedDBPromise)return pt(Ue.app,{heartbeats:me})})()}add(me){var Ue=this;return(0,_.Z)(function*(){if(yield Ue._canUseIndexedDBPromise){const It=yield Ue.read();return pt(Ue.app,{heartbeats:[...It,...me]})}})()}delete(me){var Ue=this;return(0,_.Z)(function*(){if(yield Ue._canUseIndexedDBPromise){const It=yield Ue.read();return pt(Ue.app,{heartbeats:It.filter(ct=>!me.includes(ct))})}})()}deleteAll(){var me=this;return(0,_.Z)(function*(){if(yield me._canUseIndexedDBPromise)return function vs(Ie){return ut.apply(this,arguments)}(me.app)})()}}function ee(Ie){return(0,se.h$)(JSON.stringify({version:2,heartbeats:Ie})).length}!function Ge(Ie){Hr(new J.wA("platform-logger",me=>new ge(me),"PRIVATE")),Hr(new J.wA("heartbeat",me=>new B(me),"PRIVATE")),kt(ce,"0.7.18",Ie),kt(ce,"0.7.18","esm2017"),kt("fire-js","")}("")},4859:(at,Se,L)=>{"use strict";L.d(Se,{wA:()=>O,H0:()=>ce,zt:()=>ie});var _=L(5861),J=L(2090);class O{constructor($,G,X){this.name=$,this.instanceFactory=G,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const se="[DEFAULT]";class ie{constructor($,G){this.name=$,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const G=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(G)){const X=new J.BH;if(this.instancesDeferred.set(G,X),this.isInitialized(G)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:G});ze&&X.resolve(ze)}catch(ze){}}return this.instancesDeferred.get(G).promise}getImmediate($){var G;const X=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),ze=null!==(G=null==$?void 0:$.optional)&&void 0!==G&&G;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Oe){if(ze)return null;throw Oe}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ae(Ee){return"EAGER"===Ee.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:se})}catch(G){}for(const[G,X]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(G);try{const Oe=this.getOrInitializeService({instanceIdentifier:ze});X.resolve(Oe)}catch(Oe){}}}}clearInstance($=se){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,_.Z)(function*(){const G=Array.from($.instances.values());yield Promise.all([...G.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...G.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=se){return this.instances.has($)}getOptions($=se){return this.instancesOptions.get($)||{}}initialize($={}){const{options:G={}}=$,X=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:X,options:G});for(const[Oe,Le]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Oe)&&Le.resolve(ze);return ze}onInit($,G){var X;const ze=this.normalizeInstanceIdentifier(G),Oe=null!==(X=this.onInitCallbacks.get(ze))&&void 0!==X?X:new Set;Oe.add($),this.onInitCallbacks.set(ze,Oe);const Le=this.instances.get(ze);return Le&&$(Le,ze),()=>{Oe.delete($)}}invokeOnInitCallbacks($,G){const X=this.onInitCallbacks.get(G);if(X)for(const ze of X)try{ze($,G)}catch(Oe){}}getOrInitializeService({instanceIdentifier:$,options:G={}}){let X=this.instances.get($);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(Ee=$,Ee===se?void 0:Ee),options:G}),this.instances.set($,X),this.instancesOptions.set($,G),this.invokeOnInitCallbacks(X,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,X)}catch(ze){}var Ee;return X||null}normalizeInstanceIdentifier($=se){return this.component?this.component.multipleInstances?$:se:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor($){this.name=$,this.providers=new Map}addComponent($){const G=this.getProvider($.name);if(G.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);G.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const G=new ie($,this);return this.providers.set($,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(at,Se,L)=>{"use strict";L.d(Se,{in:()=>J,Yd:()=>ae,Ub:()=>ce,Am:()=>Ee});const _=[];var J=(()=>{return($=J||(J={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",J;var $})();const O={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},se=J.INFO,ie={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},ge=($,G,...X)=>{if(G<$.logLevel)return;const ze=(new Date).toISOString(),Oe=ie[G];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Oe](`[${ze}]  ${$.name}:`,...X)};class ae{constructor(G){this.name=G,this._logLevel=se,this._logHandler=ge,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in J))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?O[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...G),this._logHandler(this,J.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...G),this._logHandler(this,J.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,J.INFO,...G),this._logHandler(this,J.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,J.WARN,...G),this._logHandler(this,J.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...G),this._logHandler(this,J.ERROR,...G)}}function ce($){_.forEach(G=>{G.setLogLevel($)})}function Ee($,G){for(const X of _){let ze=null;G&&G.level&&(ze=O[G.level]),X.userLogHandler=null===$?null:(Oe,Le,...He)=>{const K=He.map(re=>{if(null==re)return null;if("string"==typeof re)return re;if("number"==typeof re||"boolean"==typeof re)return re.toString();if(re instanceof Error)return re.message;try{return JSON.stringify(re)}catch(he){return null}}).filter(re=>re).join(" ");Le>=(null!=ze?ze:Oe.logLevel)&&$({level:J[Le].toLowerCase(),message:K,args:He,type:Oe.name})}}}},5861:(at,Se,L)=>{"use strict";function _(O,se,ie,ge,ae,ce,Ee){try{var $=O[ce](Ee),G=$.value}catch(X){return void ie(X)}$.done?se(G):Promise.resolve(G).then(ge,ae)}function J(O){return function(){var se=this,ie=arguments;return new Promise(function(ge,ae){var ce=O.apply(se,ie);function Ee(G){_(ce,ge,ae,Ee,$,"next",G)}function $(G){_(ce,ge,ae,Ee,$,"throw",G)}Ee(void 0)})}}L.d(Se,{Z:()=>J})}},at=>{at(at.s=5057)}]);